<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>atlgdi.h Source File</title>
<link href="mystyles.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.2.15 -->
<center>
<a class="qindex" href="main.html">Main Page</a> &nbsp; <a class="qindex" href="namespaces.html">Namespace List</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="namespacemembers.html">Namespace Members</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; </center>
<hr><h1>atlgdi.h</h1><a href="atlgdi_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <font class="comment">// Windows Template Library - WTL version 7.0</font>
00002 <font class="comment">// Copyright (C) 1997-2002 Microsoft Corporation</font>
00003 <font class="comment">// All rights reserved.</font>
00004 <font class="comment">//</font>
00005 <font class="comment">// This file is a part of the Windows Template Library.</font>
00006 <font class="comment">// The code and information is provided "as-is" without</font>
00007 <font class="comment">// warranty of any kind, either expressed or implied.</font>
00008 
00009 <font class="preprocessor">#ifndef __ATLGDI_H__</font>
00010 <font class="preprocessor"></font><font class="preprocessor">#define __ATLGDI_H__</font>
00011 <font class="preprocessor"></font>
00012 <font class="preprocessor">#pragma once</font>
00013 <font class="preprocessor"></font>
00014 <font class="preprocessor">#ifndef __cplusplus</font>
00015 <font class="preprocessor"></font><font class="preprocessor">    #error ATL requires C++ compilation (use a .cpp suffix)</font>
00016 <font class="preprocessor"></font><font class="preprocessor">#endif</font>
00017 <font class="preprocessor"></font>
00018 <font class="preprocessor">#ifndef __ATLBASE_H__</font>
00019 <font class="preprocessor"></font><font class="preprocessor">    #error atlgdi.h requires atlbase.h to be included first</font>
00020 <font class="preprocessor"></font><font class="preprocessor">#endif</font>
00021 <font class="preprocessor"></font>
00022 
00023 <font class="comment">// protect template members from windowsx.h macros</font>
00024 <font class="preprocessor">#ifdef _INC_WINDOWSX</font>
00025 <font class="preprocessor"></font><font class="preprocessor">#undef CopyRgn</font>
00026 <font class="preprocessor"></font><font class="preprocessor">#undef CreateBrush</font>
00027 <font class="preprocessor"></font><font class="preprocessor">#undef CreatePen</font>
00028 <font class="preprocessor"></font><font class="preprocessor">#undef SelectBrush</font>
00029 <font class="preprocessor"></font><font class="preprocessor">#undef SelectPen</font>
00030 <font class="preprocessor"></font><font class="preprocessor">#undef SelectFont</font>
00031 <font class="preprocessor"></font><font class="preprocessor">#undef SelectBitmap</font>
00032 <font class="preprocessor"></font><font class="preprocessor">#endif //_INC_WINDOWSX</font>
00033 <font class="preprocessor"></font>
00034 <font class="comment">// required libraries</font>
00035 <font class="preprocessor">#ifndef _ATL_NO_MSIMG</font>
00036 <font class="preprocessor"></font><font class="preprocessor">#pragma comment(lib, "msimg32.lib")</font>
00037 <font class="preprocessor"></font><font class="preprocessor">#endif </font>
00038 <font class="preprocessor">#ifndef _ATL_NO_OPENGL</font>
00039 <font class="preprocessor"></font><font class="preprocessor">#pragma comment(lib, "opengl32.lib")</font>
00040 <font class="preprocessor"></font><font class="preprocessor">#endif </font>
00041 <font class="preprocessor"></font>
00042 <font class="preprocessor"></font>
00044 <font class="comment">// Classes in this file</font>
00045 <font class="comment">//</font>
00046 <font class="comment">// CPenT&lt;t_bManaged&gt;</font>
00047 <font class="comment">// CBrushT&lt;t_bManaged&gt;</font>
00048 <font class="comment">// CFontT&lt;t_bManaged&gt;</font>
00049 <font class="comment">// CBitmapT&lt;t_bManaged&gt;</font>
00050 <font class="comment">// CPaletteT&lt;t_bManaged&gt;</font>
00051 <font class="comment">// CRgnT&lt;t_bManaged&gt;</font>
00052 <font class="comment">// CDCT&lt;t_bManaged&gt;</font>
00053 <font class="comment">// CPaintDC</font>
00054 <font class="comment">// CClientDC</font>
00055 <font class="comment">// CWindowDC</font>
00056 <font class="comment">// CEnhMetaFileInfo</font>
00057 <font class="comment">// CEnhMetaFileT&lt;t_bManaged&gt;</font>
00058 <font class="comment">// CEnhMetaFileDC</font>
00059 
00060 
00061 <font class="keyword">namespace </font>WTL
00062 {
00063 
00065 <font class="comment">// CPen</font>
00066 
00067 <font class="keyword">template</font> &lt;<font class="keywordtype">bool</font> t_bManaged&gt;
<a name="l00068"></a><a class="code" href="classWTL_1_1CPenT.html">00068</a> <font class="keyword">class </font><a class="code" href="classWTL_1_1CPenT.html">CPenT</a>
00069 {
00070 <font class="keyword">public</font>:
00071 <font class="comment">// Data members</font>
00072     HPEN <a class="code" href="classWTL_1_1CPenT.html#m0">m_hPen</a>;
00073 
00074 <font class="comment">// Constructor/destructor/operators</font>
<a name="l00075"></a><a class="code" href="classWTL_1_1CPenT.html#a0">00075</a>     <a class="code" href="classWTL_1_1CPenT.html#a0">CPenT</a>(HPEN hPen = NULL) : <a class="code" href="classWTL_1_1CPenT.html#m0">m_hPen</a>(hPen)
00076     { }
00077 
<a name="l00078"></a><a class="code" href="classWTL_1_1CPenT.html#a1">00078</a>     <a class="code" href="classWTL_1_1CPenT.html#a1">~CPenT</a>()
00079     {
00080         <font class="keywordflow">if</font>(t_bManaged &amp;&amp; <a class="code" href="classWTL_1_1CPenT.html#m0">m_hPen</a> != NULL)
00081             <a class="code" href="classWTL_1_1CPenT.html#a10">DeleteObject</a>();
00082     }
00083 
<a name="l00084"></a><a class="code" href="classWTL_1_1CPenT.html#a2">00084</a>     <a class="code" href="classWTL_1_1CPenT.html">CPenT&lt;t_bManaged&gt;</a>&amp; <a class="code" href="classWTL_1_1CPenT.html#a2">operator=</a>(HPEN hPen)
00085     {
00086         <a class="code" href="classWTL_1_1CPenT.html#m0">m_hPen</a> = hPen;
00087         <font class="keywordflow">return</font> *<font class="keyword">this</font>;
00088     }
00089 
<a name="l00090"></a><a class="code" href="classWTL_1_1CPenT.html#a3">00090</a>     <font class="keywordtype">void</font> <a class="code" href="classWTL_1_1CPenT.html#a3">Attach</a>(HPEN hPen)
00091     {
00092         <font class="keywordflow">if</font>(t_bManaged &amp;&amp; <a class="code" href="classWTL_1_1CPenT.html#m0">m_hPen</a> != NULL)
00093             ::DeleteObject(m_hPen);
00094         <a class="code" href="classWTL_1_1CPenT.html#m0">m_hPen</a> = hPen;
00095     }
<a name="l00096"></a><a class="code" href="classWTL_1_1CPenT.html#a4">00096</a>     HPEN <a class="code" href="classWTL_1_1CPenT.html#a4">Detach</a>()
00097     {
00098         HPEN hPen = <a class="code" href="classWTL_1_1CPenT.html#m0">m_hPen</a>;
00099         <a class="code" href="classWTL_1_1CPenT.html#m0">m_hPen</a> = NULL;
00100         <font class="keywordflow">return</font> hPen;
00101     }
00102 
<a name="l00103"></a><a class="code" href="classWTL_1_1CPenT.html#a5">00103</a>     <a class="code" href="classWTL_1_1CPenT.html#a5">operator HPEN</a>()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> <a class="code" href="classWTL_1_1CPenT.html#m0">m_hPen</a>; }
00104 
<a name="l00105"></a><a class="code" href="classWTL_1_1CPenT.html#a6">00105</a>     <font class="keywordtype">bool</font> <a class="code" href="classWTL_1_1CPenT.html#a6">IsNull</a>()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> (<a class="code" href="classWTL_1_1CPenT.html#m0">m_hPen</a> == NULL); }
00106 
00107 <font class="comment">// Create methods</font>
<a name="l00108"></a><a class="code" href="classWTL_1_1CPenT.html#a7">00108</a>     HPEN <a class="code" href="classWTL_1_1CPenT.html#a7">CreatePen</a>(<font class="keywordtype">int</font> nPenStyle, <font class="keywordtype">int</font> nWidth, COLORREF crColor)
00109     {
00110         ATLASSERT(<a class="code" href="classWTL_1_1CPenT.html#m0">m_hPen</a> == NULL);
00111         <a class="code" href="classWTL_1_1CPenT.html#m0">m_hPen</a> = ::CreatePen(nPenStyle, nWidth, crColor);
00112         <font class="keywordflow">return</font> <a class="code" href="classWTL_1_1CPenT.html#m0">m_hPen</a>;
00113     }
<a name="l00114"></a><a class="code" href="classWTL_1_1CPenT.html#a8">00114</a>     HPEN <a class="code" href="classWTL_1_1CPenT.html#a7">CreatePen</a>(<font class="keywordtype">int</font> nPenStyle, <font class="keywordtype">int</font> nWidth, <font class="keyword">const</font> LOGBRUSH* pLogBrush, <font class="keywordtype">int</font> nStyleCount = 0, <font class="keyword">const</font> DWORD* lpStyle = NULL)
00115     {
00116         ATLASSERT(<a class="code" href="classWTL_1_1CPenT.html#m0">m_hPen</a> == NULL);
00117         <a class="code" href="classWTL_1_1CPenT.html#m0">m_hPen</a> = ::ExtCreatePen(nPenStyle, nWidth, pLogBrush, nStyleCount, lpStyle);
00118         <font class="keywordflow">return</font> <a class="code" href="classWTL_1_1CPenT.html#m0">m_hPen</a>;
00119     }
<a name="l00120"></a><a class="code" href="classWTL_1_1CPenT.html#a9">00120</a>     HPEN <a class="code" href="classWTL_1_1CPenT.html#a9">CreatePenIndirect</a>(LPLOGPEN lpLogPen)
00121     {
00122         ATLASSERT(<a class="code" href="classWTL_1_1CPenT.html#m0">m_hPen</a> == NULL);
00123         <a class="code" href="classWTL_1_1CPenT.html#m0">m_hPen</a> = ::CreatePenIndirect(lpLogPen);
00124         <font class="keywordflow">return</font> <a class="code" href="classWTL_1_1CPenT.html#m0">m_hPen</a>;
00125     }
00126 
<a name="l00127"></a><a class="code" href="classWTL_1_1CPenT.html#a10">00127</a>     BOOL <a class="code" href="classWTL_1_1CPenT.html#a10">DeleteObject</a>()
00128     {
00129         ATLASSERT(<a class="code" href="classWTL_1_1CPenT.html#m0">m_hPen</a> != NULL);
00130         BOOL bRet = ::DeleteObject(m_hPen);
00131         <font class="keywordflow">if</font>(bRet)
00132             <a class="code" href="classWTL_1_1CPenT.html#m0">m_hPen</a> = NULL;
00133         <font class="keywordflow">return</font> bRet;
00134     }
00135 
00136 <font class="comment">// Attributes</font>
<a name="l00137"></a><a class="code" href="classWTL_1_1CPenT.html#a11">00137</a>     <font class="keywordtype">int</font> <a class="code" href="classWTL_1_1CPenT.html#a11">GetLogPen</a>(LOGPEN* pLogPen)<font class="keyword"> const</font>
00138 <font class="keyword">    </font>{
00139         ATLASSERT(<a class="code" href="classWTL_1_1CPenT.html#m0">m_hPen</a> != NULL);
00140         return ::GetObject(<a class="code" href="classWTL_1_1CPenT.html#m0">m_hPen</a>, <font class="keyword">sizeof</font>(LOGPEN), pLogPen);
00141     }
<a name="l00142"></a><a class="code" href="classWTL_1_1CPenT.html#a12">00142</a>     <font class="keywordtype">bool</font> <a class="code" href="classWTL_1_1CPenT.html#a11">GetLogPen</a>(LOGPEN&amp; LogPen)<font class="keyword"> const</font>
00143 <font class="keyword">    </font>{
00144         ATLASSERT(<a class="code" href="classWTL_1_1CPenT.html#m0">m_hPen</a> != NULL);
00145         <font class="keywordflow">return</font> (::GetObject(<a class="code" href="classWTL_1_1CPenT.html#m0">m_hPen</a>, <font class="keyword">sizeof</font>(LOGPEN), &amp;LogPen) == <font class="keyword">sizeof</font>(LOGPEN));
00146     }
<a name="l00147"></a><a class="code" href="classWTL_1_1CPenT.html#a13">00147</a>     <font class="keywordtype">int</font> <a class="code" href="classWTL_1_1CPenT.html#a13">GetExtLogPen</a>(EXTLOGPEN* pLogPen)<font class="keyword"> const</font>
00148 <font class="keyword">    </font>{
00149         ATLASSERT(<a class="code" href="classWTL_1_1CPenT.html#m0">m_hPen</a> != NULL);
00150         return ::GetObject(<a class="code" href="classWTL_1_1CPenT.html#m0">m_hPen</a>, <font class="keyword">sizeof</font>(EXTLOGPEN), pLogPen);
00151     }
<a name="l00152"></a><a class="code" href="classWTL_1_1CPenT.html#a14">00152</a>     <font class="keywordtype">bool</font> <a class="code" href="classWTL_1_1CPenT.html#a13">GetExtLogPen</a>(EXTLOGPEN&amp; ExtLogPen)<font class="keyword"> const</font>
00153 <font class="keyword">    </font>{
00154         ATLASSERT(<a class="code" href="classWTL_1_1CPenT.html#m0">m_hPen</a> != NULL);
00155         <font class="keywordflow">return</font> (::GetObject(<a class="code" href="classWTL_1_1CPenT.html#m0">m_hPen</a>, <font class="keyword">sizeof</font>(EXTLOGPEN), &amp;ExtLogPen) == <font class="keyword">sizeof</font>(EXTLOGPEN));
00156     }
00157 };
00158 
<a name="l00159"></a><a class="code" href="namespaceWTL.html#a35">00159</a> <font class="keyword">typedef</font> <a class="code" href="classWTL_1_1CPenT.html">CPenT&lt;false&gt;</a>        <a class="code" href="namespaceWTL.html#a35">CPenHandle</a>;
<a name="l00160"></a><a class="code" href="namespaceWTL.html#a36">00160</a> <font class="keyword">typedef</font> <a class="code" href="classWTL_1_1CPenT.html">CPenT&lt;true&gt;</a>     <a class="code" href="namespaceWTL.html#a36">CPen</a>;
00161 
00162 
00164 <font class="comment">// CBrush</font>
00165 
00166 <font class="keyword">template</font> &lt;<font class="keywordtype">bool</font> t_bManaged&gt;
<a name="l00167"></a><a class="code" href="classWTL_1_1CBrushT.html">00167</a> <font class="keyword">class </font><a class="code" href="classWTL_1_1CBrushT.html">CBrushT</a>
00168 {
00169 <font class="keyword">public</font>:
00170 <font class="comment">// Data members</font>
00171     HBRUSH <a class="code" href="classWTL_1_1CBrushT.html#m0">m_hBrush</a>;
00172 
00173 <font class="comment">// Constructor/destructor/operators</font>
<a name="l00174"></a><a class="code" href="classWTL_1_1CBrushT.html#a0">00174</a>     <a class="code" href="classWTL_1_1CBrushT.html#a0">CBrushT</a>(HBRUSH hBrush = NULL) : <a class="code" href="classWTL_1_1CBrushT.html#m0">m_hBrush</a>(hBrush)
00175     { }
00176 
<a name="l00177"></a><a class="code" href="classWTL_1_1CBrushT.html#a1">00177</a>     <a class="code" href="classWTL_1_1CBrushT.html#a1">~CBrushT</a>()
00178     {
00179         <font class="keywordflow">if</font>(t_bManaged &amp;&amp; <a class="code" href="classWTL_1_1CBrushT.html#m0">m_hBrush</a> != NULL)
00180             <a class="code" href="classWTL_1_1CBrushT.html#a14">DeleteObject</a>();
00181     }
00182 
<a name="l00183"></a><a class="code" href="classWTL_1_1CBrushT.html#a2">00183</a>     <a class="code" href="classWTL_1_1CBrushT.html">CBrushT&lt;t_bManaged&gt;</a>&amp; <a class="code" href="classWTL_1_1CBrushT.html#a2">operator=</a>(HBRUSH hBrush)
00184     {
00185         <a class="code" href="classWTL_1_1CBrushT.html#m0">m_hBrush</a> = hBrush;
00186         <font class="keywordflow">return</font> *<font class="keyword">this</font>;
00187     }
00188 
<a name="l00189"></a><a class="code" href="classWTL_1_1CBrushT.html#a3">00189</a>     <font class="keywordtype">void</font> <a class="code" href="classWTL_1_1CBrushT.html#a3">Attach</a>(HBRUSH hBrush)
00190     {
00191         <font class="keywordflow">if</font>(t_bManaged &amp;&amp; <a class="code" href="classWTL_1_1CBrushT.html#m0">m_hBrush</a> != NULL)
00192             ::DeleteObject(m_hBrush);
00193         <a class="code" href="classWTL_1_1CBrushT.html#m0">m_hBrush</a> = hBrush;
00194     }
<a name="l00195"></a><a class="code" href="classWTL_1_1CBrushT.html#a4">00195</a>     HBRUSH <a class="code" href="classWTL_1_1CBrushT.html#a4">Detach</a>()
00196     {
00197         HBRUSH hBrush = <a class="code" href="classWTL_1_1CBrushT.html#m0">m_hBrush</a>;
00198         <a class="code" href="classWTL_1_1CBrushT.html#m0">m_hBrush</a> = NULL;
00199         <font class="keywordflow">return</font> hBrush;
00200     }
00201 
<a name="l00202"></a><a class="code" href="classWTL_1_1CBrushT.html#a5">00202</a>     <a class="code" href="classWTL_1_1CBrushT.html#a5">operator HBRUSH</a>()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> <a class="code" href="classWTL_1_1CBrushT.html#m0">m_hBrush</a>; }
00203 
<a name="l00204"></a><a class="code" href="classWTL_1_1CBrushT.html#a6">00204</a>     <font class="keywordtype">bool</font> <a class="code" href="classWTL_1_1CBrushT.html#a6">IsNull</a>()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> (<a class="code" href="classWTL_1_1CBrushT.html#m0">m_hBrush</a> == NULL); }
00205 
00206 <font class="comment">// Create methods</font>
<a name="l00207"></a><a class="code" href="classWTL_1_1CBrushT.html#a7">00207</a>     HBRUSH <a class="code" href="classWTL_1_1CBrushT.html#a7">CreateSolidBrush</a>(COLORREF crColor)
00208     {
00209         ATLASSERT(<a class="code" href="classWTL_1_1CBrushT.html#m0">m_hBrush</a> == NULL);
00210         <a class="code" href="classWTL_1_1CBrushT.html#m0">m_hBrush</a> = ::CreateSolidBrush(crColor);
00211         <font class="keywordflow">return</font> <a class="code" href="classWTL_1_1CBrushT.html#m0">m_hBrush</a>;
00212     }
<a name="l00213"></a><a class="code" href="classWTL_1_1CBrushT.html#a8">00213</a>     HBRUSH <a class="code" href="classWTL_1_1CBrushT.html#a8">CreateHatchBrush</a>(<font class="keywordtype">int</font> nIndex, COLORREF crColor)
00214     {
00215         ATLASSERT(<a class="code" href="classWTL_1_1CBrushT.html#m0">m_hBrush</a> == NULL);
00216         <a class="code" href="classWTL_1_1CBrushT.html#m0">m_hBrush</a> = ::CreateHatchBrush(nIndex, crColor);
00217         <font class="keywordflow">return</font> <a class="code" href="classWTL_1_1CBrushT.html#m0">m_hBrush</a>;
00218     }
<a name="l00219"></a><a class="code" href="classWTL_1_1CBrushT.html#a9">00219</a>     HBRUSH <a class="code" href="classWTL_1_1CBrushT.html#a9">CreateBrushIndirect</a>(<font class="keyword">const</font> LOGBRUSH* lpLogBrush)
00220     {
00221         ATLASSERT(<a class="code" href="classWTL_1_1CBrushT.html#m0">m_hBrush</a> == NULL);
00222         <a class="code" href="classWTL_1_1CBrushT.html#m0">m_hBrush</a> = ::CreateBrushIndirect(lpLogBrush);
00223         <font class="keywordflow">return</font> <a class="code" href="classWTL_1_1CBrushT.html#m0">m_hBrush</a>;
00224     }
<a name="l00225"></a><a class="code" href="classWTL_1_1CBrushT.html#a10">00225</a>     HBRUSH <a class="code" href="classWTL_1_1CBrushT.html#a10">CreatePatternBrush</a>(HBITMAP hBitmap)
00226     {
00227         ATLASSERT(<a class="code" href="classWTL_1_1CBrushT.html#m0">m_hBrush</a> == NULL);
00228         <a class="code" href="classWTL_1_1CBrushT.html#m0">m_hBrush</a> = ::CreatePatternBrush(hBitmap);
00229         <font class="keywordflow">return</font> <a class="code" href="classWTL_1_1CBrushT.html#m0">m_hBrush</a>;
00230     }
<a name="l00231"></a><a class="code" href="classWTL_1_1CBrushT.html#a11">00231</a>     HBRUSH <a class="code" href="classWTL_1_1CBrushT.html#a11">CreateDIBPatternBrush</a>(HGLOBAL hPackedDIB, UINT nUsage)
00232     {
00233         ATLASSERT(hPackedDIB != NULL);
00234         <font class="keyword">const</font> <font class="keywordtype">void</font>* lpPackedDIB = ::GlobalLock(hPackedDIB);
00235         ATLASSERT(lpPackedDIB != NULL);
00236         <a class="code" href="classWTL_1_1CBrushT.html#m0">m_hBrush</a> = ::CreateDIBPatternBrushPt(lpPackedDIB, nUsage);
00237         ::GlobalUnlock(hPackedDIB);
00238         <font class="keywordflow">return</font> <a class="code" href="classWTL_1_1CBrushT.html#m0">m_hBrush</a>;
00239     }
<a name="l00240"></a><a class="code" href="classWTL_1_1CBrushT.html#a12">00240</a>     HBRUSH <a class="code" href="classWTL_1_1CBrushT.html#a11">CreateDIBPatternBrush</a>(<font class="keyword">const</font> <font class="keywordtype">void</font>* lpPackedDIB, UINT nUsage)
00241     {
00242         ATLASSERT(<a class="code" href="classWTL_1_1CBrushT.html#m0">m_hBrush</a> == NULL);
00243         <a class="code" href="classWTL_1_1CBrushT.html#m0">m_hBrush</a> = ::CreateDIBPatternBrushPt(lpPackedDIB, nUsage);
00244         <font class="keywordflow">return</font> <a class="code" href="classWTL_1_1CBrushT.html#m0">m_hBrush</a>;
00245     }
<a name="l00246"></a><a class="code" href="classWTL_1_1CBrushT.html#a13">00246</a>     HBRUSH <a class="code" href="classWTL_1_1CBrushT.html#a13">CreateSysColorBrush</a>(<font class="keywordtype">int</font> nIndex)
00247     {
00248         ATLASSERT(<a class="code" href="classWTL_1_1CBrushT.html#m0">m_hBrush</a> == NULL);
00249         <a class="code" href="classWTL_1_1CBrushT.html#m0">m_hBrush</a> = ::GetSysColorBrush(nIndex);
00250         <font class="keywordflow">return</font> <a class="code" href="classWTL_1_1CBrushT.html#m0">m_hBrush</a>;
00251     }
00252 
<a name="l00253"></a><a class="code" href="classWTL_1_1CBrushT.html#a14">00253</a>     BOOL <a class="code" href="classWTL_1_1CBrushT.html#a14">DeleteObject</a>()
00254     {
00255         ATLASSERT(<a class="code" href="classWTL_1_1CBrushT.html#m0">m_hBrush</a> != NULL);
00256         BOOL bRet = ::DeleteObject(m_hBrush);
00257         <font class="keywordflow">if</font>(bRet)
00258             <a class="code" href="classWTL_1_1CBrushT.html#m0">m_hBrush</a> = NULL;
00259         <font class="keywordflow">return</font> bRet;
00260     }
00261 
00262 <font class="comment">// Attributes</font>
<a name="l00263"></a><a class="code" href="classWTL_1_1CBrushT.html#a15">00263</a>     <font class="keywordtype">int</font> <a class="code" href="classWTL_1_1CBrushT.html#a15">GetLogBrush</a>(LOGBRUSH* pLogBrush)<font class="keyword"> const</font>
00264 <font class="keyword">    </font>{
00265         ATLASSERT(<a class="code" href="classWTL_1_1CBrushT.html#m0">m_hBrush</a> != NULL);
00266         return ::GetObject(<a class="code" href="classWTL_1_1CBrushT.html#m0">m_hBrush</a>, <font class="keyword">sizeof</font>(LOGBRUSH), pLogBrush);
00267     }
<a name="l00268"></a><a class="code" href="classWTL_1_1CBrushT.html#a16">00268</a>     <font class="keywordtype">bool</font> <a class="code" href="classWTL_1_1CBrushT.html#a15">GetLogBrush</a>(LOGBRUSH&amp; LogBrush)<font class="keyword"> const</font>
00269 <font class="keyword">    </font>{
00270         ATLASSERT(<a class="code" href="classWTL_1_1CBrushT.html#m0">m_hBrush</a> != NULL);
00271         <font class="keywordflow">return</font> (::GetObject(<a class="code" href="classWTL_1_1CBrushT.html#m0">m_hBrush</a>, <font class="keyword">sizeof</font>(LOGBRUSH), &amp;LogBrush) == <font class="keyword">sizeof</font>(LOGBRUSH));
00272     }
00273 };
00274 
<a name="l00275"></a><a class="code" href="namespaceWTL.html#a37">00275</a> <font class="keyword">typedef</font> <a class="code" href="classWTL_1_1CBrushT.html">CBrushT&lt;false&gt;</a>      <a class="code" href="namespaceWTL.html#a37">CBrushHandle</a>;
<a name="l00276"></a><a class="code" href="namespaceWTL.html#a38">00276</a> <font class="keyword">typedef</font> <a class="code" href="classWTL_1_1CBrushT.html">CBrushT&lt;true&gt;</a>       <a class="code" href="namespaceWTL.html#a38">CBrush</a>;
00277 
00278 
00280 <font class="comment">// CFont</font>
00281 
00282 <font class="keyword">template</font> &lt;<font class="keywordtype">bool</font> t_bManaged&gt;
<a name="l00283"></a><a class="code" href="classWTL_1_1CFontT.html">00283</a> <font class="keyword">class </font><a class="code" href="classWTL_1_1CFontT.html">CFontT</a>
00284 {
00285 <font class="keyword">public</font>:
00286 <font class="comment">// Data members</font>
00287     HFONT <a class="code" href="classWTL_1_1CFontT.html#m0">m_hFont</a>;
00288 
00289 <font class="comment">// Constructor/destructor/operators</font>
<a name="l00290"></a><a class="code" href="classWTL_1_1CFontT.html#a0">00290</a>     <a class="code" href="classWTL_1_1CFontT.html#a0">CFontT</a>(HFONT hFont = NULL) : <a class="code" href="classWTL_1_1CFontT.html#m0">m_hFont</a>(hFont)
00291     { }
00292 
<a name="l00293"></a><a class="code" href="classWTL_1_1CFontT.html#a1">00293</a>     <a class="code" href="classWTL_1_1CFontT.html#a1">~CFontT</a>()
00294     {
00295         <font class="keywordflow">if</font>(t_bManaged &amp;&amp; <a class="code" href="classWTL_1_1CFontT.html#m0">m_hFont</a> != NULL)
00296             <a class="code" href="classWTL_1_1CFontT.html#a12">DeleteObject</a>();
00297     }
00298 
<a name="l00299"></a><a class="code" href="classWTL_1_1CFontT.html#a2">00299</a>     <a class="code" href="classWTL_1_1CFontT.html">CFontT&lt;t_bManaged&gt;</a>&amp; <a class="code" href="classWTL_1_1CFontT.html#a2">operator=</a>(HFONT hFont)
00300     {
00301         <a class="code" href="classWTL_1_1CFontT.html#m0">m_hFont</a> = hFont;
00302         <font class="keywordflow">return</font> *<font class="keyword">this</font>;
00303     }
00304 
<a name="l00305"></a><a class="code" href="classWTL_1_1CFontT.html#a3">00305</a>     <font class="keywordtype">void</font> <a class="code" href="classWTL_1_1CFontT.html#a3">Attach</a>(HFONT hFont)
00306     {
00307         <font class="keywordflow">if</font>(t_bManaged &amp;&amp; <a class="code" href="classWTL_1_1CFontT.html#m0">m_hFont</a> != NULL)
00308             ::DeleteObject(m_hFont);
00309         <a class="code" href="classWTL_1_1CFontT.html#m0">m_hFont</a> = hFont;
00310     }
<a name="l00311"></a><a class="code" href="classWTL_1_1CFontT.html#a4">00311</a>     HFONT <a class="code" href="classWTL_1_1CFontT.html#a4">Detach</a>()
00312     {
00313         HFONT hFont = <a class="code" href="classWTL_1_1CFontT.html#m0">m_hFont</a>;
00314         <a class="code" href="classWTL_1_1CFontT.html#m0">m_hFont</a> = NULL;
00315         <font class="keywordflow">return</font> hFont;
00316     }
00317 
<a name="l00318"></a><a class="code" href="classWTL_1_1CFontT.html#a5">00318</a>     <a class="code" href="classWTL_1_1CFontT.html#a5">operator HFONT</a>()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> <a class="code" href="classWTL_1_1CFontT.html#m0">m_hFont</a>; }
00319 
<a name="l00320"></a><a class="code" href="classWTL_1_1CFontT.html#a6">00320</a>     <font class="keywordtype">bool</font> <a class="code" href="classWTL_1_1CFontT.html#a6">IsNull</a>()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> (<a class="code" href="classWTL_1_1CFontT.html#m0">m_hFont</a> == NULL); }
00321 
00322 <font class="comment">// Create methods</font>
<a name="l00323"></a><a class="code" href="classWTL_1_1CFontT.html#a7">00323</a>     HFONT <a class="code" href="classWTL_1_1CFontT.html#a7">CreateFontIndirect</a>(<font class="keyword">const</font> LOGFONT* lpLogFont)
00324     {
00325         ATLASSERT(<a class="code" href="classWTL_1_1CFontT.html#m0">m_hFont</a> == NULL);
00326         <a class="code" href="classWTL_1_1CFontT.html#m0">m_hFont</a> = ::CreateFontIndirect(lpLogFont);
00327         <font class="keywordflow">return</font> <a class="code" href="classWTL_1_1CFontT.html#m0">m_hFont</a>;
00328     }
00329 
00330 <font class="preprocessor">#if (_WIN32_WINNT &gt;= 0x0500)</font>
<a name="l00331"></a><a class="code" href="classWTL_1_1CFontT.html#a8">00331</a> <font class="preprocessor"></font>    HFONT <a class="code" href="classWTL_1_1CFontT.html#a8">CreateFontIndirectEx</a>(CONST ENUMLOGFONTEXDV* penumlfex)
00332     {
00333         ATLASSERT(<a class="code" href="classWTL_1_1CFontT.html#m0">m_hFont</a> == NULL);
00334         <a class="code" href="classWTL_1_1CFontT.html#m0">m_hFont</a> = ::CreateFontIndirectEx(penumlfex);
00335         <font class="keywordflow">return</font> <a class="code" href="classWTL_1_1CFontT.html#m0">m_hFont</a>;
00336     }
00337 <font class="preprocessor">#endif //(_WIN32_WINNT &gt;= 0x0500)</font>
00338 <font class="preprocessor"></font>
<a name="l00339"></a><a class="code" href="classWTL_1_1CFontT.html#a9">00339</a>     HFONT <a class="code" href="classWTL_1_1CFontT.html#a9">CreateFont</a>(<font class="keywordtype">int</font> nHeight, <font class="keywordtype">int</font> nWidth, <font class="keywordtype">int</font> nEscapement,
00340             <font class="keywordtype">int</font> nOrientation, <font class="keywordtype">int</font> nWeight, BYTE bItalic, BYTE bUnderline,
00341             BYTE cStrikeOut, BYTE nCharSet, BYTE nOutPrecision,
00342             BYTE nClipPrecision, BYTE nQuality, BYTE nPitchAndFamily,
00343             LPCTSTR lpszFacename)
00344     {
00345         ATLASSERT(<a class="code" href="classWTL_1_1CFontT.html#m0">m_hFont</a> == NULL);
00346         <a class="code" href="classWTL_1_1CFontT.html#m0">m_hFont</a> = ::CreateFont(nHeight, nWidth, nEscapement,
00347             nOrientation, nWeight, bItalic, bUnderline, cStrikeOut,
00348             nCharSet, nOutPrecision, nClipPrecision, nQuality,
00349             nPitchAndFamily, lpszFacename);
00350         <font class="keywordflow">return</font> <a class="code" href="classWTL_1_1CFontT.html#m0">m_hFont</a>;
00351     }
<a name="l00352"></a><a class="code" href="classWTL_1_1CFontT.html#a10">00352</a>     HFONT <a class="code" href="classWTL_1_1CFontT.html#a10">CreatePointFont</a>(<font class="keywordtype">int</font> nPointSize, LPCTSTR lpszFaceName, HDC hDC = NULL)
00353     {
00354         LOGFONT logFont;
00355         memset(&amp;logFont, 0, <font class="keyword">sizeof</font>(LOGFONT));
00356         logFont.lfCharSet = DEFAULT_CHARSET;
00357         logFont.lfHeight = nPointSize;
00358         lstrcpyn(logFont.lfFaceName, lpszFaceName, <font class="keyword">sizeof</font>(logFont.lfFaceName)/<font class="keyword">sizeof</font>(TCHAR));
00359         <font class="keywordflow">return</font> <a class="code" href="classWTL_1_1CFontT.html#a11">CreatePointFontIndirect</a>(&amp;logFont, hDC);
00360     }
<a name="l00361"></a><a class="code" href="classWTL_1_1CFontT.html#a11">00361</a>     HFONT <a class="code" href="classWTL_1_1CFontT.html#a11">CreatePointFontIndirect</a>(<font class="keyword">const</font> LOGFONT* lpLogFont, HDC hDC = NULL)
00362     {
00363         HDC hDC1 = (hDC != NULL) ? hDC : ::GetDC(NULL);
00364 
00365         <font class="comment">// convert nPointSize to logical units based on hDC</font>
00366         LOGFONT logFont = *lpLogFont;
00367         POINT pt;
00368         pt.y = ::GetDeviceCaps(hDC1, LOGPIXELSY) * logFont.lfHeight;
00369         pt.y /= 720;    <font class="comment">// 72 points/inch, 10 decipoints/point</font>
00370         ::DPtoLP(hDC1, &amp;pt, 1);
00371         POINT ptOrg = { 0, 0 };
00372         ::DPtoLP(hDC1, &amp;ptOrg, 1);
00373         logFont.lfHeight = -abs(pt.y - ptOrg.y);
00374 
00375         <font class="keywordflow">if</font>(hDC == NULL)
00376             ::ReleaseDC(NULL, hDC1);
00377 
00378         <font class="keywordflow">return</font> <a class="code" href="classWTL_1_1CFontT.html#a7">CreateFontIndirect</a>(&amp;logFont);
00379     }
00380 
<a name="l00381"></a><a class="code" href="classWTL_1_1CFontT.html#a12">00381</a>     BOOL <a class="code" href="classWTL_1_1CFontT.html#a12">DeleteObject</a>()
00382     {
00383         ATLASSERT(<a class="code" href="classWTL_1_1CFontT.html#m0">m_hFont</a> != NULL);
00384         BOOL bRet = ::DeleteObject(m_hFont);
00385         <font class="keywordflow">if</font>(bRet)
00386             <a class="code" href="classWTL_1_1CFontT.html#m0">m_hFont</a> = NULL;
00387         <font class="keywordflow">return</font> bRet;
00388     }
00389 
00390 <font class="comment">// Attributes</font>
<a name="l00391"></a><a class="code" href="classWTL_1_1CFontT.html#a13">00391</a>     <font class="keywordtype">int</font> <a class="code" href="classWTL_1_1CFontT.html#a13">GetLogFont</a>(LOGFONT* pLogFont)<font class="keyword"> const</font>
00392 <font class="keyword">    </font>{
00393         ATLASSERT(<a class="code" href="classWTL_1_1CFontT.html#m0">m_hFont</a> != NULL);
00394         return ::GetObject(<a class="code" href="classWTL_1_1CFontT.html#m0">m_hFont</a>, <font class="keyword">sizeof</font>(LOGFONT), pLogFont);
00395     }
<a name="l00396"></a><a class="code" href="classWTL_1_1CFontT.html#a14">00396</a>     <font class="keywordtype">bool</font> <a class="code" href="classWTL_1_1CFontT.html#a13">GetLogFont</a>(LOGFONT&amp; LogFont)<font class="keyword"> const</font>
00397 <font class="keyword">    </font>{
00398         ATLASSERT(<a class="code" href="classWTL_1_1CFontT.html#m0">m_hFont</a> != NULL);
00399         <font class="keywordflow">return</font> (::GetObject(<a class="code" href="classWTL_1_1CFontT.html#m0">m_hFont</a>, <font class="keyword">sizeof</font>(LOGFONT), &amp;LogFont) == <font class="keyword">sizeof</font>(LOGFONT));
00400     }
00401 };
00402 
<a name="l00403"></a><a class="code" href="namespaceWTL.html#a39">00403</a> <font class="keyword">typedef</font> <a class="code" href="classWTL_1_1CFontT.html">CFontT&lt;false&gt;</a>       <a class="code" href="namespaceWTL.html#a39">CFontHandle</a>;
<a name="l00404"></a><a class="code" href="namespaceWTL.html#a40">00404</a> <font class="keyword">typedef</font> <a class="code" href="classWTL_1_1CFontT.html">CFontT&lt;true&gt;</a>        <a class="code" href="namespaceWTL.html#a40">CFont</a>;
00405 
00406 
00408 <font class="comment">// CBitmap</font>
00409 
00410 <font class="keyword">template</font> &lt;<font class="keywordtype">bool</font> t_bManaged&gt;
<a name="l00411"></a><a class="code" href="classWTL_1_1CBitmapT.html">00411</a> <font class="keyword">class </font><a class="code" href="classWTL_1_1CBitmapT.html">CBitmapT</a>
00412 {
00413 <font class="keyword">public</font>:
00414 <font class="comment">// Data members</font>
<a name="l00415"></a><a class="code" href="classWTL_1_1CBitmapT.html#m0">00415</a>     HBITMAP <a class="code" href="classWTL_1_1CBitmapT.html#m0">m_hBitmap</a>;
00416 
00417 <font class="comment">// Constructor/destructor/operators</font>
<a name="l00418"></a><a class="code" href="classWTL_1_1CBitmapT.html#a0">00418</a>     <a class="code" href="classWTL_1_1CBitmapT.html#a0">CBitmapT</a>(HBITMAP hBitmap = NULL) : <a class="code" href="classWTL_1_1CBitmapT.html#m0">m_hBitmap</a>(hBitmap)
00419     { }
00420 
<a name="l00421"></a><a class="code" href="classWTL_1_1CBitmapT.html#a1">00421</a>     <a class="code" href="classWTL_1_1CBitmapT.html#a1">~CBitmapT</a>()
00422     {
00423         <font class="keywordflow">if</font>(t_bManaged &amp;&amp; <a class="code" href="classWTL_1_1CBitmapT.html#m0">m_hBitmap</a> != NULL)
00424             <a class="code" href="classWTL_1_1CBitmapT.html#a14">DeleteObject</a>();
00425     }
00426 
<a name="l00427"></a><a class="code" href="classWTL_1_1CBitmapT.html#a2">00427</a>     <a class="code" href="classWTL_1_1CBitmapT.html">CBitmapT&lt;t_bManaged&gt;</a>&amp; <a class="code" href="classWTL_1_1CBitmapT.html#a2">operator=</a>(HBITMAP hBitmap)
00428     {
00429         <a class="code" href="classWTL_1_1CBitmapT.html#m0">m_hBitmap</a> = hBitmap;
00430         <font class="keywordflow">return</font> *<font class="keyword">this</font>;
00431     }
00432 
<a name="l00433"></a><a class="code" href="classWTL_1_1CBitmapT.html#a3">00433</a>     <font class="keywordtype">void</font> <a class="code" href="classWTL_1_1CBitmapT.html#a3">Attach</a>(HBITMAP hBitmap)
00434     {
00435         <font class="keywordflow">if</font>(t_bManaged &amp;&amp; <a class="code" href="classWTL_1_1CBitmapT.html#m0">m_hBitmap</a> != NULL)
00436             ::DeleteObject(m_hBitmap);
00437         <a class="code" href="classWTL_1_1CBitmapT.html#m0">m_hBitmap</a> = hBitmap;
00438     }
<a name="l00439"></a><a class="code" href="classWTL_1_1CBitmapT.html#a4">00439</a>     HBITMAP <a class="code" href="classWTL_1_1CBitmapT.html#a4">Detach</a>()
00440     {
00441         HBITMAP hBitmap = <a class="code" href="classWTL_1_1CBitmapT.html#m0">m_hBitmap</a>;
00442         <a class="code" href="classWTL_1_1CBitmapT.html#m0">m_hBitmap</a> = NULL;
00443         <font class="keywordflow">return</font> hBitmap;
00444     }
00445 
<a name="l00446"></a><a class="code" href="classWTL_1_1CBitmapT.html#a5">00446</a>     <a class="code" href="classWTL_1_1CBitmapT.html#a5">operator HBITMAP</a>()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> <a class="code" href="classWTL_1_1CBitmapT.html#m0">m_hBitmap</a>; }
00447 
<a name="l00448"></a><a class="code" href="classWTL_1_1CBitmapT.html#a6">00448</a>     <font class="keywordtype">bool</font> <a class="code" href="classWTL_1_1CBitmapT.html#a6">IsNull</a>()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> (<a class="code" href="classWTL_1_1CBitmapT.html#m0">m_hBitmap</a> == NULL); }
00449 
00450 <font class="comment">// Create and load methods</font>
<a name="l00451"></a><a class="code" href="classWTL_1_1CBitmapT.html#a7">00451</a>     HBITMAP <a class="code" href="classWTL_1_1CBitmapT.html#a7">LoadBitmap</a>(<a class="code" href="classWTL_1_1__U__STRINGorID.html">_U_STRINGorID</a> bitmap)
00452     {
00453         ATLASSERT(<a class="code" href="classWTL_1_1CBitmapT.html#m0">m_hBitmap</a> == NULL);
00454         <a class="code" href="classWTL_1_1CBitmapT.html#m0">m_hBitmap</a> = ::LoadBitmap(_Module.GetResourceInstance(), bitmap.<a class="code" href="classWTL_1_1__U__STRINGorID.html#m0">m_lpstr</a>);
00455         <font class="keywordflow">return</font> <a class="code" href="classWTL_1_1CBitmapT.html#m0">m_hBitmap</a>;
00456     }
<a name="l00457"></a><a class="code" href="classWTL_1_1CBitmapT.html#a8">00457</a>     HBITMAP <a class="code" href="classWTL_1_1CBitmapT.html#a8">LoadOEMBitmap</a>(UINT nIDBitmap) <font class="comment">// for OBM_/OCR_/OIC_</font>
00458     {
00459         ATLASSERT(<a class="code" href="classWTL_1_1CBitmapT.html#m0">m_hBitmap</a> == NULL);
00460         <a class="code" href="classWTL_1_1CBitmapT.html#m0">m_hBitmap</a> = ::LoadBitmap(NULL, MAKEINTRESOURCE(nIDBitmap));
00461         <font class="keywordflow">return</font> <a class="code" href="classWTL_1_1CBitmapT.html#m0">m_hBitmap</a>;
00462     }
<a name="l00463"></a><a class="code" href="classWTL_1_1CBitmapT.html#a9">00463</a>     HBITMAP <a class="code" href="classWTL_1_1CBitmapT.html#a9">LoadMappedBitmap</a>(UINT nIDBitmap, UINT nFlags = 0, LPCOLORMAP lpColorMap = NULL, <font class="keywordtype">int</font> nMapSize = 0)
00464     {
00465         ATLASSERT(<a class="code" href="classWTL_1_1CBitmapT.html#m0">m_hBitmap</a> == NULL);
00466         <a class="code" href="classWTL_1_1CBitmapT.html#m0">m_hBitmap</a> = ::CreateMappedBitmap(_Module.GetResourceInstance(), nIDBitmap, (WORD)nFlags, lpColorMap, nMapSize);
00467         <font class="keywordflow">return</font> <a class="code" href="classWTL_1_1CBitmapT.html#m0">m_hBitmap</a>;
00468     }
<a name="l00469"></a><a class="code" href="classWTL_1_1CBitmapT.html#a10">00469</a>     HBITMAP <a class="code" href="classWTL_1_1CBitmapT.html#a10">CreateBitmap</a>(<font class="keywordtype">int</font> nWidth, <font class="keywordtype">int</font> nHeight, UINT nPlanes, UINT nBitcount, <font class="keyword">const</font> <font class="keywordtype">void</font>* lpBits)
00470     {
00471         ATLASSERT(<a class="code" href="classWTL_1_1CBitmapT.html#m0">m_hBitmap</a> == NULL);
00472         <a class="code" href="classWTL_1_1CBitmapT.html#m0">m_hBitmap</a> = ::CreateBitmap(nWidth, nHeight, nPlanes, nBitcount, lpBits);
00473         <font class="keywordflow">return</font> <a class="code" href="classWTL_1_1CBitmapT.html#m0">m_hBitmap</a>;
00474     }
<a name="l00475"></a><a class="code" href="classWTL_1_1CBitmapT.html#a11">00475</a>     HBITMAP <a class="code" href="classWTL_1_1CBitmapT.html#a11">CreateBitmapIndirect</a>(LPBITMAP lpBitmap)
00476     {
00477         ATLASSERT(<a class="code" href="classWTL_1_1CBitmapT.html#m0">m_hBitmap</a> == NULL);
00478         <a class="code" href="classWTL_1_1CBitmapT.html#m0">m_hBitmap</a> = ::CreateBitmapIndirect(lpBitmap);
00479         <font class="keywordflow">return</font> <a class="code" href="classWTL_1_1CBitmapT.html#m0">m_hBitmap</a>;
00480     }
<a name="l00481"></a><a class="code" href="classWTL_1_1CBitmapT.html#a12">00481</a>     HBITMAP <a class="code" href="classWTL_1_1CBitmapT.html#a12">CreateCompatibleBitmap</a>(HDC hDC, <font class="keywordtype">int</font> nWidth, <font class="keywordtype">int</font> nHeight)
00482     {
00483         ATLASSERT(<a class="code" href="classWTL_1_1CBitmapT.html#m0">m_hBitmap</a> == NULL);
00484         <a class="code" href="classWTL_1_1CBitmapT.html#m0">m_hBitmap</a> = ::CreateCompatibleBitmap(hDC, nWidth, nHeight);
00485         <font class="keywordflow">return</font> <a class="code" href="classWTL_1_1CBitmapT.html#m0">m_hBitmap</a>;
00486     }
<a name="l00487"></a><a class="code" href="classWTL_1_1CBitmapT.html#a13">00487</a>     HBITMAP <a class="code" href="classWTL_1_1CBitmapT.html#a13">CreateDiscardableBitmap</a>(HDC hDC, <font class="keywordtype">int</font> nWidth, <font class="keywordtype">int</font> nHeight)
00488     {
00489         ATLASSERT(<a class="code" href="classWTL_1_1CBitmapT.html#m0">m_hBitmap</a> == NULL);
00490         <a class="code" href="classWTL_1_1CBitmapT.html#m0">m_hBitmap</a> = ::CreateDiscardableBitmap(hDC, nWidth, nHeight);
00491         <font class="keywordflow">return</font> <a class="code" href="classWTL_1_1CBitmapT.html#m0">m_hBitmap</a>;
00492     }
00493 
<a name="l00494"></a><a class="code" href="classWTL_1_1CBitmapT.html#a14">00494</a>     BOOL <a class="code" href="classWTL_1_1CBitmapT.html#a14">DeleteObject</a>()
00495     {
00496         ATLASSERT(<a class="code" href="classWTL_1_1CBitmapT.html#m0">m_hBitmap</a> != NULL);
00497         BOOL bRet = ::DeleteObject(m_hBitmap);
00498         <font class="keywordflow">if</font>(bRet)
00499             <a class="code" href="classWTL_1_1CBitmapT.html#m0">m_hBitmap</a> = NULL;
00500         <font class="keywordflow">return</font> bRet;
00501     }
00502 
00503 <font class="comment">// Attributes</font>
<a name="l00504"></a><a class="code" href="classWTL_1_1CBitmapT.html#a15">00504</a>     <font class="keywordtype">int</font> <a class="code" href="classWTL_1_1CBitmapT.html#a15">GetBitmap</a>(BITMAP* pBitMap)<font class="keyword"> const</font>
00505 <font class="keyword">    </font>{
00506         ATLASSERT(<a class="code" href="classWTL_1_1CBitmapT.html#m0">m_hBitmap</a> != NULL);
00507         return ::GetObject(<a class="code" href="classWTL_1_1CBitmapT.html#m0">m_hBitmap</a>, <font class="keyword">sizeof</font>(BITMAP), pBitMap);
00508     }
<a name="l00509"></a><a class="code" href="classWTL_1_1CBitmapT.html#a16">00509</a>     <font class="keywordtype">bool</font> <a class="code" href="classWTL_1_1CBitmapT.html#a15">GetBitmap</a>(BITMAP&amp; bm)<font class="keyword"> const</font>
00510 <font class="keyword">    </font>{
00511         ATLASSERT(<a class="code" href="classWTL_1_1CBitmapT.html#m0">m_hBitmap</a> != NULL);
00512         <font class="keywordflow">return</font> (::GetObject(<a class="code" href="classWTL_1_1CBitmapT.html#m0">m_hBitmap</a>, <font class="keyword">sizeof</font>(BITMAP), &amp;bm) == <font class="keyword">sizeof</font>(BITMAP));
00513     }
<a name="l00514"></a><a class="code" href="classWTL_1_1CBitmapT.html#a17">00514</a>     <font class="keywordtype">bool</font> <a class="code" href="classWTL_1_1CBitmapT.html#a17">GetSize</a>(SIZE&amp; size)<font class="keyword"> const</font>
00515 <font class="keyword">    </font>{
00516         ATLASSERT(<a class="code" href="classWTL_1_1CBitmapT.html#m0">m_hBitmap</a> != NULL);
00517         BITMAP bm;
00518         <font class="keywordflow">if</font>(!<a class="code" href="classWTL_1_1CBitmapT.html#a15">GetBitmap</a>(&amp;bm))
00519             <font class="keywordflow">return</font> <font class="keyword">false</font>;
00520         size.cx = bm.bmWidth;
00521         size.cy = bm.bmHeight;
00522         <font class="keywordflow">return</font> <font class="keyword">true</font>;
00523     }
00524 
<a name="l00525"></a><a class="code" href="classWTL_1_1CBitmapT.html#a18">00525</a>     DWORD <a class="code" href="classWTL_1_1CBitmapT.html#a18">GetBitmapBits</a>(DWORD dwCount, LPVOID lpBits)<font class="keyword"> const</font>
00526 <font class="keyword">    </font>{
00527         ATLASSERT(<a class="code" href="classWTL_1_1CBitmapT.html#m0">m_hBitmap</a> != NULL);
00528         return ::GetBitmapBits(<a class="code" href="classWTL_1_1CBitmapT.html#m0">m_hBitmap</a>, dwCount, lpBits);
00529     }
<a name="l00530"></a><a class="code" href="classWTL_1_1CBitmapT.html#a19">00530</a>     DWORD <a class="code" href="classWTL_1_1CBitmapT.html#a19">SetBitmapBits</a>(DWORD dwCount, <font class="keyword">const</font> <font class="keywordtype">void</font>* lpBits)
00531     {
00532         ATLASSERT(<a class="code" href="classWTL_1_1CBitmapT.html#m0">m_hBitmap</a> != NULL);
00533         return ::SetBitmapBits(<a class="code" href="classWTL_1_1CBitmapT.html#m0">m_hBitmap</a>, dwCount, lpBits);
00534     }
<a name="l00535"></a><a class="code" href="classWTL_1_1CBitmapT.html#a20">00535</a>     BOOL <a class="code" href="classWTL_1_1CBitmapT.html#a20">GetBitmapDimension</a>(LPSIZE lpSize)<font class="keyword"> const</font>
00536 <font class="keyword">    </font>{
00537         ATLASSERT(<a class="code" href="classWTL_1_1CBitmapT.html#m0">m_hBitmap</a> != NULL);
00538         return ::GetBitmapDimensionEx(<a class="code" href="classWTL_1_1CBitmapT.html#m0">m_hBitmap</a>, lpSize);
00539     }
<a name="l00540"></a><a class="code" href="classWTL_1_1CBitmapT.html#a21">00540</a>     BOOL <a class="code" href="classWTL_1_1CBitmapT.html#a21">SetBitmapDimension</a>(<font class="keywordtype">int</font> nWidth, <font class="keywordtype">int</font> nHeight, LPSIZE lpSize = NULL)
00541     {
00542         ATLASSERT(<a class="code" href="classWTL_1_1CBitmapT.html#m0">m_hBitmap</a> != NULL);
00543         return ::SetBitmapDimensionEx(<a class="code" href="classWTL_1_1CBitmapT.html#m0">m_hBitmap</a>, nWidth, nHeight, lpSize);
00544     }
00545 
00546 <font class="comment">// DIB support</font>
<a name="l00547"></a><a class="code" href="classWTL_1_1CBitmapT.html#a22">00547</a>     HBITMAP <a class="code" href="classWTL_1_1CBitmapT.html#a22">CreateDIBitmap</a>(HDC hDC, CONST BITMAPINFOHEADER* lpbmih, DWORD dwInit, CONST VOID* lpbInit, CONST BITMAPINFO* lpbmi, UINT uColorUse)
00548     {
00549         ATLASSERT(<a class="code" href="classWTL_1_1CBitmapT.html#m0">m_hBitmap</a> == NULL);
00550         <a class="code" href="classWTL_1_1CBitmapT.html#m0">m_hBitmap</a> = ::CreateDIBitmap(hDC, lpbmih, dwInit, lpbInit, lpbmi, uColorUse);
00551         <font class="keywordflow">return</font> <a class="code" href="classWTL_1_1CBitmapT.html#m0">m_hBitmap</a>;
00552     }
<a name="l00553"></a><a class="code" href="classWTL_1_1CBitmapT.html#a23">00553</a>     HBITMAP <a class="code" href="classWTL_1_1CBitmapT.html#a23">CreateDIBSection</a>(HDC hDC, CONST BITMAPINFO* lpbmi, UINT uColorUse, VOID** ppvBits, HANDLE hSection, DWORD dwOffset)
00554     {
00555         ATLASSERT(<a class="code" href="classWTL_1_1CBitmapT.html#m0">m_hBitmap</a> == NULL);
00556         <a class="code" href="classWTL_1_1CBitmapT.html#m0">m_hBitmap</a> = ::CreateDIBSection(hDC, lpbmi, uColorUse, ppvBits, hSection, dwOffset);
00557         <font class="keywordflow">return</font> <a class="code" href="classWTL_1_1CBitmapT.html#m0">m_hBitmap</a>;
00558     }
<a name="l00559"></a><a class="code" href="classWTL_1_1CBitmapT.html#a24">00559</a>     <font class="keywordtype">int</font> <a class="code" href="classWTL_1_1CBitmapT.html#a24">GetDIBits</a>(HDC hDC, UINT uStartScan, UINT cScanLines,  LPVOID lpvBits, LPBITMAPINFO lpbmi, UINT uColorUse)<font class="keyword"> const</font>
00560 <font class="keyword">    </font>{
00561         ATLASSERT(<a class="code" href="classWTL_1_1CBitmapT.html#m0">m_hBitmap</a> != NULL);
00562         return ::GetDIBits(hDC, <a class="code" href="classWTL_1_1CBitmapT.html#m0">m_hBitmap</a>, uStartScan, cScanLines,  lpvBits, lpbmi, uColorUse);
00563     }
<a name="l00564"></a><a class="code" href="classWTL_1_1CBitmapT.html#a25">00564</a>     <font class="keywordtype">int</font> <a class="code" href="classWTL_1_1CBitmapT.html#a25">SetDIBits</a>(HDC hDC, UINT uStartScan, UINT cScanLines, CONST VOID* lpvBits, CONST BITMAPINFO* lpbmi, UINT uColorUse)
00565     {
00566         ATLASSERT(<a class="code" href="classWTL_1_1CBitmapT.html#m0">m_hBitmap</a> != NULL);
00567         return ::SetDIBits(hDC, <a class="code" href="classWTL_1_1CBitmapT.html#m0">m_hBitmap</a>, uStartScan, cScanLines, lpvBits, lpbmi, uColorUse);
00568     }
00569 };
00570 
<a name="l00571"></a><a class="code" href="namespaceWTL.html#a41">00571</a> <font class="keyword">typedef</font> <a class="code" href="classWTL_1_1CBitmapT.html">CBitmapT&lt;false&gt;</a>     <a class="code" href="namespaceWTL.html#a41">CBitmapHandle</a>;
<a name="l00572"></a><a class="code" href="namespaceWTL.html#a42">00572</a> <font class="keyword">typedef</font> <a class="code" href="classWTL_1_1CBitmapT.html">CBitmapT&lt;true&gt;</a>      <a class="code" href="namespaceWTL.html#a42">CBitmap</a>;
00573 
00574 
00576 <font class="comment">// CPalette</font>
00577 
00578 <font class="keyword">template</font> &lt;<font class="keywordtype">bool</font> t_bManaged&gt;
<a name="l00579"></a><a class="code" href="classWTL_1_1CPaletteT.html">00579</a> <font class="keyword">class </font><a class="code" href="classWTL_1_1CPaletteT.html">CPaletteT</a>
00580 {
00581 <font class="keyword">public</font>:
00582 <font class="comment">// Data members</font>
00583     HPALETTE <a class="code" href="classWTL_1_1CPaletteT.html#m0">m_hPalette</a>;
00584 
00585 <font class="comment">// Constructor/destructor/operators</font>
<a name="l00586"></a><a class="code" href="classWTL_1_1CPaletteT.html#a0">00586</a>     <a class="code" href="classWTL_1_1CPaletteT.html#a0">CPaletteT</a>(HPALETTE hPalette = NULL) : <a class="code" href="classWTL_1_1CPaletteT.html#m0">m_hPalette</a>(hPalette)
00587     { }
00588 
<a name="l00589"></a><a class="code" href="classWTL_1_1CPaletteT.html#a1">00589</a>     <a class="code" href="classWTL_1_1CPaletteT.html#a1">~CPaletteT</a>()
00590     {
00591         <font class="keywordflow">if</font>(t_bManaged &amp;&amp; <a class="code" href="classWTL_1_1CPaletteT.html#m0">m_hPalette</a> != NULL)
00592             <a class="code" href="classWTL_1_1CPaletteT.html#a9">DeleteObject</a>();
00593     }
00594 
<a name="l00595"></a><a class="code" href="classWTL_1_1CPaletteT.html#a2">00595</a>     <a class="code" href="classWTL_1_1CPaletteT.html">CPaletteT&lt;t_bManaged&gt;</a>&amp; <a class="code" href="classWTL_1_1CPaletteT.html#a2">operator=</a>(HPALETTE hPalette)
00596     {
00597         <a class="code" href="classWTL_1_1CPaletteT.html#m0">m_hPalette</a> = hPalette;
00598         <font class="keywordflow">return</font> *<font class="keyword">this</font>;
00599     }
00600 
<a name="l00601"></a><a class="code" href="classWTL_1_1CPaletteT.html#a3">00601</a>     <font class="keywordtype">void</font> <a class="code" href="classWTL_1_1CPaletteT.html#a3">Attach</a>(HPALETTE hPalette)
00602     {
00603         <font class="keywordflow">if</font>(t_bManaged &amp;&amp; <a class="code" href="classWTL_1_1CPaletteT.html#m0">m_hPalette</a> != NULL)
00604             ::DeleteObject(m_hPalette);
00605         <a class="code" href="classWTL_1_1CPaletteT.html#m0">m_hPalette</a> = hPalette;
00606     }
<a name="l00607"></a><a class="code" href="classWTL_1_1CPaletteT.html#a4">00607</a>     HPALETTE <a class="code" href="classWTL_1_1CPaletteT.html#a4">Detach</a>()
00608     {
00609         HPALETTE hPalette = <a class="code" href="classWTL_1_1CPaletteT.html#m0">m_hPalette</a>;
00610         <a class="code" href="classWTL_1_1CPaletteT.html#m0">m_hPalette</a> = NULL;
00611         <font class="keywordflow">return</font> hPalette;
00612     }
00613 
<a name="l00614"></a><a class="code" href="classWTL_1_1CPaletteT.html#a5">00614</a>     <a class="code" href="classWTL_1_1CPaletteT.html#a5">operator HPALETTE</a>()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> <a class="code" href="classWTL_1_1CPaletteT.html#m0">m_hPalette</a>; }
00615 
<a name="l00616"></a><a class="code" href="classWTL_1_1CPaletteT.html#a6">00616</a>     <font class="keywordtype">bool</font> <a class="code" href="classWTL_1_1CPaletteT.html#a6">IsNull</a>()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> (<a class="code" href="classWTL_1_1CPaletteT.html#m0">m_hPalette</a> == NULL); }
00617 
00618 <font class="comment">// Create methods</font>
<a name="l00619"></a><a class="code" href="classWTL_1_1CPaletteT.html#a7">00619</a>     HPALETTE <a class="code" href="classWTL_1_1CPaletteT.html#a7">CreatePalette</a>(LPLOGPALETTE lpLogPalette)
00620     {
00621         ATLASSERT(<a class="code" href="classWTL_1_1CPaletteT.html#m0">m_hPalette</a> == NULL);
00622         <a class="code" href="classWTL_1_1CPaletteT.html#m0">m_hPalette</a> = ::CreatePalette(lpLogPalette);
00623         <font class="keywordflow">return</font> <a class="code" href="classWTL_1_1CPaletteT.html#m0">m_hPalette</a>;
00624     }
<a name="l00625"></a><a class="code" href="classWTL_1_1CPaletteT.html#a8">00625</a>     HPALETTE <a class="code" href="classWTL_1_1CPaletteT.html#a8">CreateHalftonePalette</a>(HDC hDC)
00626     {
00627         ATLASSERT(<a class="code" href="classWTL_1_1CPaletteT.html#m0">m_hPalette</a> == NULL);
00628         ATLASSERT(hDC != NULL);
00629         <a class="code" href="classWTL_1_1CPaletteT.html#m0">m_hPalette</a> = ::CreateHalftonePalette(hDC);
00630         <font class="keywordflow">return</font> <a class="code" href="classWTL_1_1CPaletteT.html#m0">m_hPalette</a>;
00631     }
00632 
<a name="l00633"></a><a class="code" href="classWTL_1_1CPaletteT.html#a9">00633</a>     BOOL <a class="code" href="classWTL_1_1CPaletteT.html#a9">DeleteObject</a>()
00634     {
00635         ATLASSERT(<a class="code" href="classWTL_1_1CPaletteT.html#m0">m_hPalette</a> != NULL);
00636         BOOL bRet = ::DeleteObject(m_hPalette);
00637         <font class="keywordflow">if</font>(bRet)
00638             <a class="code" href="classWTL_1_1CPaletteT.html#m0">m_hPalette</a> = NULL;
00639         <font class="keywordflow">return</font> bRet;
00640     }
00641 
00642 <font class="comment">// Attributes</font>
<a name="l00643"></a><a class="code" href="classWTL_1_1CPaletteT.html#a10">00643</a>     <font class="keywordtype">int</font> <a class="code" href="classWTL_1_1CPaletteT.html#a10">GetEntryCount</a>()<font class="keyword"> const</font>
00644 <font class="keyword">    </font>{
00645         ATLASSERT(<a class="code" href="classWTL_1_1CPaletteT.html#m0">m_hPalette</a> != NULL);
00646         WORD nEntries;
00647         ::GetObject(<a class="code" href="classWTL_1_1CPaletteT.html#m0">m_hPalette</a>, <font class="keyword">sizeof</font>(WORD), &amp;nEntries);
00648         <font class="keywordflow">return</font> (int)nEntries;
00649     }
<a name="l00650"></a><a class="code" href="classWTL_1_1CPaletteT.html#a11">00650</a>     UINT <a class="code" href="classWTL_1_1CPaletteT.html#a11">GetPaletteEntries</a>(UINT nStartIndex, UINT nNumEntries, LPPALETTEENTRY lpPaletteColors)<font class="keyword"> const</font>
00651 <font class="keyword">    </font>{
00652         ATLASSERT(<a class="code" href="classWTL_1_1CPaletteT.html#m0">m_hPalette</a> != NULL);
00653         return ::GetPaletteEntries(<a class="code" href="classWTL_1_1CPaletteT.html#m0">m_hPalette</a>, nStartIndex, nNumEntries, lpPaletteColors);
00654     }
<a name="l00655"></a><a class="code" href="classWTL_1_1CPaletteT.html#a12">00655</a>     UINT <a class="code" href="classWTL_1_1CPaletteT.html#a12">SetPaletteEntries</a>(UINT nStartIndex, UINT nNumEntries, LPPALETTEENTRY lpPaletteColors)
00656     {
00657         ATLASSERT(<a class="code" href="classWTL_1_1CPaletteT.html#m0">m_hPalette</a> != NULL);
00658         return ::SetPaletteEntries(<a class="code" href="classWTL_1_1CPaletteT.html#m0">m_hPalette</a>, nStartIndex, nNumEntries, lpPaletteColors);
00659     }
00660 
00661 <font class="comment">// Operations</font>
<a name="l00662"></a><a class="code" href="classWTL_1_1CPaletteT.html#a13">00662</a>     <font class="keywordtype">void</font> <a class="code" href="classWTL_1_1CPaletteT.html#a13">AnimatePalette</a>(UINT nStartIndex, UINT nNumEntries, LPPALETTEENTRY lpPaletteColors)
00663     {
00664         ATLASSERT(<a class="code" href="classWTL_1_1CPaletteT.html#m0">m_hPalette</a> != NULL);
00665         ::AnimatePalette(<a class="code" href="classWTL_1_1CPaletteT.html#m0">m_hPalette</a>, nStartIndex, nNumEntries, lpPaletteColors);
00666     }
<a name="l00667"></a><a class="code" href="classWTL_1_1CPaletteT.html#a14">00667</a>     BOOL <a class="code" href="classWTL_1_1CPaletteT.html#a14">ResizePalette</a>(UINT nNumEntries)
00668     {
00669         ATLASSERT(<a class="code" href="classWTL_1_1CPaletteT.html#m0">m_hPalette</a> != NULL);
00670         return ::ResizePalette(<a class="code" href="classWTL_1_1CPaletteT.html#m0">m_hPalette</a>, nNumEntries);
00671     }
<a name="l00672"></a><a class="code" href="classWTL_1_1CPaletteT.html#a15">00672</a>     UINT <a class="code" href="classWTL_1_1CPaletteT.html#a15">GetNearestPaletteIndex</a>(COLORREF crColor)<font class="keyword"> const</font>
00673 <font class="keyword">    </font>{
00674         ATLASSERT(<a class="code" href="classWTL_1_1CPaletteT.html#m0">m_hPalette</a> != NULL);
00675         return ::GetNearestPaletteIndex(<a class="code" href="classWTL_1_1CPaletteT.html#m0">m_hPalette</a>, crColor);
00676     }
00677 };
00678 
<a name="l00679"></a><a class="code" href="namespaceWTL.html#a43">00679</a> <font class="keyword">typedef</font> <a class="code" href="classWTL_1_1CPaletteT.html">CPaletteT&lt;false&gt;</a>    <a class="code" href="namespaceWTL.html#a43">CPaletteHandle</a>;
<a name="l00680"></a><a class="code" href="namespaceWTL.html#a44">00680</a> <font class="keyword">typedef</font> <a class="code" href="classWTL_1_1CPaletteT.html">CPaletteT&lt;true&gt;</a>     <a class="code" href="namespaceWTL.html#a44">CPalette</a>;
00681 
00682 
00684 <font class="comment">// CRgn</font>
00685 
00686 <font class="keyword">template</font> &lt;<font class="keywordtype">bool</font> t_bManaged&gt;
<a name="l00687"></a><a class="code" href="classWTL_1_1CRgnT.html">00687</a> <font class="keyword">class </font><a class="code" href="classWTL_1_1CRgnT.html">CRgnT</a>
00688 {
00689 <font class="keyword">public</font>:
00690 <font class="comment">// Data members</font>
00691     HRGN <a class="code" href="classWTL_1_1CRgnT.html#m0">m_hRgn</a>;
00692 
00693 <font class="comment">// Constructor/destructor/operators</font>
<a name="l00694"></a><a class="code" href="classWTL_1_1CRgnT.html#a0">00694</a>     <a class="code" href="classWTL_1_1CRgnT.html#a0">CRgnT</a>(HRGN hRgn = NULL) : <a class="code" href="classWTL_1_1CRgnT.html#m0">m_hRgn</a>(hRgn)
00695     { }
00696 
<a name="l00697"></a><a class="code" href="classWTL_1_1CRgnT.html#a1">00697</a>     <a class="code" href="classWTL_1_1CRgnT.html#a1">~CRgnT</a>()
00698     {
00699         <font class="keywordflow">if</font>(t_bManaged &amp;&amp; <a class="code" href="classWTL_1_1CRgnT.html#m0">m_hRgn</a> != NULL)
00700             <a class="code" href="classWTL_1_1CRgnT.html#a16">DeleteObject</a>();
00701     }
00702 
<a name="l00703"></a><a class="code" href="classWTL_1_1CRgnT.html#a2">00703</a>     <a class="code" href="classWTL_1_1CRgnT.html">CRgnT&lt;t_bManaged&gt;</a>&amp; <a class="code" href="classWTL_1_1CRgnT.html#a2">operator=</a>(HRGN hRgn)
00704     {
00705         <a class="code" href="classWTL_1_1CRgnT.html#m0">m_hRgn</a> = hRgn;
00706         <font class="keywordflow">return</font> *<font class="keyword">this</font>;
00707     }
00708 
<a name="l00709"></a><a class="code" href="classWTL_1_1CRgnT.html#a3">00709</a>     <font class="keywordtype">void</font> <a class="code" href="classWTL_1_1CRgnT.html#a3">Attach</a>(HRGN hRgn)
00710     {
00711         <font class="keywordflow">if</font>(t_bManaged &amp;&amp; <a class="code" href="classWTL_1_1CRgnT.html#m0">m_hRgn</a> != NULL)
00712             ::DeleteObject(m_hRgn);
00713         <a class="code" href="classWTL_1_1CRgnT.html#m0">m_hRgn</a> = hRgn;
00714     }
<a name="l00715"></a><a class="code" href="classWTL_1_1CRgnT.html#a4">00715</a>     HRGN <a class="code" href="classWTL_1_1CRgnT.html#a4">Detach</a>()
00716     {
00717         HRGN hRgn = <a class="code" href="classWTL_1_1CRgnT.html#m0">m_hRgn</a>;
00718         <a class="code" href="classWTL_1_1CRgnT.html#m0">m_hRgn</a> = NULL;
00719         <font class="keywordflow">return</font> hRgn;
00720     }
00721 
<a name="l00722"></a><a class="code" href="classWTL_1_1CRgnT.html#a5">00722</a>     <a class="code" href="classWTL_1_1CRgnT.html#a5">operator HRGN</a>()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> <a class="code" href="classWTL_1_1CRgnT.html#m0">m_hRgn</a>; }
00723 
<a name="l00724"></a><a class="code" href="classWTL_1_1CRgnT.html#a6">00724</a>     <font class="keywordtype">bool</font> <a class="code" href="classWTL_1_1CRgnT.html#a6">IsNull</a>()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> (<a class="code" href="classWTL_1_1CRgnT.html#m0">m_hRgn</a> == NULL); }
00725 
00726 <font class="comment">// Create methods</font>
<a name="l00727"></a><a class="code" href="classWTL_1_1CRgnT.html#a7">00727</a>     HRGN <a class="code" href="classWTL_1_1CRgnT.html#a7">CreateRectRgn</a>(<font class="keywordtype">int</font> x1, <font class="keywordtype">int</font> y1, <font class="keywordtype">int</font> x2, <font class="keywordtype">int</font> y2)
00728     {
00729         ATLASSERT(<a class="code" href="classWTL_1_1CRgnT.html#m0">m_hRgn</a> == NULL);
00730         <a class="code" href="classWTL_1_1CRgnT.html#m0">m_hRgn</a> = ::CreateRectRgn(x1, y1, x2, y2);
00731         <font class="keywordflow">return</font> <a class="code" href="classWTL_1_1CRgnT.html#m0">m_hRgn</a>;
00732     }
<a name="l00733"></a><a class="code" href="classWTL_1_1CRgnT.html#a8">00733</a>     HRGN <a class="code" href="classWTL_1_1CRgnT.html#a8">CreateRectRgnIndirect</a>(LPCRECT lpRect)
00734     {
00735         ATLASSERT(<a class="code" href="classWTL_1_1CRgnT.html#m0">m_hRgn</a> == NULL);
00736         <a class="code" href="classWTL_1_1CRgnT.html#m0">m_hRgn</a> = ::CreateRectRgnIndirect(lpRect);
00737         <font class="keywordflow">return</font> <a class="code" href="classWTL_1_1CRgnT.html#m0">m_hRgn</a>;
00738     }
<a name="l00739"></a><a class="code" href="classWTL_1_1CRgnT.html#a9">00739</a>     HRGN <a class="code" href="classWTL_1_1CRgnT.html#a9">CreateEllipticRgn</a>(<font class="keywordtype">int</font> x1, <font class="keywordtype">int</font> y1, <font class="keywordtype">int</font> x2, <font class="keywordtype">int</font> y2)
00740     {
00741         ATLASSERT(<a class="code" href="classWTL_1_1CRgnT.html#m0">m_hRgn</a> == NULL);
00742         <a class="code" href="classWTL_1_1CRgnT.html#m0">m_hRgn</a> = ::CreateEllipticRgn(x1, y1, x2, y2);
00743         <font class="keywordflow">return</font> <a class="code" href="classWTL_1_1CRgnT.html#m0">m_hRgn</a>;
00744     }
<a name="l00745"></a><a class="code" href="classWTL_1_1CRgnT.html#a10">00745</a>     HRGN <a class="code" href="classWTL_1_1CRgnT.html#a10">CreateEllipticRgnIndirect</a>(LPCRECT lpRect)
00746     {
00747         ATLASSERT(<a class="code" href="classWTL_1_1CRgnT.html#m0">m_hRgn</a> == NULL);
00748         <a class="code" href="classWTL_1_1CRgnT.html#m0">m_hRgn</a> = ::CreateEllipticRgnIndirect(lpRect);
00749         <font class="keywordflow">return</font> <a class="code" href="classWTL_1_1CRgnT.html#m0">m_hRgn</a>;
00750     }
<a name="l00751"></a><a class="code" href="classWTL_1_1CRgnT.html#a11">00751</a>     HRGN <a class="code" href="classWTL_1_1CRgnT.html#a11">CreatePolygonRgn</a>(LPPOINT lpPoints, <font class="keywordtype">int</font> nCount, <font class="keywordtype">int</font> nMode)
00752     {
00753         ATLASSERT(<a class="code" href="classWTL_1_1CRgnT.html#m0">m_hRgn</a> == NULL);
00754         <a class="code" href="classWTL_1_1CRgnT.html#m0">m_hRgn</a> = ::CreatePolygonRgn(lpPoints, nCount, nMode);
00755         <font class="keywordflow">return</font> <a class="code" href="classWTL_1_1CRgnT.html#m0">m_hRgn</a>;
00756     }
<a name="l00757"></a><a class="code" href="classWTL_1_1CRgnT.html#a12">00757</a>     HRGN <a class="code" href="classWTL_1_1CRgnT.html#a12">CreatePolyPolygonRgn</a>(LPPOINT lpPoints, LPINT lpPolyCounts, <font class="keywordtype">int</font> nCount, <font class="keywordtype">int</font> nPolyFillMode)
00758     {
00759         ATLASSERT(<a class="code" href="classWTL_1_1CRgnT.html#m0">m_hRgn</a> == NULL);
00760         <a class="code" href="classWTL_1_1CRgnT.html#m0">m_hRgn</a> = ::CreatePolyPolygonRgn(lpPoints, lpPolyCounts, nCount, nPolyFillMode);
00761         <font class="keywordflow">return</font> <a class="code" href="classWTL_1_1CRgnT.html#m0">m_hRgn</a>;
00762     }
<a name="l00763"></a><a class="code" href="classWTL_1_1CRgnT.html#a13">00763</a>     HRGN <a class="code" href="classWTL_1_1CRgnT.html#a13">CreateRoundRectRgn</a>(<font class="keywordtype">int</font> x1, <font class="keywordtype">int</font> y1, <font class="keywordtype">int</font> x2, <font class="keywordtype">int</font> y2, <font class="keywordtype">int</font> x3, <font class="keywordtype">int</font> y3)
00764     {
00765         ATLASSERT(<a class="code" href="classWTL_1_1CRgnT.html#m0">m_hRgn</a> == NULL);
00766         <a class="code" href="classWTL_1_1CRgnT.html#m0">m_hRgn</a> = ::CreateRoundRectRgn(x1, y1, x2, y2, x3, y3);
00767         <font class="keywordflow">return</font> <a class="code" href="classWTL_1_1CRgnT.html#m0">m_hRgn</a>;
00768     }
<a name="l00769"></a><a class="code" href="classWTL_1_1CRgnT.html#a14">00769</a>     HRGN <a class="code" href="classWTL_1_1CRgnT.html#a14">CreateFromPath</a>(HDC hDC)
00770     {
00771         ATLASSERT(<a class="code" href="classWTL_1_1CRgnT.html#m0">m_hRgn</a> == NULL);
00772         ATLASSERT(hDC != NULL);
00773         <a class="code" href="classWTL_1_1CRgnT.html#m0">m_hRgn</a> = ::PathToRegion(hDC);
00774         <font class="keywordflow">return</font> <a class="code" href="classWTL_1_1CRgnT.html#m0">m_hRgn</a>;
00775     }
<a name="l00776"></a><a class="code" href="classWTL_1_1CRgnT.html#a15">00776</a>     HRGN <a class="code" href="classWTL_1_1CRgnT.html#a15">CreateFromData</a>(<font class="keyword">const</font> XFORM* lpXForm, <font class="keywordtype">int</font> nCount, <font class="keyword">const</font> RGNDATA* pRgnData)
00777     {
00778         ATLASSERT(<a class="code" href="classWTL_1_1CRgnT.html#m0">m_hRgn</a> == NULL);
00779         <a class="code" href="classWTL_1_1CRgnT.html#m0">m_hRgn</a> = ::ExtCreateRegion(lpXForm, nCount, pRgnData);
00780         <font class="keywordflow">return</font> <a class="code" href="classWTL_1_1CRgnT.html#m0">m_hRgn</a>;
00781     }
00782 
<a name="l00783"></a><a class="code" href="classWTL_1_1CRgnT.html#a16">00783</a>     BOOL <a class="code" href="classWTL_1_1CRgnT.html#a16">DeleteObject</a>()
00784     {
00785         ATLASSERT(<a class="code" href="classWTL_1_1CRgnT.html#m0">m_hRgn</a> != NULL);
00786         BOOL bRet = ::DeleteObject(m_hRgn);
00787         <font class="keywordflow">if</font>(bRet)
00788             <a class="code" href="classWTL_1_1CRgnT.html#m0">m_hRgn</a> = NULL;
00789         <font class="keywordflow">return</font> bRet;
00790     }
00791 
00792 <font class="comment">// Operations</font>
<a name="l00793"></a><a class="code" href="classWTL_1_1CRgnT.html#a17">00793</a>     <font class="keywordtype">void</font> <a class="code" href="classWTL_1_1CRgnT.html#a17">SetRectRgn</a>(<font class="keywordtype">int</font> x1, <font class="keywordtype">int</font> y1, <font class="keywordtype">int</font> x2, <font class="keywordtype">int</font> y2)
00794     {
00795         ATLASSERT(<a class="code" href="classWTL_1_1CRgnT.html#m0">m_hRgn</a> != NULL);
00796         ::SetRectRgn(<a class="code" href="classWTL_1_1CRgnT.html#m0">m_hRgn</a>, x1, y1, x2, y2);
00797     }
<a name="l00798"></a><a class="code" href="classWTL_1_1CRgnT.html#a18">00798</a>     <font class="keywordtype">void</font> <a class="code" href="classWTL_1_1CRgnT.html#a17">SetRectRgn</a>(LPCRECT lpRect)
00799     {
00800         ATLASSERT(<a class="code" href="classWTL_1_1CRgnT.html#m0">m_hRgn</a> != NULL);
00801         ::SetRectRgn(<a class="code" href="classWTL_1_1CRgnT.html#m0">m_hRgn</a>, lpRect-&gt;left, lpRect-&gt;top, lpRect-&gt;right, lpRect-&gt;bottom);
00802     }
<a name="l00803"></a><a class="code" href="classWTL_1_1CRgnT.html#a19">00803</a>     <font class="keywordtype">int</font> <a class="code" href="classWTL_1_1CRgnT.html#a19">CombineRgn</a>(HRGN hRgnSrc1, HRGN hRgnSrc2, <font class="keywordtype">int</font> nCombineMode)
00804     {
00805         ATLASSERT(<a class="code" href="classWTL_1_1CRgnT.html#m0">m_hRgn</a> != NULL);
00806         return ::CombineRgn(<a class="code" href="classWTL_1_1CRgnT.html#m0">m_hRgn</a>, hRgnSrc1, hRgnSrc2, nCombineMode);
00807     }
<a name="l00808"></a><a class="code" href="classWTL_1_1CRgnT.html#a20">00808</a>     <font class="keywordtype">int</font> <a class="code" href="classWTL_1_1CRgnT.html#a19">CombineRgn</a>(HRGN hRgnSrc, <font class="keywordtype">int</font> nCombineMode)
00809     {
00810         ATLASSERT(<a class="code" href="classWTL_1_1CRgnT.html#m0">m_hRgn</a> != NULL);
00811         return ::CombineRgn(<a class="code" href="classWTL_1_1CRgnT.html#m0">m_hRgn</a>, <a class="code" href="classWTL_1_1CRgnT.html#m0">m_hRgn</a>, hRgnSrc, nCombineMode);
00812     }
<a name="l00813"></a><a class="code" href="classWTL_1_1CRgnT.html#a21">00813</a>     <font class="keywordtype">int</font> <a class="code" href="classWTL_1_1CRgnT.html#a21">CopyRgn</a>(HRGN hRgnSrc)
00814     {
00815         ATLASSERT(<a class="code" href="classWTL_1_1CRgnT.html#m0">m_hRgn</a> != NULL);
00816         return ::CombineRgn(<a class="code" href="classWTL_1_1CRgnT.html#m0">m_hRgn</a>, hRgnSrc, NULL, RGN_COPY);
00817     }
<a name="l00818"></a><a class="code" href="classWTL_1_1CRgnT.html#a22">00818</a>     BOOL <a class="code" href="classWTL_1_1CRgnT.html#a22">EqualRgn</a>(HRGN hRgn)<font class="keyword"> const</font>
00819 <font class="keyword">    </font>{
00820         ATLASSERT(<a class="code" href="classWTL_1_1CRgnT.html#m0">m_hRgn</a> != NULL);
00821         return ::EqualRgn(<a class="code" href="classWTL_1_1CRgnT.html#m0">m_hRgn</a>, hRgn);
00822     }
<a name="l00823"></a><a class="code" href="classWTL_1_1CRgnT.html#a23">00823</a>     <font class="keywordtype">int</font> <a class="code" href="classWTL_1_1CRgnT.html#a23">OffsetRgn</a>(<font class="keywordtype">int</font> x, <font class="keywordtype">int</font> y)
00824     {
00825         ATLASSERT(<a class="code" href="classWTL_1_1CRgnT.html#m0">m_hRgn</a> != NULL);
00826         return ::OffsetRgn(<a class="code" href="classWTL_1_1CRgnT.html#m0">m_hRgn</a>, x, y);
00827     }
<a name="l00828"></a><a class="code" href="classWTL_1_1CRgnT.html#a24">00828</a>     <font class="keywordtype">int</font> <a class="code" href="classWTL_1_1CRgnT.html#a23">OffsetRgn</a>(POINT point)
00829     {
00830         ATLASSERT(<a class="code" href="classWTL_1_1CRgnT.html#m0">m_hRgn</a> != NULL);
00831         return ::OffsetRgn(<a class="code" href="classWTL_1_1CRgnT.html#m0">m_hRgn</a>, point.x, point.y);
00832     }
<a name="l00833"></a><a class="code" href="classWTL_1_1CRgnT.html#a25">00833</a>     <font class="keywordtype">int</font> <a class="code" href="classWTL_1_1CRgnT.html#a25">GetRgnBox</a>(LPRECT lpRect)<font class="keyword"> const</font>
00834 <font class="keyword">    </font>{
00835         ATLASSERT(<a class="code" href="classWTL_1_1CRgnT.html#m0">m_hRgn</a> != NULL);
00836         return ::GetRgnBox(<a class="code" href="classWTL_1_1CRgnT.html#m0">m_hRgn</a>, lpRect);
00837     }
<a name="l00838"></a><a class="code" href="classWTL_1_1CRgnT.html#a26">00838</a>     BOOL <a class="code" href="classWTL_1_1CRgnT.html#a26">PtInRegion</a>(<font class="keywordtype">int</font> x, <font class="keywordtype">int</font> y)<font class="keyword"> const</font>
00839 <font class="keyword">    </font>{
00840         ATLASSERT(<a class="code" href="classWTL_1_1CRgnT.html#m0">m_hRgn</a> != NULL);
00841         return ::PtInRegion(<a class="code" href="classWTL_1_1CRgnT.html#m0">m_hRgn</a>, x, y);
00842     }
<a name="l00843"></a><a class="code" href="classWTL_1_1CRgnT.html#a27">00843</a>     BOOL <a class="code" href="classWTL_1_1CRgnT.html#a26">PtInRegion</a>(POINT point)<font class="keyword"> const</font>
00844 <font class="keyword">    </font>{
00845         ATLASSERT(<a class="code" href="classWTL_1_1CRgnT.html#m0">m_hRgn</a> != NULL);
00846         return ::PtInRegion(<a class="code" href="classWTL_1_1CRgnT.html#m0">m_hRgn</a>, point.x, point.y);
00847     }
<a name="l00848"></a><a class="code" href="classWTL_1_1CRgnT.html#a28">00848</a>     BOOL <a class="code" href="classWTL_1_1CRgnT.html#a28">RectInRegion</a>(LPCRECT lpRect)<font class="keyword"> const</font>
00849 <font class="keyword">    </font>{
00850         ATLASSERT(<a class="code" href="classWTL_1_1CRgnT.html#m0">m_hRgn</a> != NULL);
00851         return ::RectInRegion(<a class="code" href="classWTL_1_1CRgnT.html#m0">m_hRgn</a>, lpRect);
00852     }
<a name="l00853"></a><a class="code" href="classWTL_1_1CRgnT.html#a29">00853</a>     <font class="keywordtype">int</font> <a class="code" href="classWTL_1_1CRgnT.html#a29">GetRegionData</a>(LPRGNDATA lpRgnData, <font class="keywordtype">int</font> nDataSize)<font class="keyword"> const</font>
00854 <font class="keyword">    </font>{
00855         ATLASSERT(<a class="code" href="classWTL_1_1CRgnT.html#m0">m_hRgn</a> != NULL);
00856         <font class="keywordflow">return</font> (int)::GetRegionData(<a class="code" href="classWTL_1_1CRgnT.html#m0">m_hRgn</a>, nDataSize, lpRgnData);
00857     }
00858 };
00859 
<a name="l00860"></a><a class="code" href="namespaceWTL.html#a45">00860</a> <font class="keyword">typedef</font> <a class="code" href="classWTL_1_1CRgnT.html">CRgnT&lt;false&gt;</a>        <a class="code" href="namespaceWTL.html#a45">CRgnHandle</a>;
<a name="l00861"></a><a class="code" href="namespaceWTL.html#a46">00861</a> <font class="keyword">typedef</font> <a class="code" href="classWTL_1_1CRgnT.html">CRgnT&lt;true&gt;</a>     <a class="code" href="namespaceWTL.html#a46">CRgn</a>;
00862 
00863 
00865 <font class="comment">// CDC - The device context class</font>
00866 
00867 <font class="keyword">template</font> &lt;<font class="keywordtype">bool</font> t_bManaged&gt;
<a name="l00868"></a><a class="code" href="classWTL_1_1CDCT.html">00868</a> <font class="keyword">class </font><a class="code" href="classWTL_1_1CDCT.html">CDCT</a>
00869 {
00870 <font class="keyword">public</font>:
00871 <font class="comment">// Data members</font>
<a name="l00872"></a><a class="code" href="classWTL_1_1CDCT.html#m0">00872</a>     HDC <a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>;
00873 
00874 <font class="comment">// Constructor/destructor/operators</font>
<a name="l00875"></a><a class="code" href="classWTL_1_1CDCT.html#a0">00875</a>     <a class="code" href="classWTL_1_1CDCT.html#a0">CDCT</a>(HDC hDC = NULL) : <a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>(hDC)
00876     {
00877     }
00878 
<a name="l00879"></a><a class="code" href="classWTL_1_1CDCT.html#a1">00879</a>     <a class="code" href="classWTL_1_1CDCT.html#a1">~CDCT</a>()
00880     {
00881         <font class="keywordflow">if</font>(t_bManaged &amp;&amp; <a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL)
00882             ::DeleteDC(<a class="code" href="classWTL_1_1CDCT.html#a4">Detach</a>());
00883     }
00884 
<a name="l00885"></a><a class="code" href="classWTL_1_1CDCT.html#a2">00885</a>     <a class="code" href="classWTL_1_1CDCT.html">CDCT&lt;t_bManaged&gt;</a>&amp; <a class="code" href="classWTL_1_1CDCT.html#a2">operator=</a>(HDC hDC)
00886     {
00887         <a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> = hDC;
00888         <font class="keywordflow">return</font> *<font class="keyword">this</font>;
00889     }
00890 
<a name="l00891"></a><a class="code" href="classWTL_1_1CDCT.html#a3">00891</a>     <font class="keywordtype">void</font> <a class="code" href="classWTL_1_1CDCT.html#a3">Attach</a>(HDC hDC)
00892     {
00893         <font class="keywordflow">if</font>(t_bManaged &amp;&amp; <a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL)
00894             ::DeleteDC(m_hDC);
00895         <a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> = hDC;
00896     }
00897 
<a name="l00898"></a><a class="code" href="classWTL_1_1CDCT.html#a4">00898</a>     HDC <a class="code" href="classWTL_1_1CDCT.html#a4">Detach</a>()
00899     {
00900         HDC hDC = <a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>;
00901         <a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> = NULL;
00902         <font class="keywordflow">return</font> hDC;
00903     }
00904 
<a name="l00905"></a><a class="code" href="classWTL_1_1CDCT.html#a5">00905</a>     <a class="code" href="classWTL_1_1CDCT.html#a5">operator HDC</a>()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> <a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>; }
00906 
<a name="l00907"></a><a class="code" href="classWTL_1_1CDCT.html#a6">00907</a>     <font class="keywordtype">bool</font> <a class="code" href="classWTL_1_1CDCT.html#a6">IsNull</a>()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> (<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> == NULL); }
00908 
00909 <font class="comment">// Operations</font>
<a name="l00910"></a><a class="code" href="classWTL_1_1CDCT.html#a7">00910</a>     HWND <a class="code" href="classWTL_1_1CDCT.html#a7">WindowFromDC</a>()<font class="keyword"> const</font>
00911 <font class="keyword">    </font>{
00912         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
00913         return ::WindowFromDC(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>);
00914     }
00915 
<a name="l00916"></a><a class="code" href="classWTL_1_1CDCT.html#a8">00916</a>     CPenHandle <a class="code" href="classWTL_1_1CDCT.html#a8">GetCurrentPen</a>()<font class="keyword"> const</font>
00917 <font class="keyword">    </font>{
00918         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
00919         <font class="keywordflow">return</font> <a class="code" href="namespaceWTL.html#a35">CPenHandle</a>((HPEN)::GetCurrentObject(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, OBJ_PEN));
00920     }
<a name="l00921"></a><a class="code" href="classWTL_1_1CDCT.html#a9">00921</a>     CBrushHandle <a class="code" href="classWTL_1_1CDCT.html#a9">GetCurrentBrush</a>()<font class="keyword"> const</font>
00922 <font class="keyword">    </font>{
00923         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
00924         <font class="keywordflow">return</font> <a class="code" href="namespaceWTL.html#a37">CBrushHandle</a>((HBRUSH)::GetCurrentObject(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, OBJ_BRUSH));
00925     }
<a name="l00926"></a><a class="code" href="classWTL_1_1CDCT.html#a10">00926</a>     CPaletteHandle <a class="code" href="classWTL_1_1CDCT.html#a10">GetCurrentPalette</a>()<font class="keyword"> const</font>
00927 <font class="keyword">    </font>{
00928         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
00929         <font class="keywordflow">return</font> <a class="code" href="namespaceWTL.html#a43">CPaletteHandle</a>((HPALETTE)::GetCurrentObject(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, OBJ_PAL));
00930     }
<a name="l00931"></a><a class="code" href="classWTL_1_1CDCT.html#a11">00931</a>     CFontHandle <a class="code" href="classWTL_1_1CDCT.html#a11">GetCurrentFont</a>()<font class="keyword"> const</font>
00932 <font class="keyword">    </font>{
00933         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
00934         <font class="keywordflow">return</font> <a class="code" href="namespaceWTL.html#a39">CFontHandle</a>((HFONT)::GetCurrentObject(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, OBJ_FONT));
00935     }
<a name="l00936"></a><a class="code" href="classWTL_1_1CDCT.html#a12">00936</a>     CBitmapHandle <a class="code" href="classWTL_1_1CDCT.html#a12">GetCurrentBitmap</a>()<font class="keyword"> const</font>
00937 <font class="keyword">    </font>{
00938         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
00939         <font class="keywordflow">return</font> <a class="code" href="namespaceWTL.html#a41">CBitmapHandle</a>((HBITMAP)::GetCurrentObject(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, OBJ_BITMAP));
00940     }
00941 
<a name="l00942"></a><a class="code" href="classWTL_1_1CDCT.html#a13">00942</a>     HDC <a class="code" href="classWTL_1_1CDCT.html#a13">CreateDC</a>(LPCTSTR lpszDriverName, LPCTSTR lpszDeviceName, LPCTSTR lpszOutput, <font class="keyword">const</font> DEVMODE* lpInitData)
00943     {
00944         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> == NULL);
00945         <a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> = ::CreateDC(lpszDriverName, lpszDeviceName, lpszOutput, lpInitData);
00946         <font class="keywordflow">return</font> <a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>;
00947     }
00948 
<a name="l00949"></a><a class="code" href="classWTL_1_1CDCT.html#a14">00949</a>     HDC <a class="code" href="classWTL_1_1CDCT.html#a14">CreateCompatibleDC</a>(HDC hDC = NULL)
00950     {
00951         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> == NULL);
00952         <a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> = ::CreateCompatibleDC(hDC);
00953         <font class="keywordflow">return</font> <a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>;
00954     }
00955 
<a name="l00956"></a><a class="code" href="classWTL_1_1CDCT.html#a15">00956</a>     BOOL <a class="code" href="classWTL_1_1CDCT.html#a15">DeleteDC</a>()
00957     {
00958         <font class="keywordflow">if</font>(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> == NULL)
00959             <font class="keywordflow">return</font> FALSE;
00960         BOOL bRet = ::DeleteDC(m_hDC);
00961         <font class="keywordflow">if</font>(bRet)
00962             <a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> = NULL;
00963         <font class="keywordflow">return</font> bRet;
00964     }
00965 
00966 <font class="comment">// Device-Context Functions</font>
<a name="l00967"></a><a class="code" href="classWTL_1_1CDCT.html#a16">00967</a>     <font class="keywordtype">int</font> <a class="code" href="classWTL_1_1CDCT.html#a16">SaveDC</a>()
00968     {
00969         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
00970         return ::SaveDC(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>);
00971     }
00972 
<a name="l00973"></a><a class="code" href="classWTL_1_1CDCT.html#a17">00973</a>     BOOL <a class="code" href="classWTL_1_1CDCT.html#a17">RestoreDC</a>(<font class="keywordtype">int</font> nSavedDC)
00974     {
00975         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
00976         return ::RestoreDC(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, nSavedDC);
00977     }
00978 
<a name="l00979"></a><a class="code" href="classWTL_1_1CDCT.html#a18">00979</a>     <font class="keywordtype">int</font> <a class="code" href="classWTL_1_1CDCT.html#a18">GetDeviceCaps</a>(<font class="keywordtype">int</font> nIndex)<font class="keyword"> const</font>
00980 <font class="keyword">    </font>{
00981         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
00982         return ::GetDeviceCaps(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, nIndex);
00983     }
<a name="l00984"></a><a class="code" href="classWTL_1_1CDCT.html#a19">00984</a>     UINT <a class="code" href="classWTL_1_1CDCT.html#a19">SetBoundsRect</a>(LPCRECT lpRectBounds, UINT flags)
00985     {
00986         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
00987         return ::SetBoundsRect(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, lpRectBounds, flags);
00988     }
<a name="l00989"></a><a class="code" href="classWTL_1_1CDCT.html#a20">00989</a>     UINT <a class="code" href="classWTL_1_1CDCT.html#a20">GetBoundsRect</a>(LPRECT lpRectBounds, UINT flags)<font class="keyword"> const</font>
00990 <font class="keyword">    </font>{
00991         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
00992         return ::GetBoundsRect(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, lpRectBounds, flags);
00993     }
<a name="l00994"></a><a class="code" href="classWTL_1_1CDCT.html#a21">00994</a>     BOOL <a class="code" href="classWTL_1_1CDCT.html#a21">ResetDC</a>(<font class="keyword">const</font> DEVMODE* lpDevMode)
00995     {
00996         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
00997         return ::ResetDC(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, lpDevMode) != NULL;
00998     }
00999 
01000 <font class="comment">// Drawing-Tool Functions</font>
<a name="l01001"></a><a class="code" href="classWTL_1_1CDCT.html#a22">01001</a>     BOOL <a class="code" href="classWTL_1_1CDCT.html#a22">GetBrushOrg</a>(LPPOINT lpPoint)<font class="keyword"> const</font>
01002 <font class="keyword">    </font>{
01003         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01004         return ::GetBrushOrgEx(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, lpPoint);
01005     }
<a name="l01006"></a><a class="code" href="classWTL_1_1CDCT.html#a23">01006</a>     BOOL <a class="code" href="classWTL_1_1CDCT.html#a23">SetBrushOrg</a>(<font class="keywordtype">int</font> x, <font class="keywordtype">int</font> y, LPPOINT lpPoint = NULL)
01007     {
01008         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01009         return ::SetBrushOrgEx(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, x, y, lpPoint);
01010     }
<a name="l01011"></a><a class="code" href="classWTL_1_1CDCT.html#a24">01011</a>     BOOL <a class="code" href="classWTL_1_1CDCT.html#a23">SetBrushOrg</a>(POINT point, LPPOINT lpPointRet = NULL)
01012     {
01013         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01014         return ::SetBrushOrgEx(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, point.x, point.y, lpPointRet);
01015     }
<a name="l01016"></a><a class="code" href="classWTL_1_1CDCT.html#a25">01016</a>     <font class="keywordtype">int</font> <a class="code" href="classWTL_1_1CDCT.html#a25">EnumObjects</a>(<font class="keywordtype">int</font> nObjectType, <font class="keywordtype">int</font> (CALLBACK* lpfn)(LPVOID, LPARAM), LPARAM lpData)
01017     {
01018         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01019 <font class="preprocessor">#ifdef STRICT</font>
01020 <font class="preprocessor"></font>        return ::EnumObjects(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, nObjectType, (GOBJENUMPROC)lpfn, lpData);
01021 <font class="preprocessor">#else</font>
01022 <font class="preprocessor"></font>        return ::EnumObjects(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, nObjectType, (GOBJENUMPROC)lpfn, (LPVOID)lpData);
01023 <font class="preprocessor">#endif</font>
01024 <font class="preprocessor"></font>    }
01025 
01026 <font class="comment">// Type-safe selection helpers</font>
<a name="l01027"></a><a class="code" href="classWTL_1_1CDCT.html#a26">01027</a>     HPEN <a class="code" href="classWTL_1_1CDCT.html#a26">SelectPen</a>(HPEN hPen)
01028     {
01029         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01030         ATLASSERT(hPen == NULL || ::GetObjectType(hPen) == OBJ_PEN || ::GetObjectType(hPen) == OBJ_EXTPEN);
01031         <font class="keywordflow">return</font> (HPEN)::SelectObject(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, hPen);
01032     }
<a name="l01033"></a><a class="code" href="classWTL_1_1CDCT.html#a27">01033</a>     HBRUSH <a class="code" href="classWTL_1_1CDCT.html#a27">SelectBrush</a>(HBRUSH hBrush)
01034     {
01035         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01036         ATLASSERT(hBrush == NULL || ::GetObjectType(hBrush) == OBJ_BRUSH);
01037         <font class="keywordflow">return</font> (HBRUSH)::SelectObject(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, hBrush);
01038     }
<a name="l01039"></a><a class="code" href="classWTL_1_1CDCT.html#a28">01039</a>     HFONT <a class="code" href="classWTL_1_1CDCT.html#a28">SelectFont</a>(HFONT hFont)
01040     {
01041         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01042         ATLASSERT(hFont == NULL || ::GetObjectType(hFont) == OBJ_FONT);
01043         <font class="keywordflow">return</font> (HFONT)::SelectObject(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, hFont);
01044     }
<a name="l01045"></a><a class="code" href="classWTL_1_1CDCT.html#a29">01045</a>     HBITMAP <a class="code" href="classWTL_1_1CDCT.html#a29">SelectBitmap</a>(HBITMAP hBitmap)
01046     {
01047         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01048         ATLASSERT(hBitmap == NULL || ::GetObjectType(hBitmap) == OBJ_BITMAP);
01049         <font class="keywordflow">return</font> (HBITMAP)::SelectObject(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, hBitmap);
01050     }
<a name="l01051"></a><a class="code" href="classWTL_1_1CDCT.html#a30">01051</a>     <font class="keywordtype">int</font> <a class="code" href="classWTL_1_1CDCT.html#a30">SelectRgn</a>(HRGN hRgn)       <font class="comment">// special return for regions</font>
01052     {
01053         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01054         ATLASSERT(hRgn == NULL || ::GetObjectType(hRgn) == OBJ_REGION);
01055         <font class="keywordflow">return</font> <a class="code" href="atlapp_8h.html#a19">PtrToInt</a>(::SelectObject(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, hRgn));
01056     }
01057 <font class="comment">// Type-safe selection helpers for stock objects</font>
<a name="l01058"></a><a class="code" href="classWTL_1_1CDCT.html#a31">01058</a>     HPEN <a class="code" href="classWTL_1_1CDCT.html#a31">SelectStockPen</a>(<font class="keywordtype">int</font> nPen)
01059     {
01060         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01061 <font class="preprocessor">#if (_WIN32_WINNT &gt;= 0x0500)</font>
01062 <font class="preprocessor"></font>        ATLASSERT(nPen == WHITE_PEN || nPen == BLACK_PEN || nPen == NULL_PEN || nPen == DC_PEN);
01063 <font class="preprocessor">#else</font>
01064 <font class="preprocessor"></font>        ATLASSERT(nPen == WHITE_PEN || nPen == BLACK_PEN || nPen == NULL_PEN);
01065 <font class="preprocessor">#endif </font>
01066 <font class="preprocessor">        return SelectPen((HPEN)::GetStockObject(nPen));</font>
01067 <font class="preprocessor"></font>    }
<a name="l01068"></a><a class="code" href="classWTL_1_1CDCT.html#a32">01068</a>     HBRUSH <a class="code" href="classWTL_1_1CDCT.html#a32">SelectStockBrush</a>(<font class="keywordtype">int</font> nBrush)
01069     {
01070 <font class="preprocessor">#if (_WIN32_WINNT &gt;= 0x0500)</font>
01071 <font class="preprocessor"></font>        ATLASSERT((nBrush &gt;= WHITE_BRUSH &amp;&amp; nBrush &lt;= HOLLOW_BRUSH) || nBrush == DC_BRUSH);
01072 <font class="preprocessor">#else</font>
01073 <font class="preprocessor"></font>        ATLASSERT(nBrush &gt;= WHITE_BRUSH &amp;&amp; nBrush &lt;= HOLLOW_BRUSH);
01074 <font class="preprocessor">#endif </font>
01075 <font class="preprocessor">        return SelectBrush((HBRUSH)::GetStockObject(nBrush));</font>
01076 <font class="preprocessor"></font>    }
<a name="l01077"></a><a class="code" href="classWTL_1_1CDCT.html#a33">01077</a>     HFONT <a class="code" href="classWTL_1_1CDCT.html#a33">SelectStockFont</a>(<font class="keywordtype">int</font> nFont)
01078     {
01079         ATLASSERT((nFont &gt;= OEM_FIXED_FONT &amp;&amp; nFont &lt;= SYSTEM_FIXED_FONT) || nFont == DEFAULT_GUI_FONT);
01080         <font class="keywordflow">return</font> <a class="code" href="classWTL_1_1CDCT.html#a28">SelectFont</a>((HFONT)::GetStockObject(nFont));
01081     }
<a name="l01082"></a><a class="code" href="classWTL_1_1CDCT.html#a34">01082</a>     HPALETTE <a class="code" href="classWTL_1_1CDCT.html#a34">SelectStockPalette</a>(<font class="keywordtype">int</font> nPalette, BOOL bForceBackground)
01083     {
01084         ATLASSERT(nPalette == DEFAULT_PALETTE); <font class="comment">// the only one supported</font>
01085         <font class="keywordflow">return</font> <a class="code" href="classWTL_1_1CDCT.html#a36">SelectPalette</a>((HPALETTE)::GetStockObject(nPalette), bForceBackground);
01086     }
01087 
01088 <font class="comment">// Color and Color Palette Functions</font>
<a name="l01089"></a><a class="code" href="classWTL_1_1CDCT.html#a35">01089</a>     COLORREF <a class="code" href="classWTL_1_1CDCT.html#a35">GetNearestColor</a>(COLORREF crColor)<font class="keyword"> const</font>
01090 <font class="keyword">    </font>{
01091         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01092         return ::GetNearestColor(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, crColor);
01093     }
<a name="l01094"></a><a class="code" href="classWTL_1_1CDCT.html#a36">01094</a>     HPALETTE <a class="code" href="classWTL_1_1CDCT.html#a36">SelectPalette</a>(HPALETTE hPalette, BOOL bForceBackground)
01095     {
01096         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01097 
01098         return ::SelectPalette(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, hPalette, bForceBackground);
01099     }
<a name="l01100"></a><a class="code" href="classWTL_1_1CDCT.html#a37">01100</a>     UINT <a class="code" href="classWTL_1_1CDCT.html#a37">RealizePalette</a>()
01101     {
01102         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01103         return ::RealizePalette(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>);
01104     }
<a name="l01105"></a><a class="code" href="classWTL_1_1CDCT.html#a38">01105</a>     <font class="keywordtype">void</font> <a class="code" href="classWTL_1_1CDCT.html#a38">UpdateColors</a>()
01106     {
01107         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01108         ::UpdateColors(m_hDC);
01109     }
01110 
01111 <font class="comment">// Drawing-Attribute Functions</font>
<a name="l01112"></a><a class="code" href="classWTL_1_1CDCT.html#a39">01112</a>     COLORREF <a class="code" href="classWTL_1_1CDCT.html#a39">GetBkColor</a>()<font class="keyword"> const</font>
01113 <font class="keyword">    </font>{
01114         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01115         return ::GetBkColor(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>);
01116     }
<a name="l01117"></a><a class="code" href="classWTL_1_1CDCT.html#a40">01117</a>     <font class="keywordtype">int</font> <a class="code" href="classWTL_1_1CDCT.html#a40">GetBkMode</a>()<font class="keyword"> const</font>
01118 <font class="keyword">    </font>{
01119         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01120         return ::GetBkMode(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>);
01121     }
<a name="l01122"></a><a class="code" href="classWTL_1_1CDCT.html#a41">01122</a>     <font class="keywordtype">int</font> <a class="code" href="classWTL_1_1CDCT.html#a41">GetPolyFillMode</a>()<font class="keyword"> const</font>
01123 <font class="keyword">    </font>{
01124         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01125         return ::GetPolyFillMode(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>);
01126     }
<a name="l01127"></a><a class="code" href="classWTL_1_1CDCT.html#a42">01127</a>     <font class="keywordtype">int</font> <a class="code" href="classWTL_1_1CDCT.html#a42">GetROP2</a>()<font class="keyword"> const</font>
01128 <font class="keyword">    </font>{
01129         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01130         return ::GetROP2(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>);
01131     }
<a name="l01132"></a><a class="code" href="classWTL_1_1CDCT.html#a43">01132</a>     <font class="keywordtype">int</font> <a class="code" href="classWTL_1_1CDCT.html#a43">GetStretchBltMode</a>()<font class="keyword"> const</font>
01133 <font class="keyword">    </font>{
01134         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01135         return ::GetStretchBltMode(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>);
01136     }
<a name="l01137"></a><a class="code" href="classWTL_1_1CDCT.html#a44">01137</a>     COLORREF <a class="code" href="classWTL_1_1CDCT.html#a44">GetTextColor</a>()<font class="keyword"> const</font>
01138 <font class="keyword">    </font>{
01139         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01140         return ::GetTextColor(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>);
01141     }
01142 
<a name="l01143"></a><a class="code" href="classWTL_1_1CDCT.html#a45">01143</a>     COLORREF <a class="code" href="classWTL_1_1CDCT.html#a45">SetBkColor</a>(COLORREF crColor)
01144     {
01145         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01146         return ::SetBkColor(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, crColor);
01147     }
<a name="l01148"></a><a class="code" href="classWTL_1_1CDCT.html#a46">01148</a>     <font class="keywordtype">int</font> <a class="code" href="classWTL_1_1CDCT.html#a46">SetBkMode</a>(<font class="keywordtype">int</font> nBkMode)
01149     {
01150         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01151         return ::SetBkMode(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, nBkMode);
01152     }
<a name="l01153"></a><a class="code" href="classWTL_1_1CDCT.html#a47">01153</a>     <font class="keywordtype">int</font> <a class="code" href="classWTL_1_1CDCT.html#a47">SetPolyFillMode</a>(<font class="keywordtype">int</font> nPolyFillMode)
01154     {
01155         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01156         return ::SetPolyFillMode(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, nPolyFillMode);
01157     }
<a name="l01158"></a><a class="code" href="classWTL_1_1CDCT.html#a48">01158</a>     <font class="keywordtype">int</font> <a class="code" href="classWTL_1_1CDCT.html#a48">SetROP2</a>(<font class="keywordtype">int</font> nDrawMode)
01159     {
01160         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01161         return ::SetROP2(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, nDrawMode);
01162     }
<a name="l01163"></a><a class="code" href="classWTL_1_1CDCT.html#a49">01163</a>     <font class="keywordtype">int</font> <a class="code" href="classWTL_1_1CDCT.html#a49">SetStretchBltMode</a>(<font class="keywordtype">int</font> nStretchMode)
01164     {
01165         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01166         return ::SetStretchBltMode(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, nStretchMode);
01167     }
<a name="l01168"></a><a class="code" href="classWTL_1_1CDCT.html#a50">01168</a>     COLORREF <a class="code" href="classWTL_1_1CDCT.html#a50">SetTextColor</a>(COLORREF crColor)
01169     {
01170         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01171         return ::SetTextColor(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, crColor);
01172     }
01173 
<a name="l01174"></a><a class="code" href="classWTL_1_1CDCT.html#a51">01174</a>     BOOL <a class="code" href="classWTL_1_1CDCT.html#a51">GetColorAdjustment</a>(LPCOLORADJUSTMENT lpColorAdjust)<font class="keyword"> const</font>
01175 <font class="keyword">    </font>{
01176         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01177         return ::GetColorAdjustment(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, lpColorAdjust);
01178     }
<a name="l01179"></a><a class="code" href="classWTL_1_1CDCT.html#a52">01179</a>     BOOL <a class="code" href="classWTL_1_1CDCT.html#a52">SetColorAdjustment</a>(<font class="keyword">const</font> COLORADJUSTMENT* lpColorAdjust)
01180     {
01181         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01182         return ::SetColorAdjustment(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, lpColorAdjust);
01183     }
01184 
01185 <font class="comment">// Mapping Functions</font>
<a name="l01186"></a><a class="code" href="classWTL_1_1CDCT.html#a53">01186</a>     <font class="keywordtype">int</font> <a class="code" href="classWTL_1_1CDCT.html#a53">GetMapMode</a>()<font class="keyword"> const</font>
01187 <font class="keyword">    </font>{
01188         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01189         return ::GetMapMode(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>);
01190     }
<a name="l01191"></a><a class="code" href="classWTL_1_1CDCT.html#a54">01191</a>     BOOL <a class="code" href="classWTL_1_1CDCT.html#a54">GetViewportOrg</a>(LPPOINT lpPoint)<font class="keyword"> const</font>
01192 <font class="keyword">    </font>{
01193         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01194         return ::GetViewportOrgEx(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, lpPoint);
01195     }
<a name="l01196"></a><a class="code" href="classWTL_1_1CDCT.html#a55">01196</a>     <font class="keywordtype">int</font> <a class="code" href="classWTL_1_1CDCT.html#a55">SetMapMode</a>(<font class="keywordtype">int</font> nMapMode)
01197     {
01198         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01199         return ::SetMapMode(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, nMapMode);
01200     }
01201     <font class="comment">// Viewport Origin</font>
<a name="l01202"></a><a class="code" href="classWTL_1_1CDCT.html#a56">01202</a>     BOOL <a class="code" href="classWTL_1_1CDCT.html#a56">SetViewportOrg</a>(<font class="keywordtype">int</font> x, <font class="keywordtype">int</font> y, LPPOINT lpPoint = NULL)
01203     {
01204         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01205         return ::SetViewportOrgEx(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, x, y, lpPoint);
01206     }
<a name="l01207"></a><a class="code" href="classWTL_1_1CDCT.html#a57">01207</a>     BOOL <a class="code" href="classWTL_1_1CDCT.html#a56">SetViewportOrg</a>(POINT point, LPPOINT lpPointRet = NULL)
01208     {
01209         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01210         <font class="keywordflow">return</font> <a class="code" href="classWTL_1_1CDCT.html#a56">SetViewportOrg</a>(point.x, point.y, lpPointRet);
01211     }
<a name="l01212"></a><a class="code" href="classWTL_1_1CDCT.html#a58">01212</a>     BOOL <a class="code" href="classWTL_1_1CDCT.html#a58">OffsetViewportOrg</a>(<font class="keywordtype">int</font> nWidth, <font class="keywordtype">int</font> nHeight, LPPOINT lpPoint = NULL)
01213     {
01214         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01215         return ::OffsetViewportOrgEx(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, nWidth, nHeight, lpPoint);
01216     }
01217 
01218     <font class="comment">// Viewport Extent</font>
<a name="l01219"></a><a class="code" href="classWTL_1_1CDCT.html#a59">01219</a>     BOOL <a class="code" href="classWTL_1_1CDCT.html#a59">GetViewportExt</a>(LPSIZE lpSize)<font class="keyword"> const</font>
01220 <font class="keyword">    </font>{
01221         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01222         return ::GetViewportExtEx(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, lpSize);
01223     }
<a name="l01224"></a><a class="code" href="classWTL_1_1CDCT.html#a60">01224</a>     BOOL <a class="code" href="classWTL_1_1CDCT.html#a60">SetViewportExt</a>(<font class="keywordtype">int</font> x, <font class="keywordtype">int</font> y, LPSIZE lpSize = NULL)
01225     {
01226         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01227         return ::SetViewportExtEx(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, x, y, lpSize);
01228     }
<a name="l01229"></a><a class="code" href="classWTL_1_1CDCT.html#a61">01229</a>     BOOL <a class="code" href="classWTL_1_1CDCT.html#a60">SetViewportExt</a>(SIZE size, LPSIZE lpSizeRet = NULL)
01230     {
01231         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01232         <font class="keywordflow">return</font> <a class="code" href="classWTL_1_1CDCT.html#a60">SetViewportExt</a>(size.cx, size.cy, lpSizeRet);
01233     }
<a name="l01234"></a><a class="code" href="classWTL_1_1CDCT.html#a62">01234</a>     BOOL <a class="code" href="classWTL_1_1CDCT.html#a62">ScaleViewportExt</a>(<font class="keywordtype">int</font> xNum, <font class="keywordtype">int</font> xDenom, <font class="keywordtype">int</font> yNum, <font class="keywordtype">int</font> yDenom, LPSIZE lpSize = NULL)
01235     {
01236         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01237         return ::ScaleViewportExtEx(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, xNum, xDenom, yNum, yDenom, lpSize);
01238     }
01239 
01240     <font class="comment">// Window Origin</font>
<a name="l01241"></a><a class="code" href="classWTL_1_1CDCT.html#a63">01241</a>     BOOL <a class="code" href="classWTL_1_1CDCT.html#a63">GetWindowOrg</a>(LPPOINT lpPoint)<font class="keyword"> const</font>
01242 <font class="keyword">    </font>{
01243         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01244         return ::GetWindowOrgEx(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, lpPoint);
01245     }
<a name="l01246"></a><a class="code" href="classWTL_1_1CDCT.html#a64">01246</a>     BOOL <a class="code" href="classWTL_1_1CDCT.html#a64">SetWindowOrg</a>(<font class="keywordtype">int</font> x, <font class="keywordtype">int</font> y, LPPOINT lpPoint = NULL)
01247     {
01248         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01249         return ::SetWindowOrgEx(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, x, y, lpPoint);
01250     }
<a name="l01251"></a><a class="code" href="classWTL_1_1CDCT.html#a65">01251</a>     BOOL <a class="code" href="classWTL_1_1CDCT.html#a64">SetWindowOrg</a>(POINT point, LPPOINT lpPointRet = NULL)
01252     {
01253         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01254         <font class="keywordflow">return</font> <a class="code" href="classWTL_1_1CDCT.html#a64">SetWindowOrg</a>(point.x, point.y, lpPointRet);
01255     }
<a name="l01256"></a><a class="code" href="classWTL_1_1CDCT.html#a66">01256</a>     BOOL <a class="code" href="classWTL_1_1CDCT.html#a66">OffsetWindowOrg</a>(<font class="keywordtype">int</font> nWidth, <font class="keywordtype">int</font> nHeight, LPPOINT lpPoint = NULL)
01257     {
01258         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01259         return ::OffsetWindowOrgEx(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, nWidth, nHeight, lpPoint);
01260     }
01261 
01262     <font class="comment">// Window extent</font>
<a name="l01263"></a><a class="code" href="classWTL_1_1CDCT.html#a67">01263</a>     BOOL <a class="code" href="classWTL_1_1CDCT.html#a67">GetWindowExt</a>(LPSIZE lpSize)<font class="keyword"> const</font>
01264 <font class="keyword">    </font>{
01265         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01266         return ::GetWindowExtEx(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, lpSize);
01267     }
<a name="l01268"></a><a class="code" href="classWTL_1_1CDCT.html#a68">01268</a>     BOOL <a class="code" href="classWTL_1_1CDCT.html#a68">SetWindowExt</a>(<font class="keywordtype">int</font> x, <font class="keywordtype">int</font> y, LPSIZE lpSize = NULL)
01269     {
01270         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01271         return ::SetWindowExtEx(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, x, y, lpSize);
01272     }
<a name="l01273"></a><a class="code" href="classWTL_1_1CDCT.html#a69">01273</a>     BOOL <a class="code" href="classWTL_1_1CDCT.html#a68">SetWindowExt</a>(SIZE size, LPSIZE lpSizeRet)
01274     {
01275         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01276         <font class="keywordflow">return</font> <a class="code" href="classWTL_1_1CDCT.html#a68">SetWindowExt</a>(size.cx, size.cy, lpSizeRet);
01277     }
<a name="l01278"></a><a class="code" href="classWTL_1_1CDCT.html#a70">01278</a>     BOOL <a class="code" href="classWTL_1_1CDCT.html#a70">ScaleWindowExt</a>(<font class="keywordtype">int</font> xNum, <font class="keywordtype">int</font> xDenom, <font class="keywordtype">int</font> yNum, <font class="keywordtype">int</font> yDenom, LPSIZE lpSize = NULL)
01279     {
01280         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01281         return ::ScaleWindowExtEx(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, xNum, xDenom, yNum, yDenom, lpSize);
01282     }
01283 
01284 <font class="comment">// Coordinate Functions</font>
<a name="l01285"></a><a class="code" href="classWTL_1_1CDCT.html#a71">01285</a>     BOOL <a class="code" href="classWTL_1_1CDCT.html#a71">DPtoLP</a>(LPPOINT lpPoints, <font class="keywordtype">int</font> nCount = 1)<font class="keyword"> const</font>
01286 <font class="keyword">    </font>{
01287         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01288         return ::DPtoLP(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, lpPoints, nCount);
01289     }
<a name="l01290"></a><a class="code" href="classWTL_1_1CDCT.html#a72">01290</a>     BOOL <a class="code" href="classWTL_1_1CDCT.html#a71">DPtoLP</a>(LPRECT lpRect)<font class="keyword"> const</font>
01291 <font class="keyword">    </font>{
01292         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01293         return ::DPtoLP(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, (LPPOINT)lpRect, 2);
01294     }
<a name="l01295"></a><a class="code" href="classWTL_1_1CDCT.html#a73">01295</a>     BOOL <a class="code" href="classWTL_1_1CDCT.html#a71">DPtoLP</a>(LPSIZE lpSize)<font class="keyword"> const</font>
01296 <font class="keyword">    </font>{
01297         SIZE sizeWinExt;
01298         <font class="keywordflow">if</font>(!<a class="code" href="classWTL_1_1CDCT.html#a67">GetWindowExt</a>(&amp;sizeWinExt))
01299             <font class="keywordflow">return</font> FALSE;
01300         SIZE sizeVpExt;
01301         <font class="keywordflow">if</font>(!<a class="code" href="classWTL_1_1CDCT.html#a59">GetViewportExt</a>(&amp;sizeVpExt))
01302             <font class="keywordflow">return</font> FALSE;
01303         lpSize-&gt;cx = MulDiv(lpSize-&gt;cx, abs(sizeWinExt.cx), abs(sizeVpExt.cx));
01304         lpSize-&gt;cy = MulDiv(lpSize-&gt;cy, abs(sizeWinExt.cy), abs(sizeVpExt.cy));
01305         <font class="keywordflow">return</font> TRUE;
01306     }
<a name="l01307"></a><a class="code" href="classWTL_1_1CDCT.html#a74">01307</a>     BOOL <a class="code" href="classWTL_1_1CDCT.html#a74">LPtoDP</a>(LPPOINT lpPoints, <font class="keywordtype">int</font> nCount = 1)<font class="keyword"> const</font>
01308 <font class="keyword">    </font>{
01309         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01310         return ::LPtoDP(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, lpPoints, nCount);
01311     }
<a name="l01312"></a><a class="code" href="classWTL_1_1CDCT.html#a75">01312</a>     BOOL <a class="code" href="classWTL_1_1CDCT.html#a74">LPtoDP</a>(LPRECT lpRect)<font class="keyword"> const</font>
01313 <font class="keyword">    </font>{
01314         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01315         return ::LPtoDP(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, (LPPOINT)lpRect, 2);
01316     }
<a name="l01317"></a><a class="code" href="classWTL_1_1CDCT.html#a76">01317</a>     BOOL <a class="code" href="classWTL_1_1CDCT.html#a74">LPtoDP</a>(LPSIZE lpSize)<font class="keyword"> const</font>
01318 <font class="keyword">    </font>{
01319         SIZE sizeWinExt;
01320         <font class="keywordflow">if</font>(!<a class="code" href="classWTL_1_1CDCT.html#a67">GetWindowExt</a>(&amp;sizeWinExt))
01321             <font class="keywordflow">return</font> FALSE;
01322         SIZE sizeVpExt;
01323         <font class="keywordflow">if</font>(!<a class="code" href="classWTL_1_1CDCT.html#a59">GetViewportExt</a>(&amp;sizeVpExt))
01324             <font class="keywordflow">return</font> FALSE;
01325         lpSize-&gt;cx = ::MulDiv(lpSize-&gt;cx, abs(sizeVpExt.cx), abs(sizeWinExt.cx));
01326         lpSize-&gt;cy = ::MulDiv(lpSize-&gt;cy, abs(sizeVpExt.cy), abs(sizeWinExt.cy));
01327         <font class="keywordflow">return</font> TRUE;
01328     }
01329 
01330 <font class="comment">// Special Coordinate Functions (useful for dealing with metafiles and OLE)</font>
<a name="l01331"></a><a class="code" href="atlgdi_8h.html#a0">01331</a> <font class="preprocessor">    #define HIMETRIC_INCH   2540    // HIMETRIC units per inch</font>
01332 <font class="preprocessor"></font>
<a name="l01333"></a><a class="code" href="classWTL_1_1CDCT.html#a77">01333</a>     <font class="keywordtype">void</font> <a class="code" href="classWTL_1_1CDCT.html#a77">DPtoHIMETRIC</a>(LPSIZE lpSize)<font class="keyword"> const</font>
01334 <font class="keyword">    </font>{
01335         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01336         <font class="keywordtype">int</font> nMapMode;
01337         <font class="keywordflow">if</font>((nMapMode = <a class="code" href="classWTL_1_1CDCT.html#a53">GetMapMode</a>()) &lt; MM_ISOTROPIC &amp;&amp; nMapMode != MM_TEXT)
01338         {
01339             <font class="comment">// when using a constrained map mode, map against physical inch</font>
01340             ((<a class="code" href="namespaceWTL.html#a47">CDCHandle</a>*)<font class="keyword">this</font>)-&gt;SetMapMode(MM_HIMETRIC);
01341             <a class="code" href="classWTL_1_1CDCT.html#a71">DPtoLP</a>(lpSize);
01342             ((<a class="code" href="namespaceWTL.html#a47">CDCHandle</a>*)<font class="keyword">this</font>)-&gt;SetMapMode(nMapMode);
01343         }
01344         <font class="keywordflow">else</font>
01345         {
01346             <font class="comment">// map against logical inch for non-constrained mapping modes</font>
01347             <font class="keywordtype">int</font> cxPerInch = <a class="code" href="classWTL_1_1CDCT.html#a18">GetDeviceCaps</a>(LOGPIXELSX);
01348             <font class="keywordtype">int</font> cyPerInch = <a class="code" href="classWTL_1_1CDCT.html#a18">GetDeviceCaps</a>(LOGPIXELSY);
01349             ATLASSERT(cxPerInch != 0 &amp;&amp; cyPerInch != 0);
01350             lpSize-&gt;cx = MulDiv(lpSize-&gt;cx, <a class="code" href="atlgdi_8h.html#a0">HIMETRIC_INCH</a>, cxPerInch);
01351             lpSize-&gt;cy = MulDiv(lpSize-&gt;cy, <a class="code" href="atlgdi_8h.html#a0">HIMETRIC_INCH</a>, cyPerInch);
01352         }
01353     }
01354 
<a name="l01355"></a><a class="code" href="classWTL_1_1CDCT.html#a78">01355</a>     <font class="keywordtype">void</font> <a class="code" href="classWTL_1_1CDCT.html#a78">HIMETRICtoDP</a>(LPSIZE lpSize)<font class="keyword"> const</font>
01356 <font class="keyword">    </font>{
01357         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01358         <font class="keywordtype">int</font> nMapMode;
01359         <font class="keywordflow">if</font>((nMapMode = <a class="code" href="classWTL_1_1CDCT.html#a53">GetMapMode</a>()) &lt; MM_ISOTROPIC &amp;&amp; nMapMode != MM_TEXT)
01360         {
01361             <font class="comment">// when using a constrained map mode, map against physical inch</font>
01362             ((<a class="code" href="namespaceWTL.html#a47">CDCHandle</a>*)<font class="keyword">this</font>)-&gt;SetMapMode(MM_HIMETRIC);
01363             <a class="code" href="classWTL_1_1CDCT.html#a74">LPtoDP</a>(lpSize);
01364             ((<a class="code" href="namespaceWTL.html#a47">CDCHandle</a>*)<font class="keyword">this</font>)-&gt;SetMapMode(nMapMode);
01365         }
01366         <font class="keywordflow">else</font>
01367         {
01368             <font class="comment">// map against logical inch for non-constrained mapping modes</font>
01369             <font class="keywordtype">int</font> cxPerInch = <a class="code" href="classWTL_1_1CDCT.html#a18">GetDeviceCaps</a>(LOGPIXELSX);
01370             <font class="keywordtype">int</font> cyPerInch = <a class="code" href="classWTL_1_1CDCT.html#a18">GetDeviceCaps</a>(LOGPIXELSY);
01371             ATLASSERT(cxPerInch != 0 &amp;&amp; cyPerInch != 0);
01372             lpSize-&gt;cx = MulDiv(lpSize-&gt;cx, cxPerInch, <a class="code" href="atlgdi_8h.html#a0">HIMETRIC_INCH</a>);
01373             lpSize-&gt;cy = MulDiv(lpSize-&gt;cy, cyPerInch, <a class="code" href="atlgdi_8h.html#a0">HIMETRIC_INCH</a>);
01374         }
01375     }
01376 
<a name="l01377"></a><a class="code" href="classWTL_1_1CDCT.html#a79">01377</a>     <font class="keywordtype">void</font> <a class="code" href="classWTL_1_1CDCT.html#a79">LPtoHIMETRIC</a>(LPSIZE lpSize)<font class="keyword"> const</font>
01378 <font class="keyword">    </font>{
01379         <a class="code" href="classWTL_1_1CDCT.html#a74">LPtoDP</a>(lpSize);
01380         <a class="code" href="classWTL_1_1CDCT.html#a77">DPtoHIMETRIC</a>(lpSize);
01381     }
01382 
<a name="l01383"></a><a class="code" href="classWTL_1_1CDCT.html#a80">01383</a>     <font class="keywordtype">void</font> <a class="code" href="classWTL_1_1CDCT.html#a80">HIMETRICtoLP</a>(LPSIZE lpSize)<font class="keyword"> const</font>
01384 <font class="keyword">    </font>{
01385         <a class="code" href="classWTL_1_1CDCT.html#a78">HIMETRICtoDP</a>(lpSize);
01386         <a class="code" href="classWTL_1_1CDCT.html#a71">DPtoLP</a>(lpSize);
01387     }
01388 
01389 <font class="comment">// Region Functions</font>
<a name="l01390"></a><a class="code" href="classWTL_1_1CDCT.html#a81">01390</a>     BOOL <a class="code" href="classWTL_1_1CDCT.html#a81">FillRgn</a>(HRGN hRgn, HBRUSH hBrush)
01391     {
01392         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01393         return ::FillRgn(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, hRgn, hBrush);
01394     }
<a name="l01395"></a><a class="code" href="classWTL_1_1CDCT.html#a82">01395</a>     BOOL <a class="code" href="classWTL_1_1CDCT.html#a82">FrameRgn</a>(HRGN hRgn, HBRUSH hBrush, <font class="keywordtype">int</font> nWidth, <font class="keywordtype">int</font> nHeight)
01396     {
01397         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01398         return ::FrameRgn(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, hRgn, hBrush, nWidth, nHeight);
01399     }
<a name="l01400"></a><a class="code" href="classWTL_1_1CDCT.html#a83">01400</a>     BOOL <a class="code" href="classWTL_1_1CDCT.html#a83">InvertRgn</a>(HRGN hRgn)
01401     {
01402         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01403         return ::InvertRgn(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, hRgn);
01404     }
<a name="l01405"></a><a class="code" href="classWTL_1_1CDCT.html#a84">01405</a>     BOOL <a class="code" href="classWTL_1_1CDCT.html#a84">PaintRgn</a>(HRGN hRgn)
01406     {
01407         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01408         return ::PaintRgn(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, hRgn);
01409     }
01410 
01411 <font class="comment">// Clipping Functions</font>
<a name="l01412"></a><a class="code" href="classWTL_1_1CDCT.html#a85">01412</a>     <font class="keywordtype">int</font> <a class="code" href="classWTL_1_1CDCT.html#a85">GetClipBox</a>(LPRECT lpRect)<font class="keyword"> const</font>
01413 <font class="keyword">    </font>{
01414         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01415         return ::GetClipBox(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, lpRect);
01416     }
<a name="l01417"></a><a class="code" href="classWTL_1_1CDCT.html#a86">01417</a>     BOOL <a class="code" href="classWTL_1_1CDCT.html#a86">PtVisible</a>(<font class="keywordtype">int</font> x, <font class="keywordtype">int</font> y)<font class="keyword"> const</font>
01418 <font class="keyword">    </font>{
01419         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01420         return ::PtVisible(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, x, y);
01421     }
<a name="l01422"></a><a class="code" href="classWTL_1_1CDCT.html#a87">01422</a>     BOOL <a class="code" href="classWTL_1_1CDCT.html#a86">PtVisible</a>(POINT point)<font class="keyword"> const</font>
01423 <font class="keyword">    </font>{
01424         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01425         return ::PtVisible(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, point.x, point.y);
01426     }
<a name="l01427"></a><a class="code" href="classWTL_1_1CDCT.html#a88">01427</a>     BOOL <a class="code" href="classWTL_1_1CDCT.html#a88">RectVisible</a>(LPCRECT lpRect)<font class="keyword"> const</font>
01428 <font class="keyword">    </font>{
01429         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01430         return ::RectVisible(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, lpRect);
01431     }
<a name="l01432"></a><a class="code" href="classWTL_1_1CDCT.html#a89">01432</a>     <font class="keywordtype">int</font> <a class="code" href="classWTL_1_1CDCT.html#a89">SelectClipRgn</a>(HRGN hRgn)
01433     {
01434         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01435         return ::SelectClipRgn(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, (HRGN)hRgn);
01436     }
<a name="l01437"></a><a class="code" href="classWTL_1_1CDCT.html#a90">01437</a>     <font class="keywordtype">int</font> <a class="code" href="classWTL_1_1CDCT.html#a90">ExcludeClipRect</a>(<font class="keywordtype">int</font> x1, <font class="keywordtype">int</font> y1, <font class="keywordtype">int</font> x2, <font class="keywordtype">int</font> y2)
01438     {
01439         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01440         return ::ExcludeClipRect(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, x1, y1, x2, y2);
01441     }
<a name="l01442"></a><a class="code" href="classWTL_1_1CDCT.html#a91">01442</a>     <font class="keywordtype">int</font> <a class="code" href="classWTL_1_1CDCT.html#a90">ExcludeClipRect</a>(LPCRECT lpRect)
01443     {
01444         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01445         return ::ExcludeClipRect(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, lpRect-&gt;left, lpRect-&gt;top, lpRect-&gt;right, lpRect-&gt;bottom);
01446     }
<a name="l01447"></a><a class="code" href="classWTL_1_1CDCT.html#a92">01447</a>     <font class="keywordtype">int</font> <a class="code" href="classWTL_1_1CDCT.html#a92">ExcludeUpdateRgn</a>(HWND hWnd)
01448     {
01449         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01450         return ::ExcludeUpdateRgn(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, hWnd);
01451     }
<a name="l01452"></a><a class="code" href="classWTL_1_1CDCT.html#a93">01452</a>     <font class="keywordtype">int</font> <a class="code" href="classWTL_1_1CDCT.html#a93">IntersectClipRect</a>(<font class="keywordtype">int</font> x1, <font class="keywordtype">int</font> y1, <font class="keywordtype">int</font> x2, <font class="keywordtype">int</font> y2)
01453     {
01454         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01455         return ::IntersectClipRect(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, x1, y1, x2, y2);
01456     }
<a name="l01457"></a><a class="code" href="classWTL_1_1CDCT.html#a94">01457</a>     <font class="keywordtype">int</font> <a class="code" href="classWTL_1_1CDCT.html#a93">IntersectClipRect</a>(LPCRECT lpRect)
01458     {
01459         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01460         return ::IntersectClipRect(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, lpRect-&gt;left, lpRect-&gt;top, lpRect-&gt;right, lpRect-&gt;bottom);
01461     }
<a name="l01462"></a><a class="code" href="classWTL_1_1CDCT.html#a95">01462</a>     <font class="keywordtype">int</font> <a class="code" href="classWTL_1_1CDCT.html#a95">OffsetClipRgn</a>(<font class="keywordtype">int</font> x, <font class="keywordtype">int</font> y)
01463     {
01464         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01465         return ::OffsetClipRgn(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, x, y);
01466     }
<a name="l01467"></a><a class="code" href="classWTL_1_1CDCT.html#a96">01467</a>     <font class="keywordtype">int</font> <a class="code" href="classWTL_1_1CDCT.html#a95">OffsetClipRgn</a>(SIZE size)
01468     {
01469         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01470         return ::OffsetClipRgn(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, size.cx, size.cy);
01471     }
<a name="l01472"></a><a class="code" href="classWTL_1_1CDCT.html#a97">01472</a>     <font class="keywordtype">int</font> <a class="code" href="classWTL_1_1CDCT.html#a89">SelectClipRgn</a>(HRGN hRgn, <font class="keywordtype">int</font> nMode)
01473     {
01474         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01475         return ::ExtSelectClipRgn(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, hRgn, nMode);
01476     }
01477 
01478 <font class="comment">// Line-Output Functions</font>
<a name="l01479"></a><a class="code" href="classWTL_1_1CDCT.html#a98">01479</a>     BOOL <a class="code" href="classWTL_1_1CDCT.html#a98">GetCurrentPosition</a>(LPPOINT lpPoint)<font class="keyword"> const</font>
01480 <font class="keyword">    </font>{
01481         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01482         return ::GetCurrentPositionEx(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, lpPoint);
01483     }
<a name="l01484"></a><a class="code" href="classWTL_1_1CDCT.html#a99">01484</a>     BOOL <a class="code" href="classWTL_1_1CDCT.html#a99">MoveTo</a>(<font class="keywordtype">int</font> x, <font class="keywordtype">int</font> y, LPPOINT lpPoint = NULL)
01485     {
01486         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01487         return ::MoveToEx(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, x, y, lpPoint);
01488     }
<a name="l01489"></a><a class="code" href="classWTL_1_1CDCT.html#a100">01489</a>     BOOL <a class="code" href="classWTL_1_1CDCT.html#a99">MoveTo</a>(POINT point, LPPOINT lpPointRet = NULL)
01490     {
01491         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01492         <font class="keywordflow">return</font> <a class="code" href="classWTL_1_1CDCT.html#a99">MoveTo</a>(point.x, point.y, lpPointRet);
01493     }
<a name="l01494"></a><a class="code" href="classWTL_1_1CDCT.html#a101">01494</a>     BOOL <a class="code" href="classWTL_1_1CDCT.html#a101">LineTo</a>(<font class="keywordtype">int</font> x, <font class="keywordtype">int</font> y)
01495     {
01496         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01497         return ::LineTo(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, x, y);
01498     }
<a name="l01499"></a><a class="code" href="classWTL_1_1CDCT.html#a102">01499</a>     BOOL <a class="code" href="classWTL_1_1CDCT.html#a101">LineTo</a>(POINT point)
01500     {
01501         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01502         <font class="keywordflow">return</font> <a class="code" href="classWTL_1_1CDCT.html#a101">LineTo</a>(point.x, point.y);
01503     }
<a name="l01504"></a><a class="code" href="classWTL_1_1CDCT.html#a103">01504</a>     BOOL <a class="code" href="classWTL_1_1CDCT.html#a103">Arc</a>(<font class="keywordtype">int</font> x1, <font class="keywordtype">int</font> y1, <font class="keywordtype">int</font> x2, <font class="keywordtype">int</font> y2, <font class="keywordtype">int</font> x3, <font class="keywordtype">int</font> y3, <font class="keywordtype">int</font> x4, <font class="keywordtype">int</font> y4)
01505     {
01506         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01507         return ::Arc(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, x1, y1, x2, y2, x3, y3, x4, y4);
01508     }
<a name="l01509"></a><a class="code" href="classWTL_1_1CDCT.html#a104">01509</a>     BOOL <a class="code" href="classWTL_1_1CDCT.html#a103">Arc</a>(LPCRECT lpRect, POINT ptStart, POINT ptEnd)
01510     {
01511         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01512         return ::Arc(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, lpRect-&gt;left, lpRect-&gt;top,
01513             lpRect-&gt;right, lpRect-&gt;bottom, ptStart.x, ptStart.y,
01514             ptEnd.x, ptEnd.y);
01515     }
<a name="l01516"></a><a class="code" href="classWTL_1_1CDCT.html#a105">01516</a>     BOOL <a class="code" href="classWTL_1_1CDCT.html#a105">Polyline</a>(LPPOINT lpPoints, <font class="keywordtype">int</font> nCount)
01517     {
01518         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01519         return ::Polyline(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, lpPoints, nCount);
01520     }
01521 
<a name="l01522"></a><a class="code" href="classWTL_1_1CDCT.html#a106">01522</a>     BOOL <a class="code" href="classWTL_1_1CDCT.html#a106">AngleArc</a>(<font class="keywordtype">int</font> x, <font class="keywordtype">int</font> y, <font class="keywordtype">int</font> nRadius, <font class="keywordtype">float</font> fStartAngle, <font class="keywordtype">float</font> fSweepAngle)
01523     {
01524         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01525         return ::AngleArc(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, x, y, nRadius, fStartAngle, fSweepAngle);
01526     }
<a name="l01527"></a><a class="code" href="classWTL_1_1CDCT.html#a107">01527</a>     BOOL <a class="code" href="classWTL_1_1CDCT.html#a107">ArcTo</a>(<font class="keywordtype">int</font> x1, <font class="keywordtype">int</font> y1, <font class="keywordtype">int</font> x2, <font class="keywordtype">int</font> y2, <font class="keywordtype">int</font> x3, <font class="keywordtype">int</font> y3, <font class="keywordtype">int</font> x4, <font class="keywordtype">int</font> y4)
01528     {
01529         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01530         return ::ArcTo(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, x1, y1, x2, y2, x3, y3, x4, y4);
01531     }
<a name="l01532"></a><a class="code" href="classWTL_1_1CDCT.html#a108">01532</a>     BOOL <a class="code" href="classWTL_1_1CDCT.html#a107">ArcTo</a>(LPCRECT lpRect, POINT ptStart, POINT ptEnd)
01533     {
01534         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01535         <font class="keywordflow">return</font> <a class="code" href="classWTL_1_1CDCT.html#a107">ArcTo</a>(lpRect-&gt;left, lpRect-&gt;top, lpRect-&gt;right,
01536         lpRect-&gt;bottom, ptStart.x, ptStart.y, ptEnd.x, ptEnd.y);
01537     }
<a name="l01538"></a><a class="code" href="classWTL_1_1CDCT.html#a109">01538</a>     <font class="keywordtype">int</font> <a class="code" href="classWTL_1_1CDCT.html#a109">GetArcDirection</a>()<font class="keyword"> const</font>
01539 <font class="keyword">    </font>{
01540         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01541         return ::GetArcDirection(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>);
01542     }
<a name="l01543"></a><a class="code" href="classWTL_1_1CDCT.html#a110">01543</a>     <font class="keywordtype">int</font> <a class="code" href="classWTL_1_1CDCT.html#a110">SetArcDirection</a>(<font class="keywordtype">int</font> nArcDirection)
01544     {
01545         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01546         return ::SetArcDirection(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, nArcDirection);
01547     }
01548 
<a name="l01549"></a><a class="code" href="classWTL_1_1CDCT.html#a111">01549</a>     BOOL <a class="code" href="classWTL_1_1CDCT.html#a111">PolyDraw</a>(<font class="keyword">const</font> POINT* lpPoints, <font class="keyword">const</font> BYTE* lpTypes, <font class="keywordtype">int</font> nCount)
01550     {
01551         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01552         return ::PolyDraw(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, lpPoints, lpTypes, nCount);
01553     }
<a name="l01554"></a><a class="code" href="classWTL_1_1CDCT.html#a112">01554</a>     BOOL <a class="code" href="classWTL_1_1CDCT.html#a112">PolylineTo</a>(<font class="keyword">const</font> POINT* lpPoints, <font class="keywordtype">int</font> nCount)
01555     {
01556         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01557         return ::PolylineTo(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, lpPoints, nCount);
01558     }
<a name="l01559"></a><a class="code" href="classWTL_1_1CDCT.html#a113">01559</a>     BOOL <a class="code" href="classWTL_1_1CDCT.html#a113">PolyPolyline</a>(<font class="keyword">const</font> POINT* lpPoints,
01560         <font class="keyword">const</font> DWORD* lpPolyPoints, <font class="keywordtype">int</font> nCount)
01561     {
01562         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01563         return ::PolyPolyline(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, lpPoints, lpPolyPoints, nCount);
01564     }
01565 
<a name="l01566"></a><a class="code" href="classWTL_1_1CDCT.html#a114">01566</a>     BOOL <a class="code" href="classWTL_1_1CDCT.html#a114">PolyBezier</a>(<font class="keyword">const</font> POINT* lpPoints, <font class="keywordtype">int</font> nCount)
01567     {
01568         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01569         return ::PolyBezier(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, lpPoints, nCount);
01570     }
<a name="l01571"></a><a class="code" href="classWTL_1_1CDCT.html#a115">01571</a>     BOOL <a class="code" href="classWTL_1_1CDCT.html#a115">PolyBezierTo</a>(<font class="keyword">const</font> POINT* lpPoints, <font class="keywordtype">int</font> nCount)
01572     {
01573         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01574         return ::PolyBezierTo(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, lpPoints, nCount);
01575     }
01576 
01577 <font class="comment">// Simple Drawing Functions</font>
<a name="l01578"></a><a class="code" href="classWTL_1_1CDCT.html#a116">01578</a>     BOOL <a class="code" href="classWTL_1_1CDCT.html#a116">FillRect</a>(LPCRECT lpRect, HBRUSH hBrush)
01579     {
01580         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01581         return ::FillRect(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, lpRect, hBrush);
01582     }
<a name="l01583"></a><a class="code" href="classWTL_1_1CDCT.html#a117">01583</a>     BOOL <a class="code" href="classWTL_1_1CDCT.html#a116">FillRect</a>(LPCRECT lpRect, <font class="keywordtype">int</font> nColorIndex)
01584     {
01585         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01586         return ::FillRect(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, lpRect, (HBRUSH)<a class="code" href="atlapp_8h.html#a24">LongToPtr</a>(nColorIndex + 1));
01587     }
<a name="l01588"></a><a class="code" href="classWTL_1_1CDCT.html#a118">01588</a>     BOOL <a class="code" href="classWTL_1_1CDCT.html#a118">FrameRect</a>(LPCRECT lpRect, HBRUSH hBrush)
01589     {
01590         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01591         return ::FrameRect(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, lpRect, hBrush);
01592     }
<a name="l01593"></a><a class="code" href="classWTL_1_1CDCT.html#a119">01593</a>     BOOL <a class="code" href="classWTL_1_1CDCT.html#a119">InvertRect</a>(LPCRECT lpRect)
01594     {
01595         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01596         return ::InvertRect(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, lpRect);
01597     }
<a name="l01598"></a><a class="code" href="classWTL_1_1CDCT.html#a120">01598</a>     BOOL <a class="code" href="classWTL_1_1CDCT.html#a120">DrawIcon</a>(<font class="keywordtype">int</font> x, <font class="keywordtype">int</font> y, HICON hIcon)
01599     {
01600         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01601         return ::DrawIcon(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, x, y, hIcon);
01602     }
<a name="l01603"></a><a class="code" href="classWTL_1_1CDCT.html#a121">01603</a>     BOOL <a class="code" href="classWTL_1_1CDCT.html#a120">DrawIcon</a>(POINT point, HICON hIcon)
01604     {
01605         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01606         return ::DrawIcon(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, point.x, point.y, hIcon);
01607     }
<a name="l01608"></a><a class="code" href="classWTL_1_1CDCT.html#a122">01608</a>     BOOL <a class="code" href="classWTL_1_1CDCT.html#a122">DrawIconEx</a>(<font class="keywordtype">int</font> x, <font class="keywordtype">int</font> y, HICON hIcon, <font class="keywordtype">int</font> cxWidth, <font class="keywordtype">int</font> cyWidth, UINT uStepIfAniCur = 0, HBRUSH hbrFlickerFreeDraw = NULL, UINT uFlags = DI_NORMAL)
01609     {
01610         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01611         return ::DrawIconEx(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, x, y, hIcon, cxWidth, cyWidth, uStepIfAniCur, hbrFlickerFreeDraw, uFlags);
01612     }
<a name="l01613"></a><a class="code" href="classWTL_1_1CDCT.html#a123">01613</a>     BOOL <a class="code" href="classWTL_1_1CDCT.html#a122">DrawIconEx</a>(POINT point, HICON hIcon, SIZE size, UINT uStepIfAniCur = 0, HBRUSH hbrFlickerFreeDraw = NULL, UINT uFlags = DI_NORMAL)
01614     {
01615         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01616         return ::DrawIconEx(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, point.x, point.y, hIcon, size.cx, size.cy, uStepIfAniCur, hbrFlickerFreeDraw, uFlags);
01617     }
<a name="l01618"></a><a class="code" href="classWTL_1_1CDCT.html#a124">01618</a>     BOOL <a class="code" href="classWTL_1_1CDCT.html#a124">DrawState</a>(POINT pt, SIZE size, HBITMAP hBitmap, UINT nFlags, HBRUSH hBrush = NULL)
01619     {
01620         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01621         return ::DrawState(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, hBrush, NULL, (LPARAM)hBitmap, 0, pt.x, pt.y, size.cx, size.cy, nFlags | DST_BITMAP);
01622     }
<a name="l01623"></a><a class="code" href="classWTL_1_1CDCT.html#a125">01623</a>     BOOL <a class="code" href="classWTL_1_1CDCT.html#a124">DrawState</a>(POINT pt, SIZE size, HICON hIcon, UINT nFlags, HBRUSH hBrush = NULL)
01624     {
01625         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01626         return ::DrawState(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, hBrush, NULL, (LPARAM)hIcon, 0, pt.x, pt.y, size.cx, size.cy, nFlags | DST_ICON);
01627     }
<a name="l01628"></a><a class="code" href="classWTL_1_1CDCT.html#a126">01628</a>     BOOL <a class="code" href="classWTL_1_1CDCT.html#a124">DrawState</a>(POINT pt, SIZE size, LPCTSTR lpszText, UINT nFlags, BOOL bPrefixText = TRUE, <font class="keywordtype">int</font> nTextLen = 0, HBRUSH hBrush = NULL)
01629     {
01630         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01631         return ::DrawState(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, hBrush, NULL, (LPARAM)lpszText, (WPARAM)nTextLen, pt.x, pt.y, size.cx, size.cy, nFlags | (bPrefixText ? DST_PREFIXTEXT : DST_TEXT));
01632     }
<a name="l01633"></a><a class="code" href="classWTL_1_1CDCT.html#a127">01633</a>     BOOL <a class="code" href="classWTL_1_1CDCT.html#a124">DrawState</a>(POINT pt, SIZE size, DRAWSTATEPROC lpDrawProc, LPARAM lData, UINT nFlags, HBRUSH hBrush = NULL)
01634     {
01635         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01636         return ::DrawState(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, hBrush, lpDrawProc, lData, 0, pt.x, pt.y, size.cx, size.cy, nFlags | DST_COMPLEX);
01637     }
01638 
01639 <font class="comment">// Ellipse and Polygon Functions</font>
<a name="l01640"></a><a class="code" href="classWTL_1_1CDCT.html#a128">01640</a>     BOOL <a class="code" href="classWTL_1_1CDCT.html#a128">Chord</a>(<font class="keywordtype">int</font> x1, <font class="keywordtype">int</font> y1, <font class="keywordtype">int</font> x2, <font class="keywordtype">int</font> y2, <font class="keywordtype">int</font> x3, <font class="keywordtype">int</font> y3, <font class="keywordtype">int</font> x4, <font class="keywordtype">int</font> y4)
01641     {
01642         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01643         return ::Chord(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, x1, y1, x2, y2, x3, y3, x4, y4);
01644     }
<a name="l01645"></a><a class="code" href="classWTL_1_1CDCT.html#a129">01645</a>     BOOL <a class="code" href="classWTL_1_1CDCT.html#a128">Chord</a>(LPCRECT lpRect, POINT ptStart, POINT ptEnd)
01646     {
01647         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01648         return ::Chord(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, lpRect-&gt;left, lpRect-&gt;top, lpRect-&gt;right, lpRect-&gt;bottom, ptStart.x, ptStart.y, ptEnd.x, ptEnd.y);
01649     }
<a name="l01650"></a><a class="code" href="classWTL_1_1CDCT.html#a130">01650</a>     <font class="keywordtype">void</font> <a class="code" href="classWTL_1_1CDCT.html#a130">DrawFocusRect</a>(LPCRECT lpRect)
01651     {
01652         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01653         ::DrawFocusRect(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, lpRect);
01654     }
<a name="l01655"></a><a class="code" href="classWTL_1_1CDCT.html#a131">01655</a>     BOOL <a class="code" href="classWTL_1_1CDCT.html#a131">Ellipse</a>(<font class="keywordtype">int</font> x1, <font class="keywordtype">int</font> y1, <font class="keywordtype">int</font> x2, <font class="keywordtype">int</font> y2)
01656     {
01657         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01658         return ::Ellipse(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, x1, y1, x2, y2);
01659     }
<a name="l01660"></a><a class="code" href="classWTL_1_1CDCT.html#a132">01660</a>     BOOL <a class="code" href="classWTL_1_1CDCT.html#a131">Ellipse</a>(LPCRECT lpRect)
01661     {
01662         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01663         return ::Ellipse(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, lpRect-&gt;left, lpRect-&gt;top, lpRect-&gt;right, lpRect-&gt;bottom);
01664     }
<a name="l01665"></a><a class="code" href="classWTL_1_1CDCT.html#a133">01665</a>     BOOL <a class="code" href="classWTL_1_1CDCT.html#a133">Pie</a>(<font class="keywordtype">int</font> x1, <font class="keywordtype">int</font> y1, <font class="keywordtype">int</font> x2, <font class="keywordtype">int</font> y2, <font class="keywordtype">int</font> x3, <font class="keywordtype">int</font> y3, <font class="keywordtype">int</font> x4, <font class="keywordtype">int</font> y4)
01666     {
01667         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01668         return ::Pie(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, x1, y1, x2, y2, x3, y3, x4, y4);
01669     }
<a name="l01670"></a><a class="code" href="classWTL_1_1CDCT.html#a134">01670</a>     BOOL <a class="code" href="classWTL_1_1CDCT.html#a133">Pie</a>(LPCRECT lpRect, POINT ptStart, POINT ptEnd)
01671     {
01672         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01673         return ::Pie(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, lpRect-&gt;left, lpRect-&gt;top, lpRect-&gt;right, lpRect-&gt;bottom, ptStart.x, ptStart.y, ptEnd.x, ptEnd.y);
01674     }
<a name="l01675"></a><a class="code" href="classWTL_1_1CDCT.html#a135">01675</a>     BOOL <a class="code" href="classWTL_1_1CDCT.html#a135">Polygon</a>(LPPOINT lpPoints, <font class="keywordtype">int</font> nCount)
01676     {
01677         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01678         return ::Polygon(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, lpPoints, nCount);
01679     }
<a name="l01680"></a><a class="code" href="classWTL_1_1CDCT.html#a136">01680</a>     BOOL <a class="code" href="classWTL_1_1CDCT.html#a136">PolyPolygon</a>(LPPOINT lpPoints, LPINT lpPolyCounts, <font class="keywordtype">int</font> nCount)
01681     {
01682         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01683         return ::PolyPolygon(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, lpPoints, lpPolyCounts, nCount);
01684     }
<a name="l01685"></a><a class="code" href="classWTL_1_1CDCT.html#a137">01685</a>     BOOL <a class="code" href="classWTL_1_1CDCT.html#a137">Rectangle</a>(<font class="keywordtype">int</font> x1, <font class="keywordtype">int</font> y1, <font class="keywordtype">int</font> x2, <font class="keywordtype">int</font> y2)
01686     {
01687         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01688         return ::Rectangle(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, x1, y1, x2, y2);
01689     }
<a name="l01690"></a><a class="code" href="classWTL_1_1CDCT.html#a138">01690</a>     BOOL <a class="code" href="classWTL_1_1CDCT.html#a137">Rectangle</a>(LPCRECT lpRect)
01691     {
01692         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01693         return ::Rectangle(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, lpRect-&gt;left, lpRect-&gt;top, lpRect-&gt;right, lpRect-&gt;bottom);
01694     }
<a name="l01695"></a><a class="code" href="classWTL_1_1CDCT.html#a139">01695</a>     BOOL <a class="code" href="classWTL_1_1CDCT.html#a139">RoundRect</a>(<font class="keywordtype">int</font> x1, <font class="keywordtype">int</font> y1, <font class="keywordtype">int</font> x2, <font class="keywordtype">int</font> y2, <font class="keywordtype">int</font> x3, <font class="keywordtype">int</font> y3)
01696     {
01697         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01698         return ::RoundRect(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, x1, y1, x2, y2, x3, y3);
01699     }
<a name="l01700"></a><a class="code" href="classWTL_1_1CDCT.html#a140">01700</a>     BOOL <a class="code" href="classWTL_1_1CDCT.html#a139">RoundRect</a>(LPCRECT lpRect, POINT point)
01701     {
01702         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01703         return ::RoundRect(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, lpRect-&gt;left, lpRect-&gt;top, lpRect-&gt;right, lpRect-&gt;bottom, point.x, point.y);
01704     }
01705 
01706 <font class="comment">// Bitmap Functions</font>
<a name="l01707"></a><a class="code" href="classWTL_1_1CDCT.html#a141">01707</a>     BOOL <a class="code" href="classWTL_1_1CDCT.html#a141">PatBlt</a>(<font class="keywordtype">int</font> x, <font class="keywordtype">int</font> y, <font class="keywordtype">int</font> nWidth, <font class="keywordtype">int</font> nHeight, DWORD dwRop)
01708     {
01709         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01710         return ::PatBlt(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, x, y, nWidth, nHeight, dwRop);
01711     }
<a name="l01712"></a><a class="code" href="classWTL_1_1CDCT.html#a142">01712</a>     BOOL <a class="code" href="classWTL_1_1CDCT.html#a142">BitBlt</a>(<font class="keywordtype">int</font> x, <font class="keywordtype">int</font> y, <font class="keywordtype">int</font> nWidth, <font class="keywordtype">int</font> nHeight, HDC hSrcDC,
01713         <font class="keywordtype">int</font> xSrc, <font class="keywordtype">int</font> ySrc, DWORD dwRop)
01714     {
01715         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01716         return ::BitBlt(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, x, y, nWidth, nHeight, hSrcDC, xSrc, ySrc, dwRop);
01717     }
<a name="l01718"></a><a class="code" href="classWTL_1_1CDCT.html#a143">01718</a>     BOOL <a class="code" href="classWTL_1_1CDCT.html#a143">StretchBlt</a>(<font class="keywordtype">int</font> x, <font class="keywordtype">int</font> y, <font class="keywordtype">int</font> nWidth, <font class="keywordtype">int</font> nHeight, HDC hSrcDC, <font class="keywordtype">int</font> xSrc, <font class="keywordtype">int</font> ySrc, <font class="keywordtype">int</font> nSrcWidth, <font class="keywordtype">int</font> nSrcHeight, DWORD dwRop)
01719     {
01720         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01721         return ::StretchBlt(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, x, y, nWidth, nHeight, hSrcDC, xSrc, ySrc, nSrcWidth, nSrcHeight, dwRop);
01722     }
<a name="l01723"></a><a class="code" href="classWTL_1_1CDCT.html#a144">01723</a>     COLORREF <a class="code" href="classWTL_1_1CDCT.html#a144">GetPixel</a>(<font class="keywordtype">int</font> x, <font class="keywordtype">int</font> y)<font class="keyword"> const</font>
01724 <font class="keyword">    </font>{
01725         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01726         return ::GetPixel(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, x, y);
01727     }
<a name="l01728"></a><a class="code" href="classWTL_1_1CDCT.html#a145">01728</a>     COLORREF <a class="code" href="classWTL_1_1CDCT.html#a144">GetPixel</a>(POINT point)<font class="keyword"> const</font>
01729 <font class="keyword">    </font>{
01730         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01731         return ::GetPixel(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, point.x, point.y);
01732     }
<a name="l01733"></a><a class="code" href="classWTL_1_1CDCT.html#a146">01733</a>     COLORREF <a class="code" href="classWTL_1_1CDCT.html#a146">SetPixel</a>(<font class="keywordtype">int</font> x, <font class="keywordtype">int</font> y, COLORREF crColor)
01734     {
01735         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01736         return ::SetPixel(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, x, y, crColor);
01737     }
<a name="l01738"></a><a class="code" href="classWTL_1_1CDCT.html#a147">01738</a>     COLORREF <a class="code" href="classWTL_1_1CDCT.html#a146">SetPixel</a>(POINT point, COLORREF crColor)
01739     {
01740         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01741         return ::SetPixel(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, point.x, point.y, crColor);
01742     }
<a name="l01743"></a><a class="code" href="classWTL_1_1CDCT.html#a148">01743</a>     BOOL <a class="code" href="classWTL_1_1CDCT.html#a148">FloodFill</a>(<font class="keywordtype">int</font> x, <font class="keywordtype">int</font> y, COLORREF crColor)
01744     {
01745         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01746         return ::FloodFill(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, x, y, crColor);
01747     }
<a name="l01748"></a><a class="code" href="classWTL_1_1CDCT.html#a149">01748</a>     BOOL <a class="code" href="classWTL_1_1CDCT.html#a149">ExtFloodFill</a>(<font class="keywordtype">int</font> x, <font class="keywordtype">int</font> y, COLORREF crColor, UINT nFillType)
01749     {
01750         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01751         return ::ExtFloodFill(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, x, y, crColor, nFillType);
01752     }
<a name="l01753"></a><a class="code" href="classWTL_1_1CDCT.html#a150">01753</a>     BOOL <a class="code" href="classWTL_1_1CDCT.html#a150">MaskBlt</a>(<font class="keywordtype">int</font> x, <font class="keywordtype">int</font> y, <font class="keywordtype">int</font> nWidth, <font class="keywordtype">int</font> nHeight, HDC hSrcDC, <font class="keywordtype">int</font> xSrc, <font class="keywordtype">int</font> ySrc, HBITMAP hMaskBitmap, <font class="keywordtype">int</font> xMask, <font class="keywordtype">int</font> yMask, DWORD dwRop)
01754     {
01755         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01756         return ::MaskBlt(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, x, y, nWidth, nHeight, hSrcDC, xSrc, ySrc, hMaskBitmap, xMask, yMask, dwRop);
01757     }
<a name="l01758"></a><a class="code" href="classWTL_1_1CDCT.html#a151">01758</a>     BOOL <a class="code" href="classWTL_1_1CDCT.html#a151">PlgBlt</a>(LPPOINT lpPoint, HDC hSrcDC, <font class="keywordtype">int</font> xSrc, <font class="keywordtype">int</font> ySrc, <font class="keywordtype">int</font> nWidth, <font class="keywordtype">int</font> nHeight, HBITMAP hMaskBitmap, <font class="keywordtype">int</font> xMask, <font class="keywordtype">int</font> yMask)
01759     {
01760         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01761         return ::PlgBlt(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, lpPoint, hSrcDC, xSrc, ySrc, nWidth, nHeight, hMaskBitmap, xMask, yMask);
01762     }
<a name="l01763"></a><a class="code" href="classWTL_1_1CDCT.html#a152">01763</a>     BOOL <a class="code" href="classWTL_1_1CDCT.html#a152">SetPixelV</a>(<font class="keywordtype">int</font> x, <font class="keywordtype">int</font> y, COLORREF crColor)
01764     {
01765         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01766         return ::SetPixelV(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, x, y, crColor);
01767     }
<a name="l01768"></a><a class="code" href="classWTL_1_1CDCT.html#a153">01768</a>     BOOL <a class="code" href="classWTL_1_1CDCT.html#a152">SetPixelV</a>(POINT point, COLORREF crColor)
01769     {
01770         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01771         return ::SetPixelV(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, point.x, point.y, crColor);
01772     }
01773 
01774 <font class="preprocessor">#ifndef _ATL_NO_MSIMG</font>
<a name="l01775"></a><a class="code" href="classWTL_1_1CDCT.html#a154">01775</a> <font class="preprocessor"></font>    BOOL <a class="code" href="classWTL_1_1CDCT.html#a154">AlphaBlend</a>(<font class="keywordtype">int</font> x, <font class="keywordtype">int</font> y, <font class="keywordtype">int</font> nWidth, <font class="keywordtype">int</font> nHeight, HDC hSrcDC, <font class="keywordtype">int</font> xSrc, <font class="keywordtype">int</font> ySrc, <font class="keywordtype">int</font> nSrcWidth, <font class="keywordtype">int</font> nSrcHeight, BLENDFUNCTION bf)
01776     {
01777         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01778         return ::AlphaBlend(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, x, y, nWidth, nHeight, hSrcDC, xSrc, ySrc, nSrcWidth, nSrcHeight, bf);
01779     }
<a name="l01780"></a><a class="code" href="classWTL_1_1CDCT.html#a155">01780</a>     BOOL <a class="code" href="classWTL_1_1CDCT.html#a155">TransparentBlt</a>(<font class="keywordtype">int</font> x, <font class="keywordtype">int</font> y, <font class="keywordtype">int</font> nWidth, <font class="keywordtype">int</font> nHeight, HDC hSrcDC, <font class="keywordtype">int</font> xSrc, <font class="keywordtype">int</font> ySrc, <font class="keywordtype">int</font> nSrcWidth, <font class="keywordtype">int</font> nSrcHeight, UINT crTransparent)
01781     {
01782         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01783         return ::TransparentBlt(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, x, y, nWidth, nHeight, hSrcDC, xSrc, ySrc, nSrcWidth, nSrcHeight, crTransparent);
01784     }
<a name="l01785"></a><a class="code" href="classWTL_1_1CDCT.html#a156">01785</a>     BOOL <a class="code" href="classWTL_1_1CDCT.html#a156">GradientFill</a>(<font class="keyword">const</font> PTRIVERTEX pVertices, DWORD nVertices, <font class="keywordtype">void</font>* pMeshElements, DWORD nMeshElements, DWORD dwMode)
01786     {
01787         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01788         return ::GradientFill(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, pVertices, nVertices, pMeshElements, nMeshElements, dwMode);
01789     }
01790 <font class="preprocessor">#endif </font>
01791 <font class="preprocessor"></font>
01792 <font class="preprocessor"></font><font class="comment">// Extra bitmap functions</font>
01793     <font class="comment">// Helper function for painting a disabled toolbar or menu bitmap</font>
01794     <font class="comment">// This function can take either an HBITMAP (for SS) or a DC with </font>
01795     <font class="comment">//           the bitmap already painted (for cmdbar)</font>
<a name="l01796"></a><a class="code" href="classWTL_1_1CDCT.html#a157">01796</a>     BOOL <a class="code" href="classWTL_1_1CDCT.html#a157">DitherBlt</a>(<font class="keywordtype">int</font> x, <font class="keywordtype">int</font> y, <font class="keywordtype">int</font> nWidth, <font class="keywordtype">int</font> nHeight, HDC hSrcDC, HBITMAP hBitmap, <font class="keywordtype">int</font> xSrc, <font class="keywordtype">int</font> ySrc,
01797             HBRUSH hBrushBackground = ::GetSysColorBrush(COLOR_3DFACE),
01798             HBRUSH hBrush3DEffect = ::GetSysColorBrush(COLOR_3DHILIGHT),
01799             HBRUSH hBrushDisabledImage = ::GetSysColorBrush(COLOR_3DSHADOW))
01800     {
01801         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL || hBitmap != NULL);
01802         ATLASSERT(nWidth &gt; 0 &amp;&amp; nHeight &gt; 0);
01803         
01804         <font class="comment">// Create a generic DC for all BitBlts</font>
01805         <a class="code" href="namespaceWTL.html#a47">CDCHandle</a> dc = (hSrcDC != NULL) ? hSrcDC : ::CreateCompatibleDC(m_hDC);
01806         ATLASSERT(dc.m_hDC != NULL);
01807         <font class="keywordflow">if</font>(dc.m_hDC == NULL)
01808             <font class="keywordflow">return</font> FALSE;
01809         
01810         <font class="comment">// Create a DC for the monochrome DIB section</font>
01811         <a class="code" href="namespaceWTL.html#a48">CDC</a> dcBW = ::CreateCompatibleDC(m_hDC);
01812         ATLASSERT(dcBW.m_hDC != NULL);
01813         <font class="keywordflow">if</font>(dcBW.m_hDC == NULL)
01814         {
01815             <font class="keywordflow">if</font>(hSrcDC == NULL)
01816                 dc.DeleteDC();
01817             <font class="keywordflow">return</font> FALSE;
01818         }
01819 
01820         <font class="comment">// Create the monochrome DIB section with a black and white palette</font>
01821         <font class="keyword">struct </font>RGBBWBITMAPINFO
01822         {
01823             BITMAPINFOHEADER bmiHeader; 
01824             RGBQUAD bmiColors[2]; 
01825         };
01826 
01827         RGBBWBITMAPINFO rgbBWBitmapInfo = 
01828         {
01829             { <font class="keyword">sizeof</font>(BITMAPINFOHEADER), nWidth, nHeight, 1, 1, BI_RGB, 0, 0, 0, 0, 0 },
01830             { { 0x00, 0x00, 0x00, 0x00 }, { 0xFF, 0xFF, 0xFF, 0x00 } }
01831         };
01832 
01833         VOID* pbitsBW;
01834         CBitmap bmpBW = ::CreateDIBSection(dcBW, (LPBITMAPINFO)&amp;rgbBWBitmapInfo, DIB_RGB_COLORS, &amp;pbitsBW, NULL, 0);
01835         ATLASSERT(bmpBW.m_hBitmap != NULL);
01836         <font class="keywordflow">if</font>(bmpBW.m_hBitmap == NULL)
01837         {
01838             <font class="keywordflow">if</font>(hSrcDC == NULL)
01839                 dc.DeleteDC();
01840             <font class="keywordflow">return</font> FALSE;
01841         }
01842         
01843         <font class="comment">// Attach the monochrome DIB section and the bitmap to the DCs</font>
01844         HBITMAP hbmOldBW = dcBW.SelectBitmap(bmpBW);
01845         HBITMAP hbmOldDC = NULL;
01846         <font class="keywordflow">if</font>(hBitmap != NULL)
01847             hbmOldDC = dc.SelectBitmap(hBitmap);
01848 
01849         <font class="comment">// Block: Dark gray removal: we want (128, 128, 128) pixels to become black and not white</font>
01850         {
01851             <a class="code" href="namespaceWTL.html#a48">CDC</a> dcTemp1 = ::CreateCompatibleDC(m_hDC);
01852             <a class="code" href="namespaceWTL.html#a48">CDC</a> dcTemp2 = ::CreateCompatibleDC(m_hDC);
01853             CBitmap bmpTemp1;
01854             bmpTemp1.<a class="code" href="classWTL_1_1CBitmapT.html#a12">CreateCompatibleBitmap</a>(dc, nWidth, nHeight);
01855             CBitmap bmpTemp2;
01856             bmpTemp2.<a class="code" href="classWTL_1_1CBitmapT.html#a10">CreateBitmap</a>(nWidth, nHeight, 1, 1, NULL);
01857             HBITMAP hOldBmp1 = dcTemp1.SelectBitmap(bmpTemp1);
01858             HBITMAP hOldBmp2 = dcTemp2.SelectBitmap(bmpTemp2);
01859             <font class="comment">// Let's copy our image, it will be altered</font>
01860             dcTemp1.BitBlt(0, 0, nWidth, nHeight, dc, xSrc, ySrc, SRCCOPY);
01861 
01862             <font class="comment">// All dark gray pixels will become white, the others black</font>
01863             dcTemp1.SetBkColor(RGB(128, 128, 128));
01864             dcTemp2.BitBlt(0, 0, nWidth, nHeight, dcTemp1, 0, 0, SRCCOPY);
01865             <font class="comment">// Do an XOR to set to black these white pixels</font>
01866             dcTemp1.BitBlt(0, 0, nWidth, nHeight, dcTemp2, 0, 0, SRCINVERT);
01867 
01868             <font class="comment">// BitBlt the bitmap into the monochrome DIB section</font>
01869             <font class="comment">// The DIB section will do a true monochrome conversion</font>
01870             <font class="comment">// The magenta background being closer to white will become white</font>
01871             dcBW.BitBlt(0, 0, nWidth, nHeight, dcTemp1, 0, 0, SRCCOPY);
01872 
01873             <font class="comment">// Cleanup</font>
01874             dcTemp1.SelectBitmap(hOldBmp1);
01875             dcTemp2.SelectBitmap(hOldBmp2);
01876         }
01877         
01878         <font class="comment">// Paint the destination rectangle using hBrushBackground</font>
01879         RECT rc = { x, y, x + nWidth, y + nHeight };
01880         <a class="code" href="classWTL_1_1CDCT.html#a116">FillRect</a>(&amp;rc, hBrushBackground);
01881 
01882         <font class="comment">// BitBlt the black bits in the monochrome bitmap into hBrush3DEffect color in the destination DC</font>
01883         <font class="comment">// The magic ROP comes from the Charles Petzold's book</font>
01884         HBRUSH hOldBrush = <a class="code" href="classWTL_1_1CDCT.html#a27">SelectBrush</a>(hBrush3DEffect);
01885         <a class="code" href="classWTL_1_1CDCT.html#a142">BitBlt</a>(x + 1, y + 1, nWidth, nHeight, dcBW, 0, 0, 0xB8074A);
01886 
01887         <font class="comment">// BitBlt the black bits in the monochrome bitmap into hBrushDisabledImage color in the destination DC</font>
01888         <a class="code" href="classWTL_1_1CDCT.html#a27">SelectBrush</a>(hBrushDisabledImage);
01889         <a class="code" href="classWTL_1_1CDCT.html#a142">BitBlt</a>(x, y, nWidth, nHeight, dcBW, 0, 0, 0xB8074A);
01890 
01891         <a class="code" href="classWTL_1_1CDCT.html#a27">SelectBrush</a>(hOldBrush);
01892         dcBW.SelectBitmap(hbmOldBW);
01893         dc.SelectBitmap(hbmOldDC);
01894 
01895         <font class="keywordflow">if</font>(hSrcDC == NULL)
01896             dc.DeleteDC();
01897 
01898         <font class="keywordflow">return</font> TRUE;
01899     }
01900 
01901 <font class="comment">// Text Functions</font>
<a name="l01902"></a><a class="code" href="classWTL_1_1CDCT.html#a158">01902</a>     BOOL <a class="code" href="classWTL_1_1CDCT.html#a158">TextOut</a>(<font class="keywordtype">int</font> x, <font class="keywordtype">int</font> y, LPCTSTR lpszString, <font class="keywordtype">int</font> nCount = -1)
01903     {
01904         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01905         <font class="keywordflow">if</font>(nCount == -1)
01906             nCount = lstrlen(lpszString);
01907         return ::TextOut(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, x, y, lpszString, nCount);
01908     }
<a name="l01909"></a><a class="code" href="classWTL_1_1CDCT.html#a159">01909</a>     BOOL <a class="code" href="classWTL_1_1CDCT.html#a159">ExtTextOut</a>(<font class="keywordtype">int</font> x, <font class="keywordtype">int</font> y, UINT nOptions, LPCRECT lpRect, LPCTSTR lpszString, UINT nCount = -1, LPINT lpDxWidths = NULL)
01910     {
01911         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01912         <font class="keywordflow">if</font>(nCount == -1)
01913             nCount = lstrlen(lpszString);
01914         return ::ExtTextOut(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, x, y, nOptions, lpRect, lpszString, nCount, lpDxWidths);
01915     }
<a name="l01916"></a><a class="code" href="classWTL_1_1CDCT.html#a160">01916</a>     SIZE <a class="code" href="classWTL_1_1CDCT.html#a160">TabbedTextOut</a>(<font class="keywordtype">int</font> x, <font class="keywordtype">int</font> y, LPCTSTR lpszString, <font class="keywordtype">int</font> nCount = -1, <font class="keywordtype">int</font> nTabPositions = 0, LPINT lpnTabStopPositions = NULL, <font class="keywordtype">int</font> nTabOrigin = 0)
01917     {
01918         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01919         <font class="keywordflow">if</font>(nCount == -1)
01920             nCount = lstrlen(lpszString);
01921         LONG lRes = ::TabbedTextOut(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, x, y, lpszString, nCount, nTabPositions, lpnTabStopPositions, nTabOrigin);
01922         SIZE size = { <a class="code" href="atlapp_8h.html#a28">GET_X_LPARAM</a>(lRes), <a class="code" href="atlapp_8h.html#a29">GET_Y_LPARAM</a>(lRes) };
01923         <font class="keywordflow">return</font> size;
01924     }
<a name="l01925"></a><a class="code" href="classWTL_1_1CDCT.html#a161">01925</a>     <font class="keywordtype">int</font> <a class="code" href="classWTL_1_1CDCT.html#a161">DrawText</a>(LPCTSTR lpstrText, <font class="keywordtype">int</font> cchText, LPRECT lpRect, UINT uFormat)
01926     {
01927         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01928         return ::DrawText(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, lpstrText, cchText, lpRect, uFormat);
01929     }
<a name="l01930"></a><a class="code" href="classWTL_1_1CDCT.html#a162">01930</a>     <font class="keywordtype">int</font> <a class="code" href="classWTL_1_1CDCT.html#a162">DrawTextEx</a>(LPTSTR lpstrText, <font class="keywordtype">int</font> cchText, LPRECT lpRect, UINT uFormat, LPDRAWTEXTPARAMS lpDTParams = NULL)
01931     {
01932         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01933         return ::DrawTextEx(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, lpstrText, cchText, lpRect, uFormat, lpDTParams);
01934     }
01935 <font class="preprocessor">#if (_WIN32_WINNT &gt;= 0x0501)</font>
<a name="l01936"></a><a class="code" href="classWTL_1_1CDCT.html#a163">01936</a> <font class="preprocessor"></font>    <font class="keywordtype">int</font> <a class="code" href="classWTL_1_1CDCT.html#a163">DrawShadowText</a>(LPCWSTR lpstrText, <font class="keywordtype">int</font> cchText, LPRECT lpRect, DWORD dwFlags, COLORREF clrText, COLORREF clrShadow, <font class="keywordtype">int</font> xOffset, <font class="keywordtype">int</font> yOffset)
01937     {
01938         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01939         <font class="comment">// This function is present only if comctl32.dll version 6 is loaded;</font>
01940         <font class="comment">// we use LoadLibrary/GetProcAddress to allow apps compiled with</font>
01941         <font class="comment">// _WIN32_WINNT &gt;= 0x0501 to run on older Windows/CommCtrl</font>
01942         <font class="keywordtype">int</font> nRet = 0;
01943         HMODULE hCommCtrlDLL = ::LoadLibrary(_T(<font class="stringliteral">"comctl32.dll"</font>));
01944         ATLASSERT(hCommCtrlDLL != NULL);
01945         <font class="keywordflow">if</font>(hCommCtrlDLL != NULL)
01946         {
01947             <font class="keyword">typedef</font> int (WINAPI *PFN_DrawShadowText)(HDC hDC, LPCWSTR lpstrText, UINT cchText, LPRECT lpRect, DWORD dwFlags, COLORREF clrText, COLORREF clrShadow, <font class="keywordtype">int</font> xOffset, <font class="keywordtype">int</font> yOffset);
01948             PFN_DrawShadowText pfnDrawShadowText = (PFN_DrawShadowText)::GetProcAddress(hCommCtrlDLL, <font class="stringliteral">"DrawShadowText"</font>);
01949             ATLASSERT(pfnDrawShadowText != NULL);   <font class="comment">// this function requires CommCtrl6</font>
01950             <font class="keywordflow">if</font>(pfnDrawShadowText != NULL)
01951                 nRet = pfnDrawShadowText(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, lpstrText, cchText, lpRect, dwFlags, clrText, clrShadow, xOffset, yOffset);
01952             ::FreeLibrary(hCommCtrlDLL);
01953         }
01954         <font class="keywordflow">return</font> nRet;
01955     }
01956 <font class="preprocessor">#endif //(_WIN32_WINNT &gt;= 0x0501)</font>
<a name="l01957"></a><a class="code" href="classWTL_1_1CDCT.html#a164">01957</a> <font class="preprocessor"></font>    BOOL <a class="code" href="classWTL_1_1CDCT.html#a164">GetTextExtent</a>(LPCTSTR lpszString, <font class="keywordtype">int</font> nCount, LPSIZE lpSize)<font class="keyword"> const</font>
01958 <font class="keyword">    </font>{
01959         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01960         <font class="keywordflow">if</font>(nCount == -1)
01961             nCount = lstrlen(lpszString);
01962         return ::GetTextExtentPoint32(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, lpszString, nCount, lpSize);
01963     }
<a name="l01964"></a><a class="code" href="classWTL_1_1CDCT.html#a165">01964</a>     DWORD <a class="code" href="classWTL_1_1CDCT.html#a165">GetTabbedTextExtent</a>(LPCTSTR lpszString, <font class="keywordtype">int</font> nCount = -1, <font class="keywordtype">int</font> nTabPositions = 0, LPINT lpnTabStopPositions = NULL)<font class="keyword"> const</font>
01965 <font class="keyword">    </font>{
01966         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01967         <font class="keywordflow">if</font>(nCount == -1)
01968             nCount = lstrlen(lpszString);
01969         return ::GetTabbedTextExtent(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, lpszString, nCount, nTabPositions, lpnTabStopPositions);
01970     }
<a name="l01971"></a><a class="code" href="classWTL_1_1CDCT.html#a166">01971</a>     BOOL <a class="code" href="classWTL_1_1CDCT.html#a166">GrayString</a>(HBRUSH hBrush, BOOL (CALLBACK* lpfnOutput)(HDC, LPARAM, <font class="keywordtype">int</font>), LPARAM lpData, <font class="keywordtype">int</font> nCount, <font class="keywordtype">int</font> x, <font class="keywordtype">int</font> y, <font class="keywordtype">int</font> nWidth, <font class="keywordtype">int</font> nHeight)
01972     {
01973         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01974         return ::GrayString(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, hBrush, (GRAYSTRINGPROC)lpfnOutput, lpData, nCount, x, y, nWidth, nHeight);
01975     }
<a name="l01976"></a><a class="code" href="classWTL_1_1CDCT.html#a167">01976</a>     UINT <a class="code" href="classWTL_1_1CDCT.html#a167">GetTextAlign</a>()<font class="keyword"> const</font>
01977 <font class="keyword">    </font>{
01978         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01979         return ::GetTextAlign(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>);
01980     }
<a name="l01981"></a><a class="code" href="classWTL_1_1CDCT.html#a168">01981</a>     UINT <a class="code" href="classWTL_1_1CDCT.html#a168">SetTextAlign</a>(UINT nFlags)
01982     {
01983         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01984         return ::SetTextAlign(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, nFlags);
01985     }
<a name="l01986"></a><a class="code" href="classWTL_1_1CDCT.html#a169">01986</a>     <font class="keywordtype">int</font> <a class="code" href="classWTL_1_1CDCT.html#a169">GetTextFace</a>(LPTSTR lpszFacename, <font class="keywordtype">int</font> nCount)<font class="keyword"> const</font>
01987 <font class="keyword">    </font>{
01988         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01989         return ::GetTextFace(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, nCount, lpszFacename);
01990     }
<a name="l01991"></a><a class="code" href="classWTL_1_1CDCT.html#a170">01991</a>     <font class="keywordtype">int</font> <a class="code" href="classWTL_1_1CDCT.html#a170">GetTextFaceLen</a>()<font class="keyword"> const</font>
01992 <font class="keyword">    </font>{
01993         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
01994         return ::GetTextFace(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, 0, NULL);
01995     }
01996 <font class="preprocessor">#ifndef _ATL_NO_COM</font>
01997 <font class="preprocessor"></font><font class="preprocessor">#ifdef _OLEAUTO_H_</font>
01998 <font class="preprocessor"></font>    BOOL <a class="code" href="classWTL_1_1CDCT.html#a169">GetTextFace</a>(BSTR&amp; bstrFace)<font class="keyword"> const</font>
01999 <font class="keyword">    </font>{
02000         USES_CONVERSION;
02001         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
02002         ATLASSERT(bstrFace == NULL);
02003 
02004         <font class="keywordtype">int</font> nLen = <a class="code" href="classWTL_1_1CDCT.html#a170">GetTextFaceLen</a>();
02005         <font class="keywordflow">if</font>(nLen == 0)
02006             <font class="keywordflow">return</font> FALSE;
02007 
02008         LPTSTR lpszText = (LPTSTR)_alloca(nLen * <font class="keyword">sizeof</font>(TCHAR));
02009 
02010         <font class="keywordflow">if</font>(!<a class="code" href="classWTL_1_1CDCT.html#a169">GetTextFace</a>(lpszText, nLen))
02011             <font class="keywordflow">return</font> FALSE;
02012 
02013         bstrFace = ::SysAllocString(T2OLE(lpszText));
02014         <font class="keywordflow">return</font> (bstrFace != NULL) ? TRUE : FALSE;
02015     }
02016 <font class="preprocessor">#endif</font>
02017 <font class="preprocessor"></font><font class="preprocessor">#endif </font>
02018 <font class="preprocessor">#if defined(_WTL_USE_CSTRING) || defined(__ATLSTR_H__)</font>
02019 <font class="preprocessor"></font>    <font class="keywordtype">int</font> <a class="code" href="classWTL_1_1CDCT.html#a169">GetTextFace</a>(CString&amp; strFace)<font class="keyword"> const</font>
02020 <font class="keyword">    </font>{
02021         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
02022 
02023         <font class="keywordtype">int</font> nLen = <a class="code" href="classWTL_1_1CDCT.html#a170">GetTextFaceLen</a>();
02024         <font class="keywordflow">if</font>(nLen == 0)
02025             <font class="keywordflow">return</font> 0;
02026 
02027         LPTSTR lpstr = strFace.GetBufferSetLength(nLen);
02028         <font class="keywordflow">if</font>(lpstr == NULL)
02029             <font class="keywordflow">return</font> 0;
02030         <font class="keywordtype">int</font> nRet = <a class="code" href="classWTL_1_1CDCT.html#a169">GetTextFace</a>(lpstr, nLen);
02031         strFace.ReleaseBuffer();
02032         <font class="keywordflow">return</font> nRet;
02033     }
02034 <font class="preprocessor">#endif //defined(_WTL_USE_CSTRING) || defined(__ATLSTR_H__)</font>
<a name="l02035"></a><a class="code" href="classWTL_1_1CDCT.html#a171">02035</a> <font class="preprocessor"></font>    BOOL <a class="code" href="classWTL_1_1CDCT.html#a171">GetTextMetrics</a>(LPTEXTMETRIC lpMetrics)<font class="keyword"> const</font>
02036 <font class="keyword">    </font>{
02037         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
02038         return ::GetTextMetrics(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, lpMetrics);
02039     }
<a name="l02040"></a><a class="code" href="classWTL_1_1CDCT.html#a172">02040</a>     <font class="keywordtype">int</font> <a class="code" href="classWTL_1_1CDCT.html#a172">SetTextJustification</a>(<font class="keywordtype">int</font> nBreakExtra, <font class="keywordtype">int</font> nBreakCount)
02041     {
02042         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
02043         return ::SetTextJustification(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, nBreakExtra, nBreakCount);
02044     }
<a name="l02045"></a><a class="code" href="classWTL_1_1CDCT.html#a173">02045</a>     <font class="keywordtype">int</font> <a class="code" href="classWTL_1_1CDCT.html#a173">GetTextCharacterExtra</a>()<font class="keyword"> const</font>
02046 <font class="keyword">    </font>{
02047         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
02048         return ::GetTextCharacterExtra(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>);
02049     }
<a name="l02050"></a><a class="code" href="classWTL_1_1CDCT.html#a174">02050</a>     <font class="keywordtype">int</font> <a class="code" href="classWTL_1_1CDCT.html#a174">SetTextCharacterExtra</a>(<font class="keywordtype">int</font> nCharExtra)
02051     {
02052         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
02053         return ::SetTextCharacterExtra(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, nCharExtra);
02054     }
02055 
02056 <font class="comment">// Advanced Drawing</font>
<a name="l02057"></a><a class="code" href="classWTL_1_1CDCT.html#a175">02057</a>     BOOL <a class="code" href="classWTL_1_1CDCT.html#a175">DrawEdge</a>(LPRECT lpRect, UINT nEdge, UINT nFlags)
02058     {
02059         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
02060         return ::DrawEdge(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, lpRect, nEdge, nFlags);
02061     }
<a name="l02062"></a><a class="code" href="classWTL_1_1CDCT.html#a176">02062</a>     BOOL <a class="code" href="classWTL_1_1CDCT.html#a176">DrawFrameControl</a>(LPRECT lpRect, UINT nType, UINT nState)
02063     {
02064         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
02065         return ::DrawFrameControl(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, lpRect, nType, nState);
02066     }
02067 
02068 <font class="comment">// Scrolling Functions</font>
<a name="l02069"></a><a class="code" href="classWTL_1_1CDCT.html#a177">02069</a>     BOOL <a class="code" href="classWTL_1_1CDCT.html#a177">ScrollDC</a>(<font class="keywordtype">int</font> dx, <font class="keywordtype">int</font> dy, LPCRECT lpRectScroll, LPCRECT lpRectClip, HRGN hRgnUpdate, LPRECT lpRectUpdate)
02070     {
02071         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
02072         return ::ScrollDC(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, dx, dy, lpRectScroll, lpRectClip, hRgnUpdate, lpRectUpdate);
02073     }
02074 
02075 <font class="comment">// Font Functions</font>
<a name="l02076"></a><a class="code" href="classWTL_1_1CDCT.html#a178">02076</a>     BOOL <a class="code" href="classWTL_1_1CDCT.html#a178">GetCharWidth</a>(UINT nFirstChar, UINT nLastChar, LPINT lpBuffer)<font class="keyword"> const</font>
02077 <font class="keyword">    </font>{
02078         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
02079         return ::GetCharWidth(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, nFirstChar, nLastChar, lpBuffer);
02080     }
02081     <font class="comment">// GetCharWidth32 is not supported under Win9x</font>
<a name="l02082"></a><a class="code" href="classWTL_1_1CDCT.html#a179">02082</a>     BOOL <a class="code" href="classWTL_1_1CDCT.html#a179">GetCharWidth32</a>(UINT nFirstChar, UINT nLastChar, LPINT lpBuffer)<font class="keyword"> const</font>
02083 <font class="keyword">    </font>{
02084         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
02085         return ::GetCharWidth32(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, nFirstChar, nLastChar, lpBuffer);
02086     }
<a name="l02087"></a><a class="code" href="classWTL_1_1CDCT.html#a180">02087</a>     DWORD <a class="code" href="classWTL_1_1CDCT.html#a180">SetMapperFlags</a>(DWORD dwFlag)
02088     {
02089         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
02090         return ::SetMapperFlags(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, dwFlag);
02091     }
<a name="l02092"></a><a class="code" href="classWTL_1_1CDCT.html#a181">02092</a>     BOOL <a class="code" href="classWTL_1_1CDCT.html#a181">GetAspectRatioFilter</a>(LPSIZE lpSize)<font class="keyword"> const</font>
02093 <font class="keyword">    </font>{
02094         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
02095         return ::GetAspectRatioFilterEx(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, lpSize);
02096     }
02097 
<a name="l02098"></a><a class="code" href="classWTL_1_1CDCT.html#a182">02098</a>     BOOL <a class="code" href="classWTL_1_1CDCT.html#a182">GetCharABCWidths</a>(UINT nFirstChar, UINT nLastChar, LPABC lpabc)<font class="keyword"> const</font>
02099 <font class="keyword">    </font>{
02100         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
02101         return ::GetCharABCWidths(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, nFirstChar, nLastChar, lpabc);
02102     }
<a name="l02103"></a><a class="code" href="classWTL_1_1CDCT.html#a183">02103</a>     DWORD <a class="code" href="classWTL_1_1CDCT.html#a183">GetFontData</a>(DWORD dwTable, DWORD dwOffset, LPVOID lpData, DWORD cbData)<font class="keyword"> const</font>
02104 <font class="keyword">    </font>{
02105         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
02106         return ::GetFontData(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, dwTable, dwOffset, lpData, cbData);
02107     }
<a name="l02108"></a><a class="code" href="classWTL_1_1CDCT.html#a184">02108</a>     <font class="keywordtype">int</font> <a class="code" href="classWTL_1_1CDCT.html#a184">GetKerningPairs</a>(<font class="keywordtype">int</font> nPairs, LPKERNINGPAIR lpkrnpair)<font class="keyword"> const</font>
02109 <font class="keyword">    </font>{
02110         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
02111         return ::GetKerningPairs(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, nPairs, lpkrnpair);
02112     }
<a name="l02113"></a><a class="code" href="classWTL_1_1CDCT.html#a185">02113</a>     UINT <a class="code" href="classWTL_1_1CDCT.html#a185">GetOutlineTextMetrics</a>(UINT cbData, LPOUTLINETEXTMETRIC lpotm)<font class="keyword"> const</font>
02114 <font class="keyword">    </font>{
02115         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
02116         return ::GetOutlineTextMetrics(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, cbData, lpotm);
02117     }
<a name="l02118"></a><a class="code" href="classWTL_1_1CDCT.html#a186">02118</a>     DWORD <a class="code" href="classWTL_1_1CDCT.html#a186">GetGlyphOutline</a>(UINT nChar, UINT nFormat, LPGLYPHMETRICS lpgm, DWORD cbBuffer, LPVOID lpBuffer, <font class="keyword">const</font> MAT2* lpmat2)<font class="keyword"> const</font>
02119 <font class="keyword">    </font>{
02120         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
02121         return ::GetGlyphOutline(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, nChar, nFormat, lpgm, cbBuffer, lpBuffer, lpmat2);
02122     }
02123 
<a name="l02124"></a><a class="code" href="classWTL_1_1CDCT.html#a187">02124</a>     BOOL <a class="code" href="classWTL_1_1CDCT.html#a182">GetCharABCWidths</a>(UINT nFirstChar, UINT nLastChar, LPABCFLOAT lpABCF)<font class="keyword"> const</font>
02125 <font class="keyword">    </font>{
02126         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
02127         return ::GetCharABCWidthsFloat(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, nFirstChar, nLastChar, lpABCF);
02128     }
<a name="l02129"></a><a class="code" href="classWTL_1_1CDCT.html#a188">02129</a>     BOOL <a class="code" href="classWTL_1_1CDCT.html#a178">GetCharWidth</a>(UINT nFirstChar, UINT nLastChar, <font class="keywordtype">float</font>* lpFloatBuffer)<font class="keyword"> const</font>
02130 <font class="keyword">    </font>{
02131         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
02132         return ::GetCharWidthFloat(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, nFirstChar, nLastChar, lpFloatBuffer);
02133     }
02134 
02135 <font class="comment">// Printer/Device Escape Functions</font>
<a name="l02136"></a><a class="code" href="classWTL_1_1CDCT.html#a189">02136</a>     <font class="keywordtype">int</font> <a class="code" href="classWTL_1_1CDCT.html#a189">Escape</a>(<font class="keywordtype">int</font> nEscape, <font class="keywordtype">int</font> nCount, LPCSTR lpszInData, LPVOID lpOutData)
02137     {
02138         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
02139         return ::Escape(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, nEscape, nCount, lpszInData, lpOutData);
02140     }
<a name="l02141"></a><a class="code" href="classWTL_1_1CDCT.html#a190">02141</a>     <font class="keywordtype">int</font> <a class="code" href="classWTL_1_1CDCT.html#a189">Escape</a>(<font class="keywordtype">int</font> nEscape, <font class="keywordtype">int</font> nInputSize, LPCSTR lpszInputData,
02142         <font class="keywordtype">int</font> nOutputSize, LPSTR lpszOutputData)
02143     {
02144         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
02145         return ::ExtEscape(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, nEscape, nInputSize, lpszInputData, nOutputSize, lpszOutputData);
02146     }
<a name="l02147"></a><a class="code" href="classWTL_1_1CDCT.html#a191">02147</a>     <font class="keywordtype">int</font> <a class="code" href="classWTL_1_1CDCT.html#a191">DrawEscape</a>(<font class="keywordtype">int</font> nEscape, <font class="keywordtype">int</font> nInputSize, LPCSTR lpszInputData)
02148     {
02149         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
02150         return ::DrawEscape(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, nEscape, nInputSize, lpszInputData);
02151     }
02152 
02153     <font class="comment">// Escape helpers</font>
<a name="l02154"></a><a class="code" href="classWTL_1_1CDCT.html#a192">02154</a>     <font class="keywordtype">int</font> <a class="code" href="classWTL_1_1CDCT.html#a192">StartDoc</a>(LPCTSTR lpszDocName)  <font class="comment">// old Win3.0 version</font>
02155     {
02156         DOCINFO di;
02157         memset(&amp;di, 0, <font class="keyword">sizeof</font>(DOCINFO));
02158         di.cbSize = <font class="keyword">sizeof</font>(DOCINFO);
02159         di.lpszDocName = lpszDocName;
02160         <font class="keywordflow">return</font> <a class="code" href="classWTL_1_1CDCT.html#a192">StartDoc</a>(&amp;di);
02161     }
02162 
<a name="l02163"></a><a class="code" href="classWTL_1_1CDCT.html#a193">02163</a>     <font class="keywordtype">int</font> <a class="code" href="classWTL_1_1CDCT.html#a192">StartDoc</a>(LPDOCINFO lpDocInfo)
02164     {
02165         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
02166         return ::StartDoc(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, lpDocInfo);
02167     }
<a name="l02168"></a><a class="code" href="classWTL_1_1CDCT.html#a194">02168</a>     <font class="keywordtype">int</font> <a class="code" href="classWTL_1_1CDCT.html#a194">StartPage</a>()
02169     {
02170         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
02171         return ::StartPage(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>);
02172     }
<a name="l02173"></a><a class="code" href="classWTL_1_1CDCT.html#a195">02173</a>     <font class="keywordtype">int</font> <a class="code" href="classWTL_1_1CDCT.html#a195">EndPage</a>()
02174     {
02175         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
02176         return ::EndPage(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>);
02177     }
<a name="l02178"></a><a class="code" href="classWTL_1_1CDCT.html#a196">02178</a>     <font class="keywordtype">int</font> <a class="code" href="classWTL_1_1CDCT.html#a196">SetAbortProc</a>(BOOL (CALLBACK* lpfn)(HDC, <font class="keywordtype">int</font>))
02179     {
02180         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
02181         return ::SetAbortProc(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, (ABORTPROC)lpfn);
02182     }
<a name="l02183"></a><a class="code" href="classWTL_1_1CDCT.html#a197">02183</a>     <font class="keywordtype">int</font> <a class="code" href="classWTL_1_1CDCT.html#a197">AbortDoc</a>()
02184     {
02185         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
02186         return ::AbortDoc(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>);
02187     }
<a name="l02188"></a><a class="code" href="classWTL_1_1CDCT.html#a198">02188</a>     <font class="keywordtype">int</font> <a class="code" href="classWTL_1_1CDCT.html#a198">EndDoc</a>()
02189     {
02190         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
02191         return ::EndDoc(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>);
02192     }
02193 
02194 <font class="comment">// MetaFile Functions</font>
<a name="l02195"></a><a class="code" href="classWTL_1_1CDCT.html#a199">02195</a>     BOOL <a class="code" href="classWTL_1_1CDCT.html#a199">PlayMetaFile</a>(HMETAFILE hMF)
02196     {
02197         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
02198         <font class="keywordflow">if</font>(::GetDeviceCaps(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, TECHNOLOGY) == DT_METAFILE)
02199         {
02200             <font class="comment">// playing metafile in metafile, just use core windows API</font>
02201             return ::PlayMetaFile(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, hMF);
02202         }
02203 
02204         <font class="comment">// for special playback, lParam == pDC</font>
02205         return ::EnumMetaFile(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, hMF, <a class="code" href="classWTL_1_1CDCT.html#d0">EnumMetaFileProc</a>, (LPARAM)<font class="keyword">this</font>);
02206     }
<a name="l02207"></a><a class="code" href="classWTL_1_1CDCT.html#a200">02207</a>     BOOL <a class="code" href="classWTL_1_1CDCT.html#a199">PlayMetaFile</a>(HENHMETAFILE hEnhMetaFile, LPCRECT lpBounds)
02208     {
02209         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
02210         return ::PlayEnhMetaFile(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, hEnhMetaFile, lpBounds);
02211     }
<a name="l02212"></a><a class="code" href="classWTL_1_1CDCT.html#a201">02212</a>     BOOL <a class="code" href="classWTL_1_1CDCT.html#a201">AddMetaFileComment</a>(UINT nDataSize, <font class="keyword">const</font> BYTE* pCommentData) <font class="comment">// can be used for enhanced metafiles only</font>
02213     {
02214         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
02215         return ::GdiComment(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, nDataSize, pCommentData);
02216     }
02217 
02218     <font class="comment">// Special handling for metafile playback</font>
<a name="l02219"></a><a class="code" href="classWTL_1_1CDCT.html#d0">02219</a>     <font class="keyword">static</font> <font class="keywordtype">int</font> CALLBACK <a class="code" href="classWTL_1_1CDCT.html#d0">EnumMetaFileProc</a>(HDC hDC, HANDLETABLE* pHandleTable, METARECORD* pMetaRec, <font class="keywordtype">int</font> nHandles, LPARAM lParam)
02220     {
02221         <a class="code" href="namespaceWTL.html#a47">CDCHandle</a>* pDC = (<a class="code" href="namespaceWTL.html#a47">CDCHandle</a>*)lParam;
02222 
02223         <font class="keywordflow">switch</font> (pMetaRec-&gt;rdFunction)
02224         {
02225         <font class="keywordflow">case</font> META_SETMAPMODE:
02226             pDC-&gt;SetMapMode((<font class="keywordtype">int</font>)(<font class="keywordtype">short</font>)pMetaRec-&gt;rdParm[0]);
02227             <font class="keywordflow">break</font>;
02228         <font class="keywordflow">case</font> META_SETWINDOWEXT:
02229             pDC-&gt;SetWindowExt((<font class="keywordtype">int</font>)(<font class="keywordtype">short</font>)pMetaRec-&gt;rdParm[1], (<font class="keywordtype">int</font>)(<font class="keywordtype">short</font>)pMetaRec-&gt;rdParm[0]);
02230             <font class="keywordflow">break</font>;
02231         <font class="keywordflow">case</font> META_SETWINDOWORG:
02232             pDC-&gt;SetWindowOrg((<font class="keywordtype">int</font>)(<font class="keywordtype">short</font>)pMetaRec-&gt;rdParm[1], (<font class="keywordtype">int</font>)(<font class="keywordtype">short</font>)pMetaRec-&gt;rdParm[0]);
02233             <font class="keywordflow">break</font>;
02234         <font class="keywordflow">case</font> META_SETVIEWPORTEXT:
02235             pDC-&gt;SetViewportExt((<font class="keywordtype">int</font>)(<font class="keywordtype">short</font>)pMetaRec-&gt;rdParm[1], (<font class="keywordtype">int</font>)(<font class="keywordtype">short</font>)pMetaRec-&gt;rdParm[0]);
02236             <font class="keywordflow">break</font>;
02237         <font class="keywordflow">case</font> META_SETVIEWPORTORG:
02238             pDC-&gt;SetViewportOrg((<font class="keywordtype">int</font>)(<font class="keywordtype">short</font>)pMetaRec-&gt;rdParm[1], (<font class="keywordtype">int</font>)(<font class="keywordtype">short</font>)pMetaRec-&gt;rdParm[0]);
02239             <font class="keywordflow">break</font>;
02240         <font class="keywordflow">case</font> META_SCALEWINDOWEXT:
02241             pDC-&gt;ScaleWindowExt((<font class="keywordtype">int</font>)(<font class="keywordtype">short</font>)pMetaRec-&gt;rdParm[3], (<font class="keywordtype">int</font>)(<font class="keywordtype">short</font>)pMetaRec-&gt;rdParm[2], 
02242                 (<font class="keywordtype">int</font>)(<font class="keywordtype">short</font>)pMetaRec-&gt;rdParm[1], (<font class="keywordtype">int</font>)(<font class="keywordtype">short</font>)pMetaRec-&gt;rdParm[0]);
02243             <font class="keywordflow">break</font>;
02244         <font class="keywordflow">case</font> META_SCALEVIEWPORTEXT:
02245             pDC-&gt;ScaleViewportExt((<font class="keywordtype">int</font>)(<font class="keywordtype">short</font>)pMetaRec-&gt;rdParm[3], (<font class="keywordtype">int</font>)(<font class="keywordtype">short</font>)pMetaRec-&gt;rdParm[2],
02246                 (<font class="keywordtype">int</font>)(<font class="keywordtype">short</font>)pMetaRec-&gt;rdParm[1], (<font class="keywordtype">int</font>)(<font class="keywordtype">short</font>)pMetaRec-&gt;rdParm[0]);
02247             <font class="keywordflow">break</font>;
02248         <font class="keywordflow">case</font> META_OFFSETVIEWPORTORG:
02249             pDC-&gt;OffsetViewportOrg((<font class="keywordtype">int</font>)(<font class="keywordtype">short</font>)pMetaRec-&gt;rdParm[1], (<font class="keywordtype">int</font>)(<font class="keywordtype">short</font>)pMetaRec-&gt;rdParm[0]);
02250             <font class="keywordflow">break</font>;
02251         <font class="keywordflow">case</font> META_SAVEDC:
02252             pDC-&gt;SaveDC();
02253             <font class="keywordflow">break</font>;
02254         <font class="keywordflow">case</font> META_RESTOREDC:
02255             pDC-&gt;RestoreDC((<font class="keywordtype">int</font>)(<font class="keywordtype">short</font>)pMetaRec-&gt;rdParm[0]);
02256             <font class="keywordflow">break</font>;
02257         <font class="keywordflow">case</font> META_SETBKCOLOR:
02258             pDC-&gt;SetBkColor(*(UNALIGNED COLORREF*)&amp;pMetaRec-&gt;rdParm[0]);
02259             <font class="keywordflow">break</font>;
02260         <font class="keywordflow">case</font> META_SETTEXTCOLOR:
02261             pDC-&gt;SetTextColor(*(UNALIGNED COLORREF*)&amp;pMetaRec-&gt;rdParm[0]);
02262             <font class="keywordflow">break</font>;
02263 
02264         <font class="comment">// need to watch out for SelectObject(HFONT), for custom font mapping</font>
02265         <font class="keywordflow">case</font> META_SELECTOBJECT:
02266             {
02267                 HGDIOBJ hObject = pHandleTable-&gt;objectHandle[pMetaRec-&gt;rdParm[0]];
02268                 UINT nObjType = ::GetObjectType(hObject);
02269                 <font class="keywordflow">if</font>(nObjType == 0)
02270                 {
02271                     <font class="comment">// object type is unknown, determine if it is a font</font>
02272                     HFONT hStockFont = (HFONT)::GetStockObject(SYSTEM_FONT);
02273                     HFONT hFontOld = (HFONT)::SelectObject(pDC-&gt;m_hDC, hStockFont);
02274                     HGDIOBJ hObjOld = ::SelectObject(pDC-&gt;m_hDC, hObject);
02275                     <font class="keywordflow">if</font>(hObjOld == hStockFont)
02276                     {
02277                         <font class="comment">// got the stock object back, so must be selecting a font</font>
02278                         pDC-&gt;SelectFont((HFONT)hObject);
02279                         <font class="keywordflow">break</font>;  <font class="comment">// don't play the default record</font>
02280                     }
02281                     <font class="keywordflow">else</font>
02282                     {
02283                         <font class="comment">// didn't get the stock object back, so restore everything</font>
02284                         ::SelectObject(pDC-&gt;m_hDC, hFontOld);
02285                         ::SelectObject(pDC-&gt;m_hDC, hObjOld);
02286                     }
02287                     <font class="comment">// and fall through to PlayMetaFileRecord...</font>
02288                 }
02289                 <font class="keywordflow">else</font> <font class="keywordflow">if</font>(nObjType == OBJ_FONT)
02290                 {
02291                     <font class="comment">// play back as CDCHandle::SelectFont(HFONT)</font>
02292                     pDC-&gt;SelectFont((HFONT)hObject);
02293                     <font class="keywordflow">break</font>;  <font class="comment">// don't play the default record</font>
02294                 }
02295             }
02296             <font class="comment">// fall through...</font>
02297 
02298         <font class="keywordflow">default</font>:
02299             ::PlayMetaFileRecord(hDC, pHandleTable, pMetaRec, nHandles);
02300             <font class="keywordflow">break</font>;
02301         }
02302 
02303         <font class="keywordflow">return</font> 1;
02304     }
02305 
02306 <font class="comment">// Path Functions</font>
<a name="l02307"></a><a class="code" href="classWTL_1_1CDCT.html#a202">02307</a>     BOOL <a class="code" href="classWTL_1_1CDCT.html#a202">AbortPath</a>()
02308     {
02309         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
02310         return ::AbortPath(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>);
02311     }
<a name="l02312"></a><a class="code" href="classWTL_1_1CDCT.html#a203">02312</a>     BOOL <a class="code" href="classWTL_1_1CDCT.html#a203">BeginPath</a>()
02313     {
02314         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
02315         return ::BeginPath(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>);
02316     }
<a name="l02317"></a><a class="code" href="classWTL_1_1CDCT.html#a204">02317</a>     BOOL <a class="code" href="classWTL_1_1CDCT.html#a204">CloseFigure</a>()
02318     {
02319         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
02320         return ::CloseFigure(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>);
02321     }
<a name="l02322"></a><a class="code" href="classWTL_1_1CDCT.html#a205">02322</a>     BOOL <a class="code" href="classWTL_1_1CDCT.html#a205">EndPath</a>()
02323     {
02324         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
02325         return ::EndPath(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>);
02326     }
<a name="l02327"></a><a class="code" href="classWTL_1_1CDCT.html#a206">02327</a>     BOOL <a class="code" href="classWTL_1_1CDCT.html#a206">FillPath</a>()
02328     {
02329         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
02330         return ::FillPath(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>);
02331     }
<a name="l02332"></a><a class="code" href="classWTL_1_1CDCT.html#a207">02332</a>     BOOL <a class="code" href="classWTL_1_1CDCT.html#a207">FlattenPath</a>()
02333     {
02334         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
02335         return ::FlattenPath(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>);
02336     }
<a name="l02337"></a><a class="code" href="classWTL_1_1CDCT.html#a208">02337</a>     BOOL <a class="code" href="classWTL_1_1CDCT.html#a208">StrokeAndFillPath</a>()
02338     {
02339         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
02340         return ::StrokeAndFillPath(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>);
02341     }
<a name="l02342"></a><a class="code" href="classWTL_1_1CDCT.html#a209">02342</a>     BOOL <a class="code" href="classWTL_1_1CDCT.html#a209">StrokePath</a>()
02343     {
02344         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
02345         return ::StrokePath(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>);
02346     }
<a name="l02347"></a><a class="code" href="classWTL_1_1CDCT.html#a210">02347</a>     BOOL <a class="code" href="classWTL_1_1CDCT.html#a210">WidenPath</a>()
02348     {
02349         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
02350         return ::WidenPath(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>);
02351     }
<a name="l02352"></a><a class="code" href="classWTL_1_1CDCT.html#a211">02352</a>     BOOL <a class="code" href="classWTL_1_1CDCT.html#a211">GetMiterLimit</a>(PFLOAT pfMiterLimit)<font class="keyword"> const</font>
02353 <font class="keyword">    </font>{
02354         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
02355         return ::GetMiterLimit(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, pfMiterLimit);
02356     }
<a name="l02357"></a><a class="code" href="classWTL_1_1CDCT.html#a212">02357</a>     BOOL <a class="code" href="classWTL_1_1CDCT.html#a212">SetMiterLimit</a>(<font class="keywordtype">float</font> fMiterLimit)
02358     {
02359         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
02360         return ::SetMiterLimit(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, fMiterLimit, NULL);
02361     }
<a name="l02362"></a><a class="code" href="classWTL_1_1CDCT.html#a213">02362</a>     <font class="keywordtype">int</font> <a class="code" href="classWTL_1_1CDCT.html#a213">GetPath</a>(LPPOINT lpPoints, LPBYTE lpTypes, <font class="keywordtype">int</font> nCount)<font class="keyword"> const</font>
02363 <font class="keyword">    </font>{
02364         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
02365         return ::GetPath(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, lpPoints, lpTypes, nCount);
02366     }
<a name="l02367"></a><a class="code" href="classWTL_1_1CDCT.html#a214">02367</a>     BOOL <a class="code" href="classWTL_1_1CDCT.html#a214">SelectClipPath</a>(<font class="keywordtype">int</font> nMode)
02368     {
02369         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
02370         return ::SelectClipPath(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, nMode);
02371     }
02372 
02373 <font class="comment">// Misc Helper Functions</font>
<a name="l02374"></a><a class="code" href="classWTL_1_1CDCT.html#d1">02374</a>     <font class="keyword">static</font> CBrushHandle PASCAL <a class="code" href="classWTL_1_1CDCT.html#d1">GetHalftoneBrush</a>()
02375     {
02376         HBRUSH halftoneBrush = NULL;
02377         WORD grayPattern[8];
02378         <font class="keywordflow">for</font>(<font class="keywordtype">int</font> i = 0; i &lt; 8; i++)
02379             grayPattern[i] = (WORD)(0x5555 &lt;&lt; (i &amp; 1));
02380         HBITMAP grayBitmap = CreateBitmap(8, 8, 1, 1, &amp;grayPattern);
02381         <font class="keywordflow">if</font>(grayBitmap != NULL)
02382         {
02383             halftoneBrush = ::CreatePatternBrush(grayBitmap);
02384             DeleteObject(grayBitmap);
02385         }
02386         <font class="keywordflow">return</font> <a class="code" href="namespaceWTL.html#a37">CBrushHandle</a>(halftoneBrush);
02387     }
<a name="l02388"></a><a class="code" href="classWTL_1_1CDCT.html#a215">02388</a>     <font class="keywordtype">void</font> <a class="code" href="classWTL_1_1CDCT.html#a215">DrawDragRect</a>(LPCRECT lpRect, SIZE size, LPCRECT lpRectLast, SIZE sizeLast, HBRUSH hBrush = NULL, HBRUSH hBrushLast = NULL)
02389     {
02390         <font class="comment">// first, determine the update region and select it</font>
02391         CRgn rgnOutside;
02392         rgnOutside.<a class="code" href="classWTL_1_1CRgnT.html#a8">CreateRectRgnIndirect</a>(lpRect);
02393         RECT rect = *lpRect;
02394         ::InflateRect(&amp;rect, -size.cx, -size.cy);
02395         ::IntersectRect(&amp;rect, &amp;rect, lpRect);
02396         CRgn rgnInside;
02397         rgnInside.<a class="code" href="classWTL_1_1CRgnT.html#a8">CreateRectRgnIndirect</a>(&amp;rect);
02398         CRgn rgnNew;
02399         rgnNew.<a class="code" href="classWTL_1_1CRgnT.html#a7">CreateRectRgn</a>(0, 0, 0, 0);
02400         rgnNew.CombineRgn(rgnOutside, rgnInside, RGN_XOR);
02401 
02402         HBRUSH hBrushOld = NULL;
02403         CBrush brushHalftone;
02404         <font class="keywordflow">if</font>(hBrush == NULL)
02405             brushHalftone = hBrush = CDCHandle::GetHalftoneBrush();
02406         <font class="keywordflow">if</font>(hBrushLast == NULL)
02407             hBrushLast = hBrush;
02408 
02409         CRgn rgnLast;
02410         CRgn rgnUpdate;
02411         <font class="keywordflow">if</font>(lpRectLast != NULL)
02412         {
02413             <font class="comment">// find difference between new region and old region</font>
02414             rgnLast.<a class="code" href="classWTL_1_1CRgnT.html#a7">CreateRectRgn</a>(0, 0, 0, 0);
02415             rgnOutside.SetRectRgn(lpRectLast-&gt;left, lpRectLast-&gt;top, lpRectLast-&gt;right, lpRectLast-&gt;bottom);
02416             rect = *lpRectLast;
02417             ::InflateRect(&amp;rect, -sizeLast.cx, -sizeLast.cy);
02418             ::IntersectRect(&amp;rect, &amp;rect, lpRectLast);
02419             rgnInside.SetRectRgn(rect.left, rect.top, rect.right, rect.bottom);
02420             rgnLast.CombineRgn(rgnOutside, rgnInside, RGN_XOR);
02421 
02422             <font class="comment">// only diff them if brushes are the same</font>
02423             <font class="keywordflow">if</font>(hBrush == hBrushLast)
02424             {
02425                 rgnUpdate.CreateRectRgn(0, 0, 0, 0);
02426                 rgnUpdate.CombineRgn(rgnLast, rgnNew, RGN_XOR);
02427             }
02428         }
02429         <font class="keywordflow">if</font>(hBrush != hBrushLast &amp;&amp; lpRectLast != NULL)
02430         {
02431             <font class="comment">// brushes are different -- erase old region first</font>
02432             <a class="code" href="classWTL_1_1CDCT.html#a89">SelectClipRgn</a>(rgnLast);
02433             <a class="code" href="classWTL_1_1CDCT.html#a85">GetClipBox</a>(&amp;rect);
02434             hBrushOld = <a class="code" href="classWTL_1_1CDCT.html#a27">SelectBrush</a>(hBrushLast);
02435             <a class="code" href="classWTL_1_1CDCT.html#a141">PatBlt</a>(rect.left, rect.top, rect.right - rect.left, rect.bottom - rect.top, PATINVERT);
02436             <a class="code" href="classWTL_1_1CDCT.html#a27">SelectBrush</a>(hBrushOld);
02437             hBrushOld = NULL;
02438         }
02439 
02440         <font class="comment">// draw into the update/new region</font>
02441         <a class="code" href="classWTL_1_1CDCT.html#a89">SelectClipRgn</a>(rgnUpdate.IsNull() ? rgnNew : rgnUpdate);
02442         <a class="code" href="classWTL_1_1CDCT.html#a85">GetClipBox</a>(&amp;rect);
02443         hBrushOld = <a class="code" href="classWTL_1_1CDCT.html#a27">SelectBrush</a>(hBrush);
02444         <a class="code" href="classWTL_1_1CDCT.html#a141">PatBlt</a>(rect.left, rect.top, rect.right - rect.left, rect.bottom - rect.top, PATINVERT);
02445 
02446         <font class="comment">// cleanup DC</font>
02447         <font class="keywordflow">if</font>(hBrushOld != NULL)
02448             <a class="code" href="classWTL_1_1CDCT.html#a27">SelectBrush</a>(hBrushOld);
02449         <a class="code" href="classWTL_1_1CDCT.html#a89">SelectClipRgn</a>(NULL);
02450     }
<a name="l02451"></a><a class="code" href="classWTL_1_1CDCT.html#a216">02451</a>     <font class="keywordtype">void</font> <a class="code" href="classWTL_1_1CDCT.html#a216">FillSolidRect</a>(LPCRECT lpRect, COLORREF clr)
02452     {
02453         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
02454 
02455         ::SetBkColor(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, clr);
02456         ::ExtTextOut(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, 0, 0, ETO_OPAQUE, lpRect, NULL, 0, NULL);
02457     }
<a name="l02458"></a><a class="code" href="classWTL_1_1CDCT.html#a217">02458</a>     <font class="keywordtype">void</font> <a class="code" href="classWTL_1_1CDCT.html#a216">FillSolidRect</a>(<font class="keywordtype">int</font> x, <font class="keywordtype">int</font> y, <font class="keywordtype">int</font> cx, <font class="keywordtype">int</font> cy, COLORREF clr)
02459     {
02460         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
02461 
02462         ::SetBkColor(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, clr);
02463         RECT rect = { x, y, x + cx, y + cy };
02464         ::ExtTextOut(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, 0, 0, ETO_OPAQUE, &amp;rect, NULL, 0, NULL);
02465     }
<a name="l02466"></a><a class="code" href="classWTL_1_1CDCT.html#a218">02466</a>     <font class="keywordtype">void</font> <a class="code" href="classWTL_1_1CDCT.html#a218">Draw3dRect</a>(LPCRECT lpRect, COLORREF clrTopLeft, COLORREF clrBottomRight)
02467     {
02468         <a class="code" href="classWTL_1_1CDCT.html#a218">Draw3dRect</a>(lpRect-&gt;left, lpRect-&gt;top, lpRect-&gt;right - lpRect-&gt;left,
02469             lpRect-&gt;bottom - lpRect-&gt;top, clrTopLeft, clrBottomRight);
02470     }
<a name="l02471"></a><a class="code" href="classWTL_1_1CDCT.html#a219">02471</a>     <font class="keywordtype">void</font> <a class="code" href="classWTL_1_1CDCT.html#a218">Draw3dRect</a>(<font class="keywordtype">int</font> x, <font class="keywordtype">int</font> y, <font class="keywordtype">int</font> cx, <font class="keywordtype">int</font> cy, COLORREF clrTopLeft, COLORREF clrBottomRight)
02472     {
02473         <a class="code" href="classWTL_1_1CDCT.html#a216">FillSolidRect</a>(x, y, cx - 1, 1, clrTopLeft);
02474         <a class="code" href="classWTL_1_1CDCT.html#a216">FillSolidRect</a>(x, y, 1, cy - 1, clrTopLeft);
02475         <a class="code" href="classWTL_1_1CDCT.html#a216">FillSolidRect</a>(x + cx, y, -1, cy, clrBottomRight);
02476         <a class="code" href="classWTL_1_1CDCT.html#a216">FillSolidRect</a>(x, y + cy, cx, -1, clrBottomRight);
02477     }
02478 
02479 <font class="comment">// DIB support</font>
<a name="l02480"></a><a class="code" href="classWTL_1_1CDCT.html#a220">02480</a>     <font class="keywordtype">int</font> <a class="code" href="classWTL_1_1CDCT.html#a220">SetDIBitsToDevice</a>(<font class="keywordtype">int</font> x, <font class="keywordtype">int</font> y, DWORD dwWidth, DWORD dwHeight, <font class="keywordtype">int</font> xSrc, <font class="keywordtype">int</font> ySrc, UINT uStartScan, UINT cScanLines, CONST VOID* lpvBits, CONST BITMAPINFO* lpbmi, UINT uColorUse)
02481     {
02482         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
02483         return ::SetDIBitsToDevice(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, x, y, dwWidth, dwHeight, xSrc, ySrc, uStartScan, cScanLines, lpvBits, lpbmi, uColorUse);
02484     }
<a name="l02485"></a><a class="code" href="classWTL_1_1CDCT.html#a221">02485</a>     <font class="keywordtype">int</font> <a class="code" href="classWTL_1_1CDCT.html#a221">StretchDIBits</a>(<font class="keywordtype">int</font> x, <font class="keywordtype">int</font> y, <font class="keywordtype">int</font> nWidth, <font class="keywordtype">int</font> nHeight, <font class="keywordtype">int</font> xSrc, <font class="keywordtype">int</font> ySrc, <font class="keywordtype">int</font> nSrcWidth, <font class="keywordtype">int</font> nSrcHeight, CONST VOID* lpvBits, CONST BITMAPINFO* lpbmi, UINT uColorUse, DWORD dwRop)
02486     {
02487         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
02488         return ::StretchDIBits(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, x, y, nWidth, nHeight, xSrc, ySrc, nSrcWidth, nSrcHeight, lpvBits, lpbmi, uColorUse, dwRop);
02489     }
<a name="l02490"></a><a class="code" href="classWTL_1_1CDCT.html#a222">02490</a>     UINT <a class="code" href="classWTL_1_1CDCT.html#a222">GetDIBColorTable</a>(UINT uStartIndex, UINT cEntries, RGBQUAD* pColors)<font class="keyword"> const</font>
02491 <font class="keyword">    </font>{
02492         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
02493         return ::GetDIBColorTable(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, uStartIndex, cEntries, pColors);
02494     }
<a name="l02495"></a><a class="code" href="classWTL_1_1CDCT.html#a223">02495</a>     UINT <a class="code" href="classWTL_1_1CDCT.html#a223">SetDIBColorTable</a>(UINT uStartIndex, UINT cEntries, CONST RGBQUAD* pColors)
02496     {
02497         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
02498         return ::SetDIBColorTable(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, uStartIndex, cEntries, pColors);
02499     }
02500 
02501 <font class="comment">// OpenGL support</font>
02502 <font class="preprocessor">#ifndef _ATL_NO_OPENGL</font>
<a name="l02503"></a><a class="code" href="classWTL_1_1CDCT.html#a224">02503</a> <font class="preprocessor"></font>    <font class="keywordtype">int</font> <a class="code" href="classWTL_1_1CDCT.html#a224">ChoosePixelFormat</a>(CONST PIXELFORMATDESCRIPTOR* ppfd)
02504     {
02505         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
02506         return ::ChoosePixelFormat(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, ppfd);
02507     }
<a name="l02508"></a><a class="code" href="classWTL_1_1CDCT.html#a225">02508</a>     <font class="keywordtype">int</font> <a class="code" href="classWTL_1_1CDCT.html#a225">DescribePixelFormat</a>(<font class="keywordtype">int</font> iPixelFormat, UINT nBytes, LPPIXELFORMATDESCRIPTOR ppfd)
02509     {
02510         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
02511         return ::DescribePixelFormat(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, iPixelFormat, nBytes, ppfd);
02512     }
<a name="l02513"></a><a class="code" href="classWTL_1_1CDCT.html#a226">02513</a>     <font class="keywordtype">int</font> <a class="code" href="classWTL_1_1CDCT.html#a226">GetPixelFormat</a>()<font class="keyword"> const</font>
02514 <font class="keyword">    </font>{
02515         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
02516         return ::GetPixelFormat(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>);
02517     }
<a name="l02518"></a><a class="code" href="classWTL_1_1CDCT.html#a227">02518</a>     BOOL <a class="code" href="classWTL_1_1CDCT.html#a227">SetPixelFormat</a>(<font class="keywordtype">int</font> iPixelFormat, CONST PIXELFORMATDESCRIPTOR* ppfd)
02519     {
02520         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
02521         return ::SetPixelFormat(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, iPixelFormat, ppfd);
02522     }
<a name="l02523"></a><a class="code" href="classWTL_1_1CDCT.html#a228">02523</a>     BOOL <a class="code" href="classWTL_1_1CDCT.html#a228">SwapBuffers</a>()
02524     {
02525         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
02526         return ::SwapBuffers(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>);
02527     }
02528 
<a name="l02529"></a><a class="code" href="classWTL_1_1CDCT.html#a229">02529</a>     HGLRC <a class="code" href="classWTL_1_1CDCT.html#a229">wglCreateContext</a>()
02530     {
02531         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
02532         return ::wglCreateContext(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>);
02533     }
<a name="l02534"></a><a class="code" href="classWTL_1_1CDCT.html#a230">02534</a>     HGLRC <a class="code" href="classWTL_1_1CDCT.html#a230">wglCreateLayerContext</a>(<font class="keywordtype">int</font> iLayerPlane)
02535     {
02536         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
02537         return ::wglCreateLayerContext(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, iLayerPlane);
02538     }
<a name="l02539"></a><a class="code" href="classWTL_1_1CDCT.html#a231">02539</a>     BOOL <a class="code" href="classWTL_1_1CDCT.html#a231">wglMakeCurrent</a>(HGLRC hglrc)
02540     {
02541         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
02542         return ::wglMakeCurrent(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, hglrc);
02543     }
<a name="l02544"></a><a class="code" href="classWTL_1_1CDCT.html#a232">02544</a>     BOOL <a class="code" href="classWTL_1_1CDCT.html#a232">wglUseFontBitmaps</a>(DWORD dwFirst, DWORD dwCount, DWORD listBase)
02545     {
02546         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
02547         return ::wglUseFontBitmaps(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, dwFirst, dwCount, listBase);
02548     }
<a name="l02549"></a><a class="code" href="classWTL_1_1CDCT.html#a233">02549</a>     BOOL <a class="code" href="classWTL_1_1CDCT.html#a233">wglUseFontOutlines</a>(DWORD dwFirst, DWORD dwCount, DWORD listBase, FLOAT deviation, FLOAT extrusion, <font class="keywordtype">int</font> format, LPGLYPHMETRICSFLOAT lpgmf)
02550     {
02551         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
02552         return ::wglUseFontOutlines(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, dwFirst, dwCount, listBase, deviation, extrusion, format, lpgmf);
02553     }
<a name="l02554"></a><a class="code" href="classWTL_1_1CDCT.html#a234">02554</a>     BOOL <a class="code" href="classWTL_1_1CDCT.html#a234">wglDescribeLayerPlane</a>(<font class="keywordtype">int</font> iPixelFormat, <font class="keywordtype">int</font> iLayerPlane, UINT nBytes, LPLAYERPLANEDESCRIPTOR plpd)
02555     {
02556         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
02557         return ::wglDescribeLayerPlane(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, iPixelFormat, iLayerPlane, nBytes, plpd);
02558     }
<a name="l02559"></a><a class="code" href="classWTL_1_1CDCT.html#a235">02559</a>     <font class="keywordtype">int</font> <a class="code" href="classWTL_1_1CDCT.html#a235">wglSetLayerPaletteEntries</a>(<font class="keywordtype">int</font> iLayerPlane, <font class="keywordtype">int</font> iStart, <font class="keywordtype">int</font> cEntries, CONST COLORREF* pclr)
02560     {
02561         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
02562         return ::wglSetLayerPaletteEntries(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, iLayerPlane, iStart, cEntries, pclr);
02563     }
<a name="l02564"></a><a class="code" href="classWTL_1_1CDCT.html#a236">02564</a>     <font class="keywordtype">int</font> <a class="code" href="classWTL_1_1CDCT.html#a236">wglGetLayerPaletteEntries</a>(<font class="keywordtype">int</font> iLayerPlane, <font class="keywordtype">int</font> iStart, <font class="keywordtype">int</font> cEntries, COLORREF* pclr)
02565     {
02566         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
02567         return ::wglGetLayerPaletteEntries(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, iLayerPlane, iStart, cEntries, pclr);
02568     }
<a name="l02569"></a><a class="code" href="classWTL_1_1CDCT.html#a237">02569</a>     BOOL <a class="code" href="classWTL_1_1CDCT.html#a237">wglRealizeLayerPalette</a>(<font class="keywordtype">int</font> iLayerPlane, BOOL bRealize)
02570     {
02571         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
02572         return ::wglRealizeLayerPalette(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, iLayerPlane, bRealize);
02573     }
<a name="l02574"></a><a class="code" href="classWTL_1_1CDCT.html#a238">02574</a>     BOOL <a class="code" href="classWTL_1_1CDCT.html#a238">wglSwapLayerBuffers</a>(UINT uPlanes)
02575     {
02576         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
02577         return ::wglSwapLayerBuffers(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, uPlanes);
02578     }
02579 <font class="preprocessor">#endif </font>
02580 <font class="preprocessor"></font>
02581 <font class="preprocessor"></font><font class="comment">// New for Windows 2000 only</font>
02582 <font class="preprocessor">#if (_WIN32_WINNT &gt;= 0x0500)</font>
02583 <font class="preprocessor"></font>
<a name="l02584"></a><a class="code" href="classWTL_1_1CDCT.html#a239">02584</a>     COLORREF <a class="code" href="classWTL_1_1CDCT.html#a239">GetDCPenColor</a>()<font class="keyword"> const</font>
02585 <font class="keyword">    </font>{
02586         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
02587         return ::GetDCPenColor(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>);
02588     }
<a name="l02589"></a><a class="code" href="classWTL_1_1CDCT.html#a240">02589</a>     COLORREF <a class="code" href="classWTL_1_1CDCT.html#a240">SetDCPenColor</a>(COLORREF clr)
02590     {
02591         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
02592         return ::SetDCPenColor(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, clr);
02593     }
<a name="l02594"></a><a class="code" href="classWTL_1_1CDCT.html#a241">02594</a>     COLORREF <a class="code" href="classWTL_1_1CDCT.html#a241">GetDCBrushColor</a>()<font class="keyword"> const</font>
02595 <font class="keyword">    </font>{
02596         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
02597         return ::GetDCBrushColor(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>);
02598     }
<a name="l02599"></a><a class="code" href="classWTL_1_1CDCT.html#a242">02599</a>     COLORREF <a class="code" href="classWTL_1_1CDCT.html#a242">SetDCBrushColor</a>(COLORREF clr)
02600     {
02601         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
02602         return ::SetDCBrushColor(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, clr);
02603     }
02604 
<a name="l02605"></a><a class="code" href="classWTL_1_1CDCT.html#a243">02605</a>     DWORD <a class="code" href="classWTL_1_1CDCT.html#a243">GetFontUnicodeRanges</a>(LPGLYPHSET lpgs)<font class="keyword"> const</font>
02606 <font class="keyword">    </font>{
02607         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
02608         return ::GetFontUnicodeRanges(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, lpgs);
02609     }
<a name="l02610"></a><a class="code" href="classWTL_1_1CDCT.html#a244">02610</a>     DWORD <a class="code" href="classWTL_1_1CDCT.html#a244">GetGlyphIndices</a>(LPCTSTR lpstr, <font class="keywordtype">int</font> cch, LPWORD pgi, DWORD dwFlags)<font class="keyword"> const</font>
02611 <font class="keyword">    </font>{
02612         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
02613         return ::GetGlyphIndices(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, lpstr, cch, pgi, dwFlags);
02614     }
02615 
<a name="l02616"></a><a class="code" href="classWTL_1_1CDCT.html#a245">02616</a>     BOOL <a class="code" href="classWTL_1_1CDCT.html#a245">GetTextExtentPointI</a>(LPWORD pgiIn, <font class="keywordtype">int</font> cgi, LPSIZE lpSize)<font class="keyword"> const</font>
02617 <font class="keyword">    </font>{
02618         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
02619         return ::GetTextExtentPointI(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, pgiIn, cgi, lpSize);
02620     }
<a name="l02621"></a><a class="code" href="classWTL_1_1CDCT.html#a246">02621</a>     BOOL <a class="code" href="classWTL_1_1CDCT.html#a246">GetTextExtentExPointI</a>(LPWORD pgiIn, <font class="keywordtype">int</font> cgi, <font class="keywordtype">int</font> nMaxExtent, LPINT lpnFit, LPINT alpDx, LPSIZE lpSize)<font class="keyword"> const</font>
02622 <font class="keyword">    </font>{
02623         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
02624         return ::GetTextExtentExPointI(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, pgiIn, cgi, nMaxExtent, lpnFit, alpDx, lpSize);
02625     }
<a name="l02626"></a><a class="code" href="classWTL_1_1CDCT.html#a247">02626</a>     BOOL <a class="code" href="classWTL_1_1CDCT.html#a247">GetCharWidthI</a>(UINT giFirst, UINT cgi, LPWORD pgi, LPINT lpBuffer)<font class="keyword"> const</font>
02627 <font class="keyword">    </font>{
02628         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
02629         return ::GetCharWidthI(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, giFirst, cgi, pgi, lpBuffer);
02630     }
<a name="l02631"></a><a class="code" href="classWTL_1_1CDCT.html#a248">02631</a>     BOOL <a class="code" href="classWTL_1_1CDCT.html#a248">GetCharABCWidthsI</a>(UINT giFirst, UINT cgi, LPWORD pgi, LPABC lpabc)<font class="keyword"> const</font>
02632 <font class="keyword">    </font>{
02633         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
02634         return ::GetCharABCWidthsI(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, giFirst, cgi, pgi, lpabc);
02635     }
02636 
02637 <font class="preprocessor">#endif //(_WIN32_WINNT &gt;= 0x0500)</font>
02638 <font class="preprocessor"></font>
02639 <font class="comment">// New for Windows 2000 and Windows 98</font>
02640 <font class="preprocessor">#if (WINVER &gt;= 0x0500)</font>
02641 <font class="preprocessor"></font>
<a name="l02642"></a><a class="code" href="classWTL_1_1CDCT.html#a249">02642</a>     BOOL <a class="code" href="classWTL_1_1CDCT.html#a249">ColorCorrectPalette</a>(HPALETTE hPalette, DWORD dwFirstEntry, DWORD dwNumOfEntries)
02643     {
02644         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
02645         return ::ColorCorrectPalette(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a>, hPalette, dwFirstEntry, dwNumOfEntries);
02646     }
02647 
02648 <font class="preprocessor">#endif //(WINVER &gt;= 0x0500)</font>
02649 <font class="preprocessor"></font>};
02650 
<a name="l02651"></a><a class="code" href="namespaceWTL.html#a47">02651</a> <font class="keyword">typedef</font> <a class="code" href="classWTL_1_1CDCT.html">CDCT&lt;false&gt;</a>     <a class="code" href="namespaceWTL.html#a47">CDCHandle</a>;
<a name="l02652"></a><a class="code" href="namespaceWTL.html#a48">02652</a> <font class="keyword">typedef</font> <a class="code" href="classWTL_1_1CDCT.html">CDCT&lt;true&gt;</a>      <a class="code" href="namespaceWTL.html#a48">CDC</a>;
02653 
02654 
02656 <font class="comment">// CDC Helpers</font>
02657 
<a name="l02658"></a><a class="code" href="classWTL_1_1CPaintDC.html">02658</a> <font class="keyword">class </font><a class="code" href="classWTL_1_1CPaintDC.html">CPaintDC</a> : <font class="keyword">public</font> CDC
02659 {
02660 <font class="keyword">public</font>:
02661 <font class="comment">// Data members</font>
02662     HWND <a class="code" href="classWTL_1_1CPaintDC.html#m0">m_hWnd</a>;
02663     PAINTSTRUCT <a class="code" href="classWTL_1_1CPaintDC.html#m1">m_ps</a>;
02664 
02665 <font class="comment">// Constructor/destructor</font>
<a name="l02666"></a><a class="code" href="classWTL_1_1CPaintDC.html#a0">02666</a>     <a class="code" href="classWTL_1_1CPaintDC.html#a0">CPaintDC</a>(HWND hWnd)
02667     {
02668         ATLASSERT(::IsWindow(hWnd));
02669         <a class="code" href="classWTL_1_1CPaintDC.html#m0">m_hWnd</a> = hWnd;
02670         <a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> = ::BeginPaint(hWnd, &amp;<a class="code" href="classWTL_1_1CPaintDC.html#m1">m_ps</a>);
02671     }
<a name="l02672"></a><a class="code" href="classWTL_1_1CPaintDC.html#a1">02672</a>     <a class="code" href="classWTL_1_1CPaintDC.html#a1">~CPaintDC</a>()
02673     {
02674         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
02675         ATLASSERT(::IsWindow(<a class="code" href="classWTL_1_1CPaintDC.html#m0">m_hWnd</a>));
02676         ::EndPaint(<a class="code" href="classWTL_1_1CPaintDC.html#m0">m_hWnd</a>, &amp;<a class="code" href="classWTL_1_1CPaintDC.html#m1">m_ps</a>);
02677         <a class="code" href="classWTL_1_1CDCT.html#a4">Detach</a>();
02678     }
02679 };
02680 
<a name="l02681"></a><a class="code" href="classWTL_1_1CClientDC.html">02681</a> <font class="keyword">class </font><a class="code" href="classWTL_1_1CClientDC.html">CClientDC</a> : <font class="keyword">public</font> CDC
02682 {
02683 <font class="keyword">public</font>:
02684 <font class="comment">// Data members</font>
02685     HWND <a class="code" href="classWTL_1_1CClientDC.html#m0">m_hWnd</a>;
02686 
02687 <font class="comment">// Constructor/destructor</font>
<a name="l02688"></a><a class="code" href="classWTL_1_1CClientDC.html#a0">02688</a>     <a class="code" href="classWTL_1_1CClientDC.html#a0">CClientDC</a>(HWND hWnd)
02689     {
02690         ATLASSERT(hWnd == NULL || ::IsWindow(hWnd));
02691         <a class="code" href="classWTL_1_1CClientDC.html#m0">m_hWnd</a> = hWnd;
02692         <a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> = ::GetDC(hWnd);
02693     }
<a name="l02694"></a><a class="code" href="classWTL_1_1CClientDC.html#a1">02694</a>     <a class="code" href="classWTL_1_1CClientDC.html#a1">~CClientDC</a>()
02695     {
02696         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
02697         ::ReleaseDC(<a class="code" href="classWTL_1_1CClientDC.html#m0">m_hWnd</a>, <a class="code" href="classWTL_1_1CDCT.html#a4">Detach</a>());
02698     }
02699 };
02700 
<a name="l02701"></a><a class="code" href="classWTL_1_1CWindowDC.html">02701</a> <font class="keyword">class </font><a class="code" href="classWTL_1_1CWindowDC.html">CWindowDC</a> : <font class="keyword">public</font> CDC
02702 {
02703 <font class="keyword">public</font>:
02704 <font class="comment">// Data members</font>
02705     HWND <a class="code" href="classWTL_1_1CWindowDC.html#m0">m_hWnd</a>;
02706 
02707 <font class="comment">// Constructor/destructor</font>
<a name="l02708"></a><a class="code" href="classWTL_1_1CWindowDC.html#a0">02708</a>     <a class="code" href="classWTL_1_1CWindowDC.html#a0">CWindowDC</a>(HWND hWnd)
02709     {
02710         ATLASSERT(hWnd == NULL || ::IsWindow(hWnd));
02711         <a class="code" href="classWTL_1_1CWindowDC.html#m0">m_hWnd</a> = hWnd;
02712         <a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> = ::GetWindowDC(hWnd);
02713     }
<a name="l02714"></a><a class="code" href="classWTL_1_1CWindowDC.html#a1">02714</a>     <a class="code" href="classWTL_1_1CWindowDC.html#a1">~CWindowDC</a>()
02715     {
02716         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
02717         ::ReleaseDC(<a class="code" href="classWTL_1_1CWindowDC.html#m0">m_hWnd</a>, <a class="code" href="classWTL_1_1CDCT.html#a4">Detach</a>());
02718     }
02719 };
02720 
02721 
02723 <font class="comment">// Enhanced metafile support</font>
02724 
<a name="l02725"></a><a class="code" href="classWTL_1_1CEnhMetaFileInfo.html">02725</a> <font class="keyword">class </font><a class="code" href="classWTL_1_1CEnhMetaFileInfo.html">CEnhMetaFileInfo</a>
02726 {
02727 <font class="keyword">public</font>:
02728 <font class="comment">// Data members</font>
<a name="l02729"></a><a class="code" href="classWTL_1_1CEnhMetaFileInfo.html#m0">02729</a>     HENHMETAFILE <a class="code" href="classWTL_1_1CEnhMetaFileInfo.html#m0">m_hEMF</a>;
<a name="l02730"></a><a class="code" href="classWTL_1_1CEnhMetaFileInfo.html#m1">02730</a>     BYTE* <a class="code" href="classWTL_1_1CEnhMetaFileInfo.html#m1">m_pBits</a>;
<a name="l02731"></a><a class="code" href="classWTL_1_1CEnhMetaFileInfo.html#m2">02731</a>     TCHAR* <a class="code" href="classWTL_1_1CEnhMetaFileInfo.html#m2">m_pDesc</a>;
<a name="l02732"></a><a class="code" href="classWTL_1_1CEnhMetaFileInfo.html#m3">02732</a>     ENHMETAHEADER <a class="code" href="classWTL_1_1CEnhMetaFileInfo.html#m3">m_header</a>;
<a name="l02733"></a><a class="code" href="classWTL_1_1CEnhMetaFileInfo.html#m4">02733</a>     PIXELFORMATDESCRIPTOR <a class="code" href="classWTL_1_1CEnhMetaFileInfo.html#m4">m_pfd</a>;
02734 
02735 <font class="comment">// Constructor/destructor</font>
<a name="l02736"></a><a class="code" href="classWTL_1_1CEnhMetaFileInfo.html#a0">02736</a>     <a class="code" href="classWTL_1_1CEnhMetaFileInfo.html#a0">CEnhMetaFileInfo</a>(HENHMETAFILE hEMF) : <a class="code" href="classWTL_1_1CEnhMetaFileInfo.html#m1">m_pBits</a>(NULL), <a class="code" href="classWTL_1_1CEnhMetaFileInfo.html#m2">m_pDesc</a>(NULL), <a class="code" href="classWTL_1_1CEnhMetaFileInfo.html#m0">m_hEMF</a>(hEMF)
02737     { }
02738 
<a name="l02739"></a><a class="code" href="classWTL_1_1CEnhMetaFileInfo.html#a1">02739</a>     <a class="code" href="classWTL_1_1CEnhMetaFileInfo.html#a1">~CEnhMetaFileInfo</a>()
02740     {
02741         <font class="keyword">delete</font> [] <a class="code" href="classWTL_1_1CEnhMetaFileInfo.html#m1">m_pBits</a>;
02742         <font class="keyword">delete</font> [] <a class="code" href="classWTL_1_1CEnhMetaFileInfo.html#m2">m_pDesc</a>;
02743     }
02744 
02745 <font class="comment">// Operations</font>
<a name="l02746"></a><a class="code" href="classWTL_1_1CEnhMetaFileInfo.html#a2">02746</a>     BYTE* <a class="code" href="classWTL_1_1CEnhMetaFileInfo.html#a2">GetEnhMetaFileBits</a>()
02747     {
02748         ATLASSERT(<a class="code" href="classWTL_1_1CEnhMetaFileInfo.html#m0">m_hEMF</a> != NULL);
02749         UINT nBytes = ::GetEnhMetaFileBits(<a class="code" href="classWTL_1_1CEnhMetaFileInfo.html#m0">m_hEMF</a>, 0, NULL);
02750         <font class="keyword">delete</font> [] <a class="code" href="classWTL_1_1CEnhMetaFileInfo.html#m1">m_pBits</a>;
02751         <a class="code" href="classWTL_1_1CEnhMetaFileInfo.html#m1">m_pBits</a> = NULL;
02752         ATLTRY(<a class="code" href="classWTL_1_1CEnhMetaFileInfo.html#m1">m_pBits</a> = <font class="keyword">new</font> BYTE[nBytes]);
02753         <font class="keywordflow">if</font> (<a class="code" href="classWTL_1_1CEnhMetaFileInfo.html#m1">m_pBits</a> != NULL)
02754             ::GetEnhMetaFileBits(<a class="code" href="classWTL_1_1CEnhMetaFileInfo.html#m0">m_hEMF</a>, nBytes, <a class="code" href="classWTL_1_1CEnhMetaFileInfo.html#m1">m_pBits</a>);
02755         <font class="keywordflow">return</font> <a class="code" href="classWTL_1_1CEnhMetaFileInfo.html#m1">m_pBits</a>;
02756     }
<a name="l02757"></a><a class="code" href="classWTL_1_1CEnhMetaFileInfo.html#a3">02757</a>     LPTSTR <a class="code" href="classWTL_1_1CEnhMetaFileInfo.html#a3">GetEnhMetaFileDescription</a>()
02758     {
02759         ATLASSERT(<a class="code" href="classWTL_1_1CEnhMetaFileInfo.html#m0">m_hEMF</a> != NULL);
02760         UINT nLen = ::GetEnhMetaFileDescription(<a class="code" href="classWTL_1_1CEnhMetaFileInfo.html#m0">m_hEMF</a>, 0, NULL);
02761         <font class="keyword">delete</font> [] <a class="code" href="classWTL_1_1CEnhMetaFileInfo.html#m2">m_pDesc</a>;
02762         <a class="code" href="classWTL_1_1CEnhMetaFileInfo.html#m2">m_pDesc</a> = NULL;
02763         ATLTRY(<a class="code" href="classWTL_1_1CEnhMetaFileInfo.html#m2">m_pDesc</a> = <font class="keyword">new</font> TCHAR[nLen]);
02764         <font class="keywordflow">if</font> (<a class="code" href="classWTL_1_1CEnhMetaFileInfo.html#m2">m_pDesc</a> != NULL)
02765             nLen = ::GetEnhMetaFileDescription(<a class="code" href="classWTL_1_1CEnhMetaFileInfo.html#m0">m_hEMF</a>, nLen, <a class="code" href="classWTL_1_1CEnhMetaFileInfo.html#m2">m_pDesc</a>);
02766         <font class="keywordflow">return</font> <a class="code" href="classWTL_1_1CEnhMetaFileInfo.html#m2">m_pDesc</a>;
02767     }
<a name="l02768"></a><a class="code" href="classWTL_1_1CEnhMetaFileInfo.html#a4">02768</a>     ENHMETAHEADER* <a class="code" href="classWTL_1_1CEnhMetaFileInfo.html#a4">GetEnhMetaFileHeader</a>()
02769     {
02770         ATLASSERT(<a class="code" href="classWTL_1_1CEnhMetaFileInfo.html#m0">m_hEMF</a> != NULL);
02771         memset(&amp;<a class="code" href="classWTL_1_1CEnhMetaFileInfo.html#m3">m_header</a>, 0, <font class="keyword">sizeof</font>(<a class="code" href="classWTL_1_1CEnhMetaFileInfo.html#m3">m_header</a>));
02772         <a class="code" href="classWTL_1_1CEnhMetaFileInfo.html#m3">m_header</a>.iType = EMR_HEADER;
02773         <a class="code" href="classWTL_1_1CEnhMetaFileInfo.html#m3">m_header</a>.nSize = <font class="keyword">sizeof</font>(ENHMETAHEADER);
02774         UINT n = ::GetEnhMetaFileHeader(<a class="code" href="classWTL_1_1CEnhMetaFileInfo.html#m0">m_hEMF</a>, <font class="keyword">sizeof</font>(ENHMETAHEADER), &amp;<a class="code" href="classWTL_1_1CEnhMetaFileInfo.html#m3">m_header</a>);
02775         <font class="keywordflow">return</font> (n != 0) ? &amp;<a class="code" href="classWTL_1_1CEnhMetaFileInfo.html#m3">m_header</a> : NULL;
02776     }
<a name="l02777"></a><a class="code" href="classWTL_1_1CEnhMetaFileInfo.html#a5">02777</a>     PIXELFORMATDESCRIPTOR* <a class="code" href="classWTL_1_1CEnhMetaFileInfo.html#a5">GetEnhMetaFilePixelFormat</a>()
02778     {
02779         ATLASSERT(<a class="code" href="classWTL_1_1CEnhMetaFileInfo.html#m0">m_hEMF</a> != NULL);
02780         memset(&amp;<a class="code" href="classWTL_1_1CEnhMetaFileInfo.html#m4">m_pfd</a>, 0, <font class="keyword">sizeof</font>(<a class="code" href="classWTL_1_1CEnhMetaFileInfo.html#m4">m_pfd</a>));
02781         UINT n = ::GetEnhMetaFilePixelFormat(<a class="code" href="classWTL_1_1CEnhMetaFileInfo.html#m0">m_hEMF</a>, <font class="keyword">sizeof</font>(m_pfd), &amp;<a class="code" href="classWTL_1_1CEnhMetaFileInfo.html#m4">m_pfd</a>);
02782         <font class="keywordflow">return</font> (n != 0) ? &amp;<a class="code" href="classWTL_1_1CEnhMetaFileInfo.html#m4">m_pfd</a> : NULL;
02783     }
02784 };
02785 
02786 
02787 <font class="keyword">template</font> &lt;<font class="keywordtype">bool</font> t_bManaged&gt;
<a name="l02788"></a><a class="code" href="classWTL_1_1CEnhMetaFileT.html">02788</a> <font class="keyword">class </font><a class="code" href="classWTL_1_1CEnhMetaFileT.html">CEnhMetaFileT</a>
02789 {
02790 <font class="keyword">public</font>:
02791 <font class="comment">// Data members</font>
<a name="l02792"></a><a class="code" href="classWTL_1_1CEnhMetaFileT.html#m0">02792</a>     HENHMETAFILE <a class="code" href="classWTL_1_1CEnhMetaFileT.html#m0">m_hEMF</a>;
02793 
02794 <font class="comment">// Constructor/destructor</font>
<a name="l02795"></a><a class="code" href="classWTL_1_1CEnhMetaFileT.html#a0">02795</a>     <a class="code" href="classWTL_1_1CEnhMetaFileT.html#a0">CEnhMetaFileT</a>(HENHMETAFILE hEMF = NULL) : <a class="code" href="classWTL_1_1CEnhMetaFileT.html#m0">m_hEMF</a>(hEMF)
02796     {
02797     }
02798 
<a name="l02799"></a><a class="code" href="classWTL_1_1CEnhMetaFileT.html#a1">02799</a>     <a class="code" href="classWTL_1_1CEnhMetaFileT.html#a1">~CEnhMetaFileT</a>()
02800     {
02801         <font class="keywordflow">if</font>(t_bManaged &amp;&amp; <a class="code" href="classWTL_1_1CEnhMetaFileT.html#m0">m_hEMF</a> != NULL)
02802             <a class="code" href="classWTL_1_1CEnhMetaFileT.html#a7">DeleteObject</a>();
02803     }
02804 
02805 <font class="comment">// Operations</font>
<a name="l02806"></a><a class="code" href="classWTL_1_1CEnhMetaFileT.html#a2">02806</a>     <a class="code" href="classWTL_1_1CEnhMetaFileT.html">CEnhMetaFileT&lt;t_bManaged&gt;</a>&amp; <a class="code" href="classWTL_1_1CEnhMetaFileT.html#a2">operator=</a>(HENHMETAFILE hEMF)
02807     {
02808         <a class="code" href="classWTL_1_1CEnhMetaFileT.html#a3">Attach</a>(hEMF);
02809         <font class="keywordflow">return</font> *<font class="keyword">this</font>;
02810     }
02811 
<a name="l02812"></a><a class="code" href="classWTL_1_1CEnhMetaFileT.html#a3">02812</a>     <font class="keywordtype">void</font> <a class="code" href="classWTL_1_1CEnhMetaFileT.html#a3">Attach</a>(HENHMETAFILE hEMF)
02813     {
02814         <font class="keywordflow">if</font>(t_bManaged &amp;&amp; <a class="code" href="classWTL_1_1CEnhMetaFileT.html#m0">m_hEMF</a> != NULL)
02815             <a class="code" href="classWTL_1_1CEnhMetaFileT.html#a7">DeleteObject</a>();
02816         <a class="code" href="classWTL_1_1CEnhMetaFileT.html#m0">m_hEMF</a> = hEMF;
02817     }
<a name="l02818"></a><a class="code" href="classWTL_1_1CEnhMetaFileT.html#a4">02818</a>     HENHMETAFILE <a class="code" href="classWTL_1_1CEnhMetaFileT.html#a4">Detach</a>()
02819     {
02820         HENHMETAFILE hEMF = <a class="code" href="classWTL_1_1CEnhMetaFileT.html#m0">m_hEMF</a>;
02821         <a class="code" href="classWTL_1_1CEnhMetaFileT.html#m0">m_hEMF</a> = NULL;
02822         <font class="keywordflow">return</font> hEMF;
02823     }
02824 
<a name="l02825"></a><a class="code" href="classWTL_1_1CEnhMetaFileT.html#a5">02825</a>     <a class="code" href="classWTL_1_1CEnhMetaFileT.html#a5">operator HENHMETAFILE</a>()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> <a class="code" href="classWTL_1_1CEnhMetaFileT.html#m0">m_hEMF</a>; }
02826 
<a name="l02827"></a><a class="code" href="classWTL_1_1CEnhMetaFileT.html#a6">02827</a>     <font class="keywordtype">bool</font> <a class="code" href="classWTL_1_1CEnhMetaFileT.html#a6">IsNull</a>()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> (<a class="code" href="classWTL_1_1CEnhMetaFileT.html#m0">m_hEMF</a> == NULL); }
02828 
<a name="l02829"></a><a class="code" href="classWTL_1_1CEnhMetaFileT.html#a7">02829</a>     BOOL <a class="code" href="classWTL_1_1CEnhMetaFileT.html#a7">DeleteObject</a>()
02830     {
02831         ATLASSERT(<a class="code" href="classWTL_1_1CEnhMetaFileT.html#m0">m_hEMF</a> != NULL);
02832         BOOL bRet = ::DeleteEnhMetaFile(m_hEMF);
02833         <a class="code" href="classWTL_1_1CEnhMetaFileT.html#m0">m_hEMF</a> = NULL;
02834         <font class="keywordflow">return</font> bRet;
02835     }
02836 
<a name="l02837"></a><a class="code" href="classWTL_1_1CEnhMetaFileT.html#a8">02837</a>     UINT <a class="code" href="classWTL_1_1CEnhMetaFileT.html#a8">GetEnhMetaFileBits</a>(UINT cbBuffer, LPBYTE lpbBuffer)<font class="keyword"> const</font>
02838 <font class="keyword">    </font>{
02839         ATLASSERT(<a class="code" href="classWTL_1_1CEnhMetaFileT.html#m0">m_hEMF</a> != NULL);
02840         return ::GetEnhMetaFileBits(<a class="code" href="classWTL_1_1CEnhMetaFileT.html#m0">m_hEMF</a>, cbBuffer, lpbBuffer);
02841     }
<a name="l02842"></a><a class="code" href="classWTL_1_1CEnhMetaFileT.html#a9">02842</a>     UINT <a class="code" href="classWTL_1_1CEnhMetaFileT.html#a9">GetEnhMetaFileDescription</a>(UINT cchBuffer, LPTSTR lpszDescription)<font class="keyword"> const</font>
02843 <font class="keyword">    </font>{
02844         ATLASSERT(<a class="code" href="classWTL_1_1CEnhMetaFileT.html#m0">m_hEMF</a> != NULL);
02845         return ::GetEnhMetaFileDescription(<a class="code" href="classWTL_1_1CEnhMetaFileT.html#m0">m_hEMF</a>, cchBuffer, lpszDescription);
02846     }
<a name="l02847"></a><a class="code" href="classWTL_1_1CEnhMetaFileT.html#a10">02847</a>     UINT <a class="code" href="classWTL_1_1CEnhMetaFileT.html#a10">GetEnhMetaFileHeader</a>(LPENHMETAHEADER lpemh)<font class="keyword"> const</font>
02848 <font class="keyword">    </font>{
02849         ATLASSERT(<a class="code" href="classWTL_1_1CEnhMetaFileT.html#m0">m_hEMF</a> != NULL);
02850         lpemh-&gt;iType = EMR_HEADER;
02851         lpemh-&gt;nSize = <font class="keyword">sizeof</font>(ENHMETAHEADER);
02852         return ::GetEnhMetaFileHeader(<a class="code" href="classWTL_1_1CEnhMetaFileT.html#m0">m_hEMF</a>, <font class="keyword">sizeof</font>(ENHMETAHEADER), lpemh);
02853     }
<a name="l02854"></a><a class="code" href="classWTL_1_1CEnhMetaFileT.html#a11">02854</a>     UINT <a class="code" href="classWTL_1_1CEnhMetaFileT.html#a11">GetEnhMetaFilePaletteEntries</a>(UINT cEntries, LPPALETTEENTRY lppe)<font class="keyword"> const</font>
02855 <font class="keyword">    </font>{
02856         ATLASSERT(<a class="code" href="classWTL_1_1CEnhMetaFileT.html#m0">m_hEMF</a> != NULL);
02857         return ::GetEnhMetaFilePaletteEntries(<a class="code" href="classWTL_1_1CEnhMetaFileT.html#m0">m_hEMF</a>, cEntries, lppe);
02858     }
<a name="l02859"></a><a class="code" href="classWTL_1_1CEnhMetaFileT.html#a12">02859</a>     UINT <a class="code" href="classWTL_1_1CEnhMetaFileT.html#a12">GetEnhMetaFilePixelFormat</a>(DWORD cbBuffer, PIXELFORMATDESCRIPTOR* ppfd)<font class="keyword"> const</font>
02860 <font class="keyword">    </font>{
02861         ATLASSERT(<a class="code" href="classWTL_1_1CEnhMetaFileT.html#m0">m_hEMF</a> != NULL);
02862         return ::GetEnhMetaFilePixelFormat(<a class="code" href="classWTL_1_1CEnhMetaFileT.html#m0">m_hEMF</a>, cbBuffer, ppfd);
02863     }
02864 };
02865 
<a name="l02866"></a><a class="code" href="namespaceWTL.html#a49">02866</a> <font class="keyword">typedef</font> <a class="code" href="classWTL_1_1CEnhMetaFileT.html">CEnhMetaFileT&lt;false&gt;</a>    <a class="code" href="namespaceWTL.html#a49">CEnhMetaFileHandle</a>;
<a name="l02867"></a><a class="code" href="namespaceWTL.html#a50">02867</a> <font class="keyword">typedef</font> <a class="code" href="classWTL_1_1CEnhMetaFileT.html">CEnhMetaFileT&lt;true&gt;</a> <a class="code" href="namespaceWTL.html#a50">CEnhMetaFile</a>;
02868 
02869 
<a name="l02870"></a><a class="code" href="classWTL_1_1CEnhMetaFileDC.html">02870</a> <font class="keyword">class </font><a class="code" href="classWTL_1_1CEnhMetaFileDC.html">CEnhMetaFileDC</a> : <font class="keyword">public</font> CDC
02871 {
02872 <font class="keyword">public</font>:
02873 <font class="comment">// Constructor/destructor</font>
<a name="l02874"></a><a class="code" href="classWTL_1_1CEnhMetaFileDC.html#a0">02874</a>     <a class="code" href="classWTL_1_1CEnhMetaFileDC.html#a0">CEnhMetaFileDC</a>()
02875     {
02876     }
<a name="l02877"></a><a class="code" href="classWTL_1_1CEnhMetaFileDC.html#a1">02877</a>     <a class="code" href="classWTL_1_1CEnhMetaFileDC.html#a0">CEnhMetaFileDC</a>(HDC hdc, LPCRECT lpRect)
02878     {
02879         <a class="code" href="classWTL_1_1CEnhMetaFileDC.html#a4">Create</a>(hdc, NULL, lpRect, NULL);
02880         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
02881     }
<a name="l02882"></a><a class="code" href="classWTL_1_1CEnhMetaFileDC.html#a2">02882</a>     <a class="code" href="classWTL_1_1CEnhMetaFileDC.html#a0">CEnhMetaFileDC</a>(HDC hdcRef, LPCTSTR lpFilename, LPCRECT lpRect, LPCTSTR lpDescription)
02883     {
02884         <a class="code" href="classWTL_1_1CEnhMetaFileDC.html#a4">Create</a>(hdcRef, lpFilename, lpRect, lpDescription);
02885         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL);
02886     }
02887 
<a name="l02888"></a><a class="code" href="classWTL_1_1CEnhMetaFileDC.html#a3">02888</a>     <a class="code" href="classWTL_1_1CEnhMetaFileDC.html#a3">~CEnhMetaFileDC</a>()
02889     {
02890         HENHMETAFILE hEMF = <a class="code" href="classWTL_1_1CEnhMetaFileDC.html#a5">Close</a>();
02891         <font class="keywordflow">if</font> (hEMF != NULL)
02892             ::DeleteEnhMetaFile(hEMF);
02893     }
02894 
02895 <font class="comment">// Operations</font>
<a name="l02896"></a><a class="code" href="classWTL_1_1CEnhMetaFileDC.html#a4">02896</a>     <font class="keywordtype">void</font> <a class="code" href="classWTL_1_1CEnhMetaFileDC.html#a4">Create</a>(HDC hdcRef, LPCTSTR lpFilename, LPCRECT lpRect, LPCTSTR lpDescription)
02897     {
02898         ATLASSERT(<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> == NULL);
02899         <a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> = ::CreateEnhMetaFile(hdcRef, lpFilename, lpRect, lpDescription);
02900     }
<a name="l02901"></a><a class="code" href="classWTL_1_1CEnhMetaFileDC.html#a5">02901</a>     HENHMETAFILE <a class="code" href="classWTL_1_1CEnhMetaFileDC.html#a5">Close</a>()
02902     {
02903         HENHMETAFILE hEMF = NULL;
02904         <font class="keywordflow">if</font> (<a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> != NULL)
02905         {
02906             hEMF = ::CloseEnhMetaFile(m_hDC);
02907             <a class="code" href="classWTL_1_1CDCT.html#m0">m_hDC</a> = NULL;
02908         }
02909         <font class="keywordflow">return</font> hEMF;
02910     }
02911 };
02912 
02913 }; <font class="comment">//namespace WTL</font>
02914 
02915 <font class="preprocessor">#endif // __ATLGDI_H__</font>
</pre></div><hr><address align="right"><small>Generated on Thu Apr 11 21:09:31 2002 for wtl-doc by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.15 </small></address>
</body>
</html>
